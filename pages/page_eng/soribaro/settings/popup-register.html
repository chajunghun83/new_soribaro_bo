<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popup Event Registration - Soribaro BO</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            color: #333;
            padding: 30px;
            min-height: 100vh;
        }
        
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .page-title {
            font-size: 28px;
            font-weight: 600;
            color: #374151;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .back-button {
            background: #6b7280;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .back-button:hover {
            background: #4b5563;
        }

        /* Main Container */
        .detail-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        /* Information Section */
        .info-section {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border: 1px solid #e5e7eb;
            overflow: hidden;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #374151;
            padding: 20px 24px;
            border-bottom: 1px solid #e5e7eb;
            background: #f8f9fa;
        }
        
        .info-content {
            padding: 24px;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: 120px 1fr 120px 1fr;
            gap: 16px 20px;
            margin-bottom: 20px;
        }
        
        .info-label {
            font-weight: 500;
            color: #6b7280;
            font-size: 14px;
            display: flex;
            align-items: center;
        }
        
        .info-input {
            color: #374151;
            font-size: 14px;
            padding: 8px 12px;
            background: white;
            border-radius: 6px;
            border: 1px solid #d1d5db;
            transition: border-color 0.2s;
        }
        
        .info-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .info-select {
            color: #374151;
            font-size: 14px;
            padding: 8px 12px;
            background: white;
            border-radius: 6px;
            border: 1px solid #d1d5db;
            cursor: pointer;
        }
        
        .info-select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        /* Popup Content Area */
        .content-section {
            grid-column: 1 / -1;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border: 1px solid #e5e7eb;
            overflow: hidden;
            margin-top: 20px;
        }
        
        .content-textarea {
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 20px;
            min-height: 400px;
            color: #374151;
            font-size: 14px;
            line-height: 1.8;
            width: 100%;
            resize: vertical;
            font-family: inherit;
        }
        
        .content-textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        /* Bottom Action Buttons */
        .bottom-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 30px;
        }
        
        .btn-register {
            background: #10b981;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-register:hover {
            background: #059669;
        }

        .required {
            color: #dc2626;
            margin-left: 4px;
        }
    </style>
</head>
<body>
    <div class="page-header">
        <h1 class="page-title">
            <span>üéâ</span>
            <span id="pageTitle">Popup Event Registration</span>
        </h1>
        <button class="back-button" onclick="goBack()">
            <span>‚Üê</span>
            Back to List
        </button>
    </div>
    
    <div class="detail-container">
        <!-- Basic Information Section -->
        <div class="info-section">
            <div class="section-title">Basic Information</div>
            <div class="info-content">
                <div class="info-grid">
                    <div class="info-label">Title<span class="required">*</span></div>
                    <input type="text" id="popupTitle" class="info-input" placeholder="Enter popup event title">
                    
                    <div class="info-label">Service Type<span class="required">*</span></div>
                    <select id="serviceType" class="info-select">
                        <option value="">Please select</option>
                        <option value="ÌïúÍ∏Ä">Korean</option>
                        <option value="ÏòÅÏñ¥">English</option>
                    </select>
                    
                    <div class="info-label">Target<span class="required">*</span></div>
                    <select id="target" class="info-select">
                        <option value="">Please select</option>
                        <option value="Ï†ÑÏ≤¥">All</option>
                        <option value="Í≥†Í∞ù">Customer</option>
                        <option value="ÏûëÏóÖÏûê">Worker</option>
                        <option value="Í∏∞ÏóÖÍ≥†Í∞ù">Enterprise</option>
                    </select>
                    
                    <div class="info-label">Status<span class="required">*</span></div>
                    <select id="status" class="info-select">
                        <option value="ÏÇ¨Ïö©">Active</option>
                        <option value="ÎØ∏ÏÇ¨Ïö©">Inactive</option>
                    </select>
                    
                    <div class="info-label">Start Date<span class="required">*</span></div>
                    <input type="date" id="startDate" class="info-input">
                    
                    <div class="info-label">End Date<span class="required">*</span></div>
                    <input type="date" id="endDate" class="info-input">
                </div>
            </div>
        </div>
    </div>
    
    <!-- Popup Content Section -->
    <div class="content-section">
        <div class="section-title">Popup Content</div>
        <div class="info-content">
            <textarea class="content-textarea" id="popupContent" placeholder="Enter popup event content...

Example:
üéâ Event Title üéâ

Event description...

‚ñ† Event Period
August 1, 2025 ~ August 31, 2025

‚ñ† Event Details
‚úÖ Benefit 1
‚úÖ Benefit 2
‚úÖ Benefit 3

‚ñ† How to Participate
1. First step
2. Second step
3. Third step

‚ñ† Notes
- Note 1
- Note 2

For inquiries, please contact customer service.

Thank you."></textarea>
        </div>
    </div>
    
    <!-- Bottom Action Buttons -->
    <div class="bottom-actions">
        <button class="btn-register" onclick="registerPopup()">
            <span id="registerIcon">üìù</span>
            <span id="registerText">Register</span>
        </button>
    </div>

    <script>
        let isEditMode = false;
        let editItemId = null;
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Popup event registration page loaded');
            
            // Check URL parameters (check if edit mode)
            const urlParams = new URLSearchParams(window.location.search);
            const mode = urlParams.get('mode');
            const id = urlParams.get('id');
            
            if (mode === 'edit' && id) {
                isEditMode = true;
                editItemId = id;
                document.getElementById('pageTitle').textContent = 'Popup Event Edit';
                document.getElementById('registerIcon').textContent = '‚úèÔ∏è';
                document.getElementById('registerText').textContent = 'Edit';
                
                // Load existing data
                loadExistingData(id);
            } else {
                // Set current date as default
                const now = new Date();
                const currentDate = now.toISOString().slice(0, 10);
                document.getElementById('startDate').value = currentDate;
                
                // Set end date to one month later
                const nextMonth = new Date(now);
                nextMonth.setMonth(nextMonth.getMonth() + 1);
                document.getElementById('endDate').value = nextMonth.toISOString().slice(0, 10);
            }
        });
        
        // Load existing data (edit mode)
        function loadExistingData(id) {
            // Call server API in actual implementation
            const mockData = getMockData(id);
            
            document.getElementById('popupTitle').value = mockData.popupTitle;
            document.getElementById('serviceType').value = mockData.serviceType;
            document.getElementById('startDate').value = mockData.startDate;
            document.getElementById('endDate').value = mockData.endDate;
            document.getElementById('target').value = mockData.target;
            document.getElementById('status').value = mockData.status;
            document.getElementById('popupContent').value = mockData.content;
        }
        
        // Mock data (for edit mode)
        function getMockData(id) {
            const mockDatabase = {
                'POPUP001': {
                    popupTitle: 'New Member Registration Event',
                    serviceType: 'ÌïúÍ∏Ä',
                    startDate: '2025-08-01',
                    endDate: '2025-08-31',
                    target: 'Í≥†Í∞ù',
                    status: 'ÏÇ¨Ïö©',
                    content: `üéâ New Member Registration Event üéâ

Welcome to Soribaro service!

‚ñ† Event Period
August 1, 2025 ~ August 31, 2025

‚ñ† Event Details
‚úÖ 1,000 points instantly credited upon new member registration
‚úÖ 20% discount coupon provided for first service usage
‚úÖ Additional 500 points when referring friends

‚ñ† How to Participate
1. Sign up on Soribaro website
2. Complete email verification
3. Check automatic point credit

‚ñ† Notes
- This event applies to new members only.
- Duplicate participation is not allowed.
- Benefits are provided only to members who sign up during the event period.

For inquiries, please contact customer service (1588-1234).

Thank you.`
                }
            };
            
            return mockDatabase[id] || {};
        }
        
        // Go back to list
        function goBack() {
            window.location.href = 'popup-management.html';
        }
        
        // Register/Edit function
        function registerPopup() {
            // Validate required fields
            const popupTitle = document.getElementById('popupTitle').value.trim();
            const serviceType = document.getElementById('serviceType').value;
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            const target = document.getElementById('target').value;
            const status = document.getElementById('status').value;
            const popupContent = document.getElementById('popupContent').value.trim();
            
            if (!popupTitle) {
                alert('Please enter title.');
                document.getElementById('popupTitle').focus();
                return;
            }
            
            if (!serviceType) {
                alert('Please select service type.');
                document.getElementById('serviceType').focus();
                return;
            }
            
            if (!startDate) {
                alert('Please enter start date.');
                document.getElementById('startDate').focus();
                return;
            }
            
            if (!endDate) {
                alert('Please enter end date.');
                document.getElementById('endDate').focus();
                return;
            }
            
            if (!target) {
                alert('Please select target.');
                document.getElementById('target').focus();
                return;
            }
            
            if (!popupContent) {
                alert('Please enter popup content.');
                document.getElementById('popupContent').focus();
                return;
            }
            
            // Date validation
            if (new Date(startDate) >= new Date(endDate)) {
                alert('End date must be later than start date.');
                document.getElementById('endDate').focus();
                return;
            }
            
            // Confirm register/edit
            const action = isEditMode ? 'edit' : 'register';
            if (confirm(`Are you sure you want to ${action} this popup event?`)) {
                // Call server API in actual implementation
                const formData = {
                    popupTitle: popupTitle,
                    serviceType: serviceType,
                    startDate: startDate,
                    endDate: endDate,
                    target: target,
                    status: status,
                    popupContent: popupContent
                };
                
                console.log(`${action} data:`, formData);
                alert(`Popup event ${action} completed.`);
                goBack();
            }
        }
    </script>
</body>
</html>
