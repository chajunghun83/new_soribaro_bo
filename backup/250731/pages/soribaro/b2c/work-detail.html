<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>작업 상세정보 - 소리바로 BO</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            color: #333;
            padding: 30px;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .page-title {
            font-size: 28px;
            font-weight: 600;
            color: #374151;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .back-button {
            background: #6b7280;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .back-button:hover {
            background: #4b5563;
        }
        
        /* 정보 섹션 */
        .info-section {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .section-title {
            margin: 0 0 25px 0;
            color: #374151;
            font-size: 1.2rem;
            font-weight: 600;
            border-bottom: 3px solid #3b82f6;
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: 140px 1fr;
            gap: 20px;
            align-items: center;
        }
        
        .info-grid-2col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }
        
        .info-label {
            font-weight: 500;
            color: #6b7280;
            font-size: 14px;
        }
        
        .info-value {
            color: #374151;
            font-size: 14px;
        }
        
        .info-value.highlight {
            font-weight: 600;
            color: #3b82f6;
        }
        
        .info-value.warning {
            color: #f59e0b;
            font-weight: 500;
        }
        
        .info-value.success {
            color: #10b981;
            font-weight: 500;
        }
        
        /* 액션 버튼 영역 */
        .action-section {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: #3b82f6;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2563eb;
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn-success:hover {
            background: #059669;
        }
        
        .btn-warning {
            background: #f59e0b;
            color: white;
        }
        
        .btn-warning:hover {
            background: #d97706;
        }
        
        .btn-outline {
            background: white;
            color: #6b7280;
            border: 1px solid #d1d5db;
        }
        
        .btn-outline:hover {
            background: #f9fafb;
        }
        
        /* 상태 배지 */
        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
        }
        
        .status-waiting { background: rgba(245, 158, 11, 0.1); color: #f59e0b; }
        .status-inprogress { background: rgba(59, 130, 246, 0.1); color: #3b82f6; }
        .status-completed { background: rgba(16, 185, 129, 0.1); color: #10b981; }
        .status-cancelled { background: rgba(239, 68, 68, 0.1); color: #ef4444; }
        
        /* 파일 플레이어 영역 */
        .file-player-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .file-info-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .file-name-info {
            color: #374151;
            font-weight: 500;
            font-size: 14px;
        }
        
        .download-buttons {
            display: flex;
            gap: 10px;
        }
        
        .download-btn {
            background: #10b981;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .download-btn:hover {
            background: #059669;
        }
        
        .download-btn.json {
            background: #3b82f6;
        }
        
        .download-btn.json:hover {
            background: #2563eb;
        }
        
        /* 탭 스타일 */
        .tab-container {
            margin-bottom: 30px;
        }
        
        .tab-nav {
            display: flex;
            border-bottom: 2px solid #e5e7eb;
            margin-bottom: 20px;
        }
        
        .tab-button {
            background: none;
            border: none;
            padding: 15px 25px;
            font-size: 16px;
            font-weight: 500;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            position: relative;
        }
        
        .tab-button.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
            background: rgba(59, 130, 246, 0.05);
        }
        
        .tab-button:hover:not(.active) {
            color: #374151;
            background: #f9fafb;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* 작업관리 탭 스타일 */
        .work-management-section {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .work-info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }
        
        .assignment-section {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .worker-select {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            min-width: 150px;
        }
        
        .upload-area {
            border: 2px dashed #d1d5db;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            background: #f9fafb;
            transition: all 0.2s;
        }
        
        .upload-area:hover {
            border-color: #3b82f6;
            background: rgba(59, 130, 246, 0.05);
        }
        
        .upload-btn {
            background: #6b7280;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .upload-btn:hover {
            background: #4b5563;
        }
        
        .tool-btn {
            background: #f59e0b;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tool-btn:hover {
            background: #d97706;
        }
        
        /* 오디오 플레이어 스타일 */
        .audio-player {
            width: 100%;
            height: 40px;
            background: white;
            border-radius: 6px;
            border: 1px solid #e5e7eb;
        }
        
        .audio-player::-webkit-media-controls-panel {
            background-color: white;
        }
        
        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            font-size: 12px;
            color: #6b7280;
        }
        
        /* 정보 섹션 그리드 배치 */
        .info-sections-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }
        
        /* 웍스파이 모달 팝업 스타일 */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .modal-container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            width: 90%;
            max-width: 1000px;
            max-height: 95vh;
            display: flex;
            flex-direction: column;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            border-bottom: 1px solid #e2e8f0;
            background: #f8fafc;
            flex-shrink: 0;
        }
        
        .modal-header h2 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
            color: #1f2937;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            color: #6b7280;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-close:hover {
            color: #374151;
            background: #e5e7eb;
            border-radius: 4px;
        }
        
        .modal-form {
            padding: 25px;
            overflow-y: auto;
            flex: 1;
            max-height: calc(95vh - 140px);
        }
        
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            align-items: flex-start;
        }
        
        .form-group {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .form-group.full-width {
            flex: 1 1 100%;
        }
        
        .form-group.required {
            position: relative;
        }
        
        .form-group label {
            font-size: 14px;
            font-weight: 500;
            color: #374151;
            margin-bottom: 8px;
            display: block;
        }
        
        .required-mark {
            color: #ef4444;
            font-weight: bold;
        }
        
        .form-group input,
        .form-group select {
            padding: 10px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            color: #374151;
            outline: none;
            transition: border-color 0.2s;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .date-range {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .date-range input {
            flex: 1;
        }
        
        .date-range span {
            font-size: 14px;
            color: #6b7280;
        }
        
        /* 토글 스위치 스타일 */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }
        
        .toggle-input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-label {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        
        .toggle-label:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        .toggle-input:checked + .toggle-label {
            background-color: #3b82f6;
        }
        
        .toggle-input:checked + .toggle-label:before {
            transform: translateX(20px);
        }
        
        /* 심플 에디터 스타일 */
        .simple-editor-toolbar {
            display: flex;
            gap: 4px;
            padding: 8px 12px;
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-bottom: none;
            border-radius: 6px 6px 0 0;
        }
        
        .simple-editor-btn {
            padding: 4px 8px;
            background: none;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 13px;
            color: #6b7280;
            transition: all 0.2s;
            min-width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .simple-editor-btn:hover {
            background: #e5e7eb;
            color: #374151;
        }
        
        .simple-content-editor {
            min-height: 180px;
            padding: 16px;
            border: 1px solid #e5e7eb;
            border-radius: 0 0 6px 6px;
            outline: none;
            font-size: 14px;
            line-height: 1.6;
            color: #374151;
            background: white;
            transition: border-color 0.2s;
        }
        
        .simple-content-editor:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
        }
        
        .simple-content-editor:empty:before {
            content: attr(placeholder);
            color: #9ca3af;
            font-style: italic;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            padding: 15px 25px;
            border-top: 1px solid #e2e8f0;
            background: white;
            flex-shrink: 0;
            gap: 10px;
        }
        
        .btn-save {
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 12px 30px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .btn-save:hover {
            background: #2563eb;
        }
        
        /* 파일 업로드 스타일 */
        .file-upload-area {
            border: 2px dashed #d1d5db;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            background: #f9fafb;
            transition: all 0.3s ease;
            position: relative;
            height: 180px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .file-upload-area:hover {
            border-color: #3b82f6;
            background: #f0f9ff;
        }
        
        .file-upload-area.dragover {
            border-color: #3b82f6;
            background: #dbeafe;
        }
        
        .file-upload-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            flex-shrink: 0;
            justify-content: center;
            height: 100%;
        }
        
        .file-upload-icon {
            font-size: 32px;
            opacity: 0.6;
        }
        
        .file-upload-text p {
            margin: 0;
            color: #374151;
            font-size: 14px;
        }
        
        .file-upload-subtext {
            font-size: 12px !important;
            color: #6b7280 !important;
        }
        
        .file-upload-btn {
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            font-size: 13px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .file-upload-btn:hover {
            background: #2563eb;
        }
        
        /* 썸네일 미리보기 */
        .file-preview {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            flex-shrink: 0;
        }
        
        .file-preview img {
            max-width: 200px;
            max-height: 150px;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .file-remove-btn {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .file-remove-btn:hover {
            background: #dc2626;
        }
        
        /* 첨부파일 리스트 */
        .file-list {
            flex: 1;
            overflow-y: auto;
            padding-top: 15px;
        }
        
        .file-list:empty {
            display: none;
        }
        
        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 12px;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            margin-bottom: 8px;
        }
        
        .file-info {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .file-icon {
            font-size: 16px;
        }
        
        .file-name {
            font-size: 14px;
            color: #374151;
            font-weight: 500;
        }
        
        .file-size {
            font-size: 12px;
            color: #6b7280;
        }
        
        .file-remove {
            background: none;
            border: none;
            color: #ef4444;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .file-remove:hover {
            background: #fef2f2;
        }

         /* 상세보기 팝업 스타일 */
         .detail-modal {
             max-width: 1200px;
             width: 95%;
             height: 85vh;
             max-height: 85vh;
         }
         
         .detail-content {
             padding: 0;
             flex: 1;
             overflow: hidden;
             display: flex;
             flex-direction: column;
         }
         
         /* 탭 네비게이션 - 모달 전용 */
         #detailModal .tab-navigation {
             display: flex;
             background: #f8fafc;
             border-bottom: 1px solid #e5e7eb;
             flex-shrink: 0;
         }
         
         #detailModal .tab-btn {
             flex: 1;
             padding: 15px 20px;
             background: none;
             border: none;
             cursor: pointer;
             font-size: 14px;
             font-weight: 500;
             color: #6b7280;
             transition: all 0.2s;
             border-bottom: 3px solid transparent;
         }
         
         #detailModal .tab-btn:hover {
             background: #f3f4f6;
             color: #374151;
         }
         
         #detailModal .tab-btn.active {
             background: white !important;
             color: #3b82f6 !important;
             border-bottom-color: #3b82f6 !important;
         }
         
         /* 탭 콘텐츠 - 모달 전용 */
         #detailModal .tab-content {
             position: relative;
             flex: 1;
             overflow: hidden;
             display: block !important; /* 기존 CSS 우선순위보다 높게 */
         }
         
         #detailModal .tab-panel {
             display: none !important;
             padding: 0;
             height: 100%;
             overflow-y: auto;
             visibility: hidden;
             opacity: 0;
             transition: all 0.2s ease;
         }
         
         #detailModal .tab-panel.active {
             display: block !important;
             visibility: visible !important;
             opacity: 1 !important;
         }
         
         #detailModal .detail-section {
             background: #f8fafc !important;
             border-radius: 8px;
             padding: 25px;
             margin: 25px;
             margin-bottom: 20px;
             display: block !important;
         }
         
         #detailModal .detail-section:last-child {
             margin-bottom: 0;
         }
         
         .section-title {
             font-size: 16px;
             font-weight: 600;
             color: #1f2937;
             margin: 0 0 15px 0;
             display: flex;
             align-items: center;
             gap: 8px;
         }
         
         .section-header {
             display: flex;
             justify-content: space-between;
             align-items: center;
             margin-bottom: 15px;
         }
         
         #detailModal .info-grid {
             display: grid !important;
             grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
             gap: 15px;
             margin-bottom: 15px;
         }
         
         #detailModal .info-item {
             display: flex !important;
             flex-direction: column;
             gap: 5px;
         }
         
         #detailModal .info-item.full-width {
             grid-column: 1 / -1;
         }
         
         #detailModal .info-item label {
             font-size: 13px;
             font-weight: 500;
             color: #6b7280;
             text-transform: uppercase;
             letter-spacing: 0.5px;
             display: block !important;
         }
         
         #detailModal .info-item span,
         #detailModal .info-item h3 {
             font-size: 14px;
             color: #374151;
             margin: 0;
             padding: 8px 12px;
             background: white;
             border-radius: 6px;
             border: 1px solid #e5e7eb;
             display: block !important;
         }
         
         #detailModal .info-item h3 {
             font-size: 16px;
             font-weight: 600;
             color: #1f2937;
         }
         
         #detailModal .content-box {
             min-height: 80px;
             padding: 12px;
             background: white;
             border-radius: 6px;
             border: 1px solid #e5e7eb;
             line-height: 1.6;
             display: block !important;
         }
         
         #detailModal .thumbnail-preview {
             padding: 12px;
             background: white;
             border-radius: 6px;
             border: 1px solid #e5e7eb;
             min-height: 80px;
             display: flex !important;
             align-items: center;
             justify-content: center;
             color: #6b7280;
         }
         
         #detailModal .thumbnail-preview img {
             max-width: 100%;
             max-height: 120px;
             border-radius: 4px;
         }
         
         #detailModal .attachments-list {
             padding: 12px;
             background: white;
             border-radius: 6px;
             border: 1px solid #e5e7eb;
             min-height: 80px;
             display: block !important;
         }
         
         .attachment-item {
             display: flex;
             align-items: center;
             gap: 8px;
             padding: 6px 0;
             border-bottom: 1px solid #f3f4f6;
         }
         
         .attachment-item:last-child {
             border-bottom: none;
         }
         
         .attachment-item a {
             color: #3b82f6;
             text-decoration: none;
             font-size: 14px;
         }
         
         .attachment-item a:hover {
             text-decoration: underline;
         }
         
         /* 작업자 통계 - 모달 전용 */
         #detailModal .applicant-stats {
             display: flex !important;
             gap: 20px;
         }
         
         #detailModal .stat-item {
             font-size: 14px;
             color: #6b7280;
             display: inline-block !important;
         }
         
         #detailModal .stat-item strong {
             color: #1f2937;
             font-size: 16px;
         }
         
         /* 작업자 테이블 - 모달 전용 */
         #detailModal .applicants-table-wrapper {
             background: white;
             border-radius: 8px;
             overflow: visible;
             border: 1px solid #e5e7eb;
             display: block !important;
         }
         
         #detailModal .applicants-table {
             width: 100%;
             border-collapse: collapse;
             min-width: 825px;
             display: table !important;
         }
         
         .applicants-table th,
         .applicants-table td {
             padding: 6px 8px;
             text-align: left;
             border-bottom: 1px solid #f3f4f6;
             font-size: 12px;
             white-space: nowrap;
             overflow: hidden;
             text-overflow: ellipsis;
         }
         
         /* 체크박스 스타일 */
         .applicants-table input[type="checkbox"] {
             width: 16px;
             height: 16px;
             cursor: pointer;
         }
         
         .applicants-table th {
             background: #f8fafc;
             font-weight: 600;
             color: #374151;
             text-align: center;
             position: sticky;
             top: 0;
             z-index: 1;
         }
         
         .applicants-table td {
             color: #6b7280;
         }
         
         .applicants-table tbody tr {
             cursor: pointer;
             transition: background-color 0.2s ease;
         }
         
         .applicants-table tbody tr:hover {
             background: #f9fafb;
         }
         
         .applicant-status {
             padding: 4px 8px;
             border-radius: 12px;
             font-size: 12px;
             font-weight: 500;
             text-align: center;
         }
         
         .status-pending {
             background: #fef3c7;
             color: #d97706;
         }
         
         .status-approved {
             background: #d1fae5;
             color: #059669;
         }
         
         .status-rejected {
             background: #fee2e2;
             color: #dc2626;
         }
         
         .status-cancelled {
             background: #fecaca;
             color: #dc2626;
         }
         
         /* 일괄 처리 버튼 호버 효과 */
         .batch-btn.btn-approve:hover {
             background: #059669 !important;
         }
         
         .batch-btn.btn-reject:hover {
             background: #dc2626 !important;
         }
         
         /* 모달 푸터 버튼 */
         .btn-secondary {
             background: #6b7280;
             color: white;
             border: none;
             border-radius: 6px;
             padding: 10px 20px;
             font-size: 14px;
             cursor: pointer;
             transition: background-color 0.2s;
         }
         
         .btn-secondary:hover {
             background: #4b5563;
         }
         
         .btn-edit {
             background: #3b82f6;
             color: white;
             border: none;
             border-radius: 6px;
             padding: 10px 20px;
             font-size: 14px;
             cursor: pointer;
             transition: background-color 0.2s;
         }
         
         .btn-edit:hover {
             background: #2563eb;
         }
         
         .btn-confirm {
             background: #10b981;
             color: white;
             border: none;
             border-radius: 6px;
             padding: 10px 20px;
             font-size: 14px;
             cursor: pointer;
             transition: background-color 0.2s;
         }
         
         .btn-confirm:hover {
             background: #059669;
         }

        /* 반응형 */
        @media (max-width: 768px) {
            body {
                padding: 20px;
            }
            
            .page-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .info-sections-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .info-grid-2col {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .file-info-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .download-buttons {
                flex-direction: column;
                width: 100%;
                gap: 8px;
            }
            
            .download-btn {
                width: 100%;
                justify-content: center;
            }
            
            .tab-nav {
                flex-direction: column;
            }
            
            .tab-button {
                padding: 12px 15px;
                font-size: 14px;
                text-align: left;
            }
            
            .work-info-grid {
                grid-template-columns: 1fr;
            }
            
            .assignment-section {
                flex-direction: column;
                align-items: stretch;
            }
            
            .worker-select {
                min-width: auto;
                width: 100%;
            }
            
            .modal-container {
                width: 95%;
                margin: 20px;
                max-height: calc(100vh - 40px);
            }
            
            .form-row {
                flex-direction: column;
                gap: 15px;
            }
            
            .simple-editor-toolbar {
                flex-wrap: wrap;
            }
            
            .detail-modal {
                width: 98%;
                margin: 10px;
                height: 90vh;
                max-height: 90vh;
            }
            
            .tab-btn {
                padding: 12px 15px;
                font-size: 13px;
            }
            
            .detail-section {
                margin: 15px;
                padding: 20px;
            }
            
            .section-header {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }
            
            .applicant-stats {
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .applicants-table {
                min-width: 100%;
                font-size: 10px;
            }
            
            .applicants-table th,
            .applicants-table td {
                padding: 4px 2px;
                font-size: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- 페이지 헤더 -->
    <div class="page-header">
        <h1 class="page-title">
            <span>📄</span>
            작업 상세정보
        </h1>
        <button class="back-button" onclick="goBack()">
            <span>←</span>
            목록으로 돌아가기
        </button>
    </div>
    
    <!-- 탭 네비게이션 -->
    <div class="tab-container">
        <div class="tab-nav">
            <button class="tab-button active" onclick="switchTab('detail')">📋 작업 상세정보</button>
            <button class="tab-button" onclick="switchTab('management')">⚙️ 작업관리</button>
        </div>

        <!-- 작업 상세정보 탭 -->
        <div id="detail-tab" class="tab-content active">
            <!-- 첫 번째 행: 요청 정보 + 작업 정보 -->
            <div class="info-sections-grid">
                <!-- 요청 정보 -->
                <div class="info-section">
                    <h2 class="section-title">
                        <span>📋</span>
                        요청 정보
                    </h2>
                    <div class="info-grid">
                        <span class="info-label">공증신청</span>
                        <span class="info-value">신청</span>
                        
                        <span class="info-label">녹음일시</span>
                        <span id="record-date" class="info-value">2025-06-16</span>
                        
                        <span class="info-label">녹음장소</span>
                        <span class="info-value">전남 나주시 그린로 198 10층</span>
                        
                        <span class="info-label">녹취원본</span>
                        <span class="info-value success">✓ 업로드 완료</span>
                        
                        <span class="info-label">녹취원본 추가 신청</span>
                        <span class="info-value">미신청</span>
                        
                        <span class="info-label">수령인</span>
                        <span id="recipient-name" class="info-value">황진은</span>
                        
                        <span class="info-label">수령인 연락처</span>
                        <span id="recipient-contact" class="info-value">010-4585-3518</span>
                        
                        <span class="info-label">수령인 주소</span>
                        <span class="info-value">전남 나주시 그린로 198 10층</span>
                    </div>
                </div>

                <!-- 작업 정보 -->
                <div class="info-section">
                    <h2 class="section-title">
                        <span>⚙️</span>
                        작업 정보
                    </h2>
                    <div class="info-grid">
                        <span class="info-label">구간선택</span>
                        <span class="info-value">전체 구간 (00:00 ~ 01:54)</span>
                        
                        <span class="info-label">화자설정</span>
                        <span class="info-value">2명 (화자1, 화자2)</span>
                    </div>
                </div>
            </div>

            <!-- 두 번째 행: 결제 정보 + 파일 정보 -->
            <div class="info-sections-grid">
                <!-- 결제 정보 -->
                <div class="info-section">
                    <h2 class="section-title">
                        <span>💳</span>
                        결제 정보
                    </h2>
                    <div class="info-grid">
                        <span class="info-label">의뢰자명</span>
                        <span id="client-name" class="info-value">황진은</span>
                        
                        <span class="info-label">전화번호</span>
                        <span id="client-contact" class="info-value">010-4585-3518</span>
                        
                        <span class="info-label">결제타입</span>
                        <span id="payment-method" class="info-value">신용카드</span>
                        
                        <span class="info-label">결제금액</span>
                        <span id="payment-amount" class="info-value highlight">40,000원</span>
                        
                        <span class="info-label">녹음일시</span>
                        <span class="info-value">2025-06-16</span>
                        
                        <span class="info-label">접수일시</span>
                        <span id="request-date" class="info-value">2025-07-30 17:39</span>
                    </div>
                </div>

                <!-- 파일 정보 -->
                <div class="info-section">
                    <h2 class="section-title">
                        <span>📁</span>
                        파일 정보
                    </h2>
                    <div class="info-grid">
                        <span class="info-label">진행 상태</span>
                        <div>
                            <span id="work-status" class="status-badge status-inprogress">초안완성</span>
                        </div>
                    </div>
                    
                    <!-- 음성 플레이어 및 다운로드 영역 -->
                    <div class="file-player-section">
                        <div class="file-info-header">
                            <div>
                                <div style="font-weight: 600; color: #374151; margin-bottom: 5px; font-size: 14px;">파일 정보</div>
                                <span id="file-name-display" class="file-name-info">음성원본 1개 선교월령01.m4a / 재생시간: 00:03:30</span>
                            </div>
                        </div>
                        
                        <!-- 오디오 플레이어 -->
                        <audio class="audio-player" controls>
                            <source id="audio-source" src="#" type="audio/mpeg">
                            <source id="audio-source-m4a" src="#" type="audio/mp4">
                            브라우저가 오디오를 지원하지 않습니다.
                        </audio>
                        
                        <!-- 다운로드 버튼들 -->
                        <div class="download-buttons" style="margin-top: 15px; justify-content: flex-end;">
                            <button class="download-btn" onclick="downloadTXT()">
                                <span>📄</span>
                                TXT 파일 다운로드
                            </button>
                            <button class="download-btn json" onclick="downloadJSON()">
                                <span>📋</span>
                                JSON 파일 다운로드
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 작업관리 탭 -->
        <div id="management-tab" class="tab-content">
            <!-- 기본 파일 정보 -->
            <div class="work-management-section">
                <h2 class="section-title">
                    <span>📁</span>
                    파일 정보
                </h2>
                <div class="work-info-grid">
                    <div class="info-grid">
                        <span class="info-label">파일이름</span>
                        <span id="mgmt-file-name" class="info-value">제목없는1.2 북터키스 아이키.m4a</span>
                        
                        <span class="info-label">재생시간</span>
                        <span id="mgmt-work-time" class="info-value">00:01:54</span>
                    </div>
                    <div class="info-grid">
                        <span class="info-label">현재 작업자</span>
                        <span id="mgmt-worker" class="info-value">김작업(초안 완성)</span>
                        
                        <span class="info-label">작업자 상태</span>
                        <div>
                            <span id="mgmt-work-status" class="status-badge status-inprogress">초안완성</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 웍스파이 프로젝트 등록 -->
            <div class="work-management-section">
                <h2 class="section-title">
                    <span>🚀</span>
                    웍스파이 프로젝트 등록
                </h2>
                
                <!-- 초기 상태: 버튼만 표시 -->
                <div id="workspy-empty-state" style="display: block; text-align: center; padding: 40px 20px; background: #f9fafb; border-radius: 8px; border: 2px dashed #d1d5db;">
                    <div style="color: #6b7280; margin-bottom: 15px; font-size: 32px;">📋</div>
                    <p style="color: #374151; font-size: 16px; font-weight: 500; margin-bottom: 10px;">등록된 프로젝트가 없습니다</p>
                    <p style="color: #6b7280; font-size: 14px; margin-bottom: 20px;">웍스파이에 새 프로젝트를 등록하여 작업자를 모집해보세요</p>
                    <button class="btn btn-primary" onclick="openWorksbyProjectModal()">
                        <span>➕</span>
                        새 프로젝트 등록
                    </button>
                </div>
                
                <!-- 프로젝트 생성 후 상태: 테이블 표시 -->
                <div id="workspy-project-table" style="display: none;">
                    <div style="margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #374151; font-weight: 600; font-size: 14px;" class="project-count">
                            총 <span style="color: #3b82f6;" class="total-count">0</span>개의 웍스파이 프로젝트
                        </div>
                        <button class="btn btn-primary" onclick="openWorksbyProjectModal()" style="padding: 8px 16px; font-size: 13px;">
                            <span>➕</span>
                            새 프로젝트 등록
                        </button>
                    </div>
                    <div style="overflow-x: auto;">
                        <table id="workspy-table" style="width: 100%; min-width: 800px; border-collapse: collapse;">
                            <thead>
                                <tr style="background: #f8f9fa;">
                                    <th style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151;">NO</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151;">썸네일</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151;">프로젝트명</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151;">진행상태</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151;">서비스</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151;">작업자</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151;">시작일</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151;">마감일</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151;">프로젝트상태</th>
                                </tr>
                            </thead>
                            <tbody id="worksby-table-body">
                                <!-- 동적으로 생성될 프로젝트 데이터 -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- 작업자 할당 -->
            <div class="work-management-section">
                <h2 class="section-title">
                    <span>👥</span>
                    작업자 할당
                </h2>
                <div class="assignment-section">
                    <label style="font-weight: 500; color: #374151;">작업자 선택:</label>
                    <select id="worker-select" class="worker-select">
                        <option value="">작업자를 선택하세요</option>
                        <option value="worker1">김작업 (초급)</option>
                        <option value="worker2">이전사 (중급)</option>
                        <option value="worker3">박고수 (고급)</option>
                        <option value="worker4">최베테랑 (특급)</option>
                    </select>
                    <button class="btn btn-primary" onclick="assignWorker()">
                        <span>✓</span>
                        작업 할당
                    </button>
                </div>
            </div>

            <!-- 작업자 첨부파일 -->
            <div class="work-management-section">
                <h2 class="section-title">
                    <span>📎</span>
                    작업자 첨부파일
                </h2>
                <div class="upload-area" onclick="document.getElementById('file-upload').click()">
                    <input type="file" id="file-upload" style="display: none;" multiple accept=".txt,.docx,.pdf">
                    <div style="color: #6b7280; margin-bottom: 10px;">📁</div>
                    <p style="color: #374151; font-weight: 500; margin-bottom: 5px;">파일을 클릭하여 업로드</p>
                    <p style="color: #6b7280; font-size: 12px;">또는 파일을 드래그하여 업로드하세요</p>
                    <button class="upload-btn" style="margin-top: 10px;">
                        📤 파일 선택
                    </button>
                </div>
                <div id="uploaded-files" style="margin-top: 15px; display: none;">
                    <p style="font-weight: 500; color: #374151; margin-bottom: 10px;">업로드된 파일:</p>
                    <ul id="file-list" style="list-style: none; padding: 0;"></ul>
                </div>
            </div>

            <!-- 산출물 -->
            <div class="work-management-section">
                <h2 class="section-title">
                    <span>🛠️</span>
                    산출물
                </h2>
                <div style="text-align: center; padding: 20px;">
                    <button class="tool-btn" onclick="launchTranscriptionTool()">
                        <span>🚀</span>
                        전사툴 실행
                    </button>
                    <p style="color: #6b7280; font-size: 14px; margin-top: 10px;">
                        작업자가 전사 작업을 수행할 수 있는 전용 툴을 실행합니다.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // URL 파라미터에서 데이터 추출
        function getUrlParams() {
            const urlParams = new URLSearchParams(window.location.search);
            return {
                orderNumber: urlParams.get('orderNumber'),
                fileName: urlParams.get('fileName'),
                client: urlParams.get('client'),
                contact: urlParams.get('contact'),
                requestDate: urlParams.get('requestDate'),
                workTime: urlParams.get('workTime'),
                paymentAmount: urlParams.get('paymentAmount'),
                paymentMethod: urlParams.get('paymentMethod'),
                worker: urlParams.get('worker'),
                status: urlParams.get('status')
            };
        }

        // 페이지 로드 시 데이터 설정
        document.addEventListener('DOMContentLoaded', function() {
            const params = getUrlParams();
            
            // 요청 정보 섹션
            if (params.requestDate) {
                const requestDateTime = decodeURIComponent(params.requestDate);
                const recordDate = requestDateTime.split(' ')[0]; // 날짜 부분만 추출
                document.getElementById('record-date').textContent = recordDate;
            }
            if (params.client) {
                document.getElementById('recipient-name').textContent = decodeURIComponent(params.client);
            }
            if (params.contact) {
                document.getElementById('recipient-contact').textContent = decodeURIComponent(params.contact);
            }
            
            // 결제 정보 섹션
            if (params.client) {
                document.getElementById('client-name').textContent = decodeURIComponent(params.client);
            }
            if (params.contact) {
                document.getElementById('client-contact').textContent = decodeURIComponent(params.contact);
            }
            if (params.paymentMethod) {
                document.getElementById('payment-method').textContent = decodeURIComponent(params.paymentMethod);
            }
            if (params.paymentAmount) {
                const paymentAmount = decodeURIComponent(params.paymentAmount);
                document.getElementById('payment-amount').textContent = paymentAmount + '원';
            }
            if (params.requestDate) {
                document.getElementById('request-date').textContent = decodeURIComponent(params.requestDate);
            }
            
            // 파일 정보 섹션 (작업 상세정보 탭)
            if (params.fileName) {
                const fileName = decodeURIComponent(params.fileName);
                const workTime = params.workTime ? decodeURIComponent(params.workTime) : '00:03:30';
                document.getElementById('file-name-display').textContent = `음성원본 1개 ${fileName} / 재생시간: ${workTime}`;
                
                // 작업관리 탭에도 동일한 정보 설정
                document.getElementById('mgmt-file-name').textContent = fileName;
                document.getElementById('mgmt-work-time').textContent = workTime;
            }
            if (params.status) {
                const statusElement = document.getElementById('work-status');
                const statusText = decodeURIComponent(params.status);
                statusElement.textContent = statusText;
                // 상태에 따라 클래스 설정
                statusElement.className = 'status-badge ' + getStatusClass(statusText);
                
                // 작업관리 탭에도 동일한 상태 설정
                const mgmtStatusElement = document.getElementById('mgmt-work-status');
                mgmtStatusElement.textContent = statusText;
                mgmtStatusElement.className = 'status-badge ' + getStatusClass(statusText);
            }
            if (params.worker) {
                const workerName = decodeURIComponent(params.worker);
                document.getElementById('mgmt-worker').textContent = workerName;
            }
        });

        // 상태에 따른 CSS 클래스 반환
        function getStatusClass(status) {
            if (status.includes('미배정')) return 'status-cancelled';
            if (status.includes('진행') || status.includes('초안')) return 'status-inprogress';
            if (status.includes('완료')) return 'status-completed';
            if (status.includes('취소')) return 'status-cancelled';
            return 'status-inprogress';
        }

        // 뒤로 가기
        function goBack() {
            try {
                // 방법 1: iframe의 parent에서 이전 페이지 로드
                if (window.parent && window.parent !== window && typeof window.parent.loadPage === 'function') {
                    console.log('parent.loadPage로 이전 페이지 이동');
                    window.parent.loadPage('pages/soribaro/b2c/work-management.html');
                    return;
                }
            } catch (e) {
                console.log('parent.loadPage 실패:', e);
            }
            
            try {
                // 방법 2: 브라우저 히스토리 back
                if (window.history.length > 1) {
                    console.log('history.back() 사용');
                    window.history.back();
                    return;
                }
            } catch (e) {
                console.log('history.back() 실패:', e);
            }
            
            try {
                // 방법 3: 직접 작업현황관리 페이지로 이동
                console.log('직접 페이지 이동');
                window.location.href = 'work-management.html';
            } catch (e) {
                console.log('직접 페이지 이동 실패:', e);
                alert('이전 페이지로 돌아갈 수 없습니다.');
            }
        }

        // 다운로드 기능
        function downloadTXT() {
            // 실제 프로젝트에서는 서버에서 TXT 파일을 다운로드받는 API 호출
            const params = getUrlParams();
            const fileName = params.fileName ? decodeURIComponent(params.fileName).replace(/\.[^/.]+$/, "") : "transcript";
            
            // 샘플 텍스트 데이터 (실제로는 서버에서 받아옴)
            const sampleText = `[화자1] 안녕하세요. 오늘 회의를 시작하겠습니다.\n[화자2] 네, 안녕하세요. 준비되었습니다.\n[화자1] 먼저 첫 번째 안건부터 논의해보겠습니다.\n[화자2] 좋습니다. 검토해보겠습니다.`;
            
            // 파일 다운로드
            const blob = new Blob([sampleText], { type: 'text/plain;charset=utf-8' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${fileName}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        function downloadJSON() {
            // 실제 프로젝트에서는 서버에서 JSON 파일을 다운로드받는 API 호출
            const params = getUrlParams();
            const fileName = params.fileName ? decodeURIComponent(params.fileName).replace(/\.[^/.]+$/, "") : "transcript";
            
            // 샘플 JSON 데이터 (실제로는 서버에서 받아옴)
            const sampleData = {
                file_info: {
                    name: fileName,
                    duration: params.workTime ? decodeURIComponent(params.workTime) : "00:03:30",
                    format: "M4A"
                },
                speakers: [
                    { id: 1, name: "화자1" },
                    { id: 2, name: "화자2" }
                ],
                transcript: [
                    { speaker: 1, start_time: "00:00:00", end_time: "00:00:05", text: "안녕하세요. 오늘 회의를 시작하겠습니다." },
                    { speaker: 2, start_time: "00:00:06", end_time: "00:00:10", text: "네, 안녕하세요. 준비되었습니다." },
                    { speaker: 1, start_time: "00:00:11", end_time: "00:00:18", text: "먼저 첫 번째 안건부터 논의해보겠습니다." },
                    { speaker: 2, start_time: "00:00:19", end_time: "00:00:23", text: "좋습니다. 검토해보겠습니다." }
                ]
            };
            
            // 파일 다운로드
            const blob = new Blob([JSON.stringify(sampleData, null, 2)], { type: 'application/json;charset=utf-8' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${fileName}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        // 탭 전환 기능
        function switchTab(tabName) {
            // 모든 탭 버튼과 콘텐츠 비활성화
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // 선택된 탭 활성화
            document.querySelector(`button[onclick="switchTab('${tabName}')"]`).classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        // 작업자 할당 기능
        function assignWorker() {
            const selectedWorker = document.getElementById('worker-select').value;
            if (!selectedWorker) {
                alert('작업자를 선택해주세요.');
                return;
            }
            
            const workerOptions = {
                'worker1': '김작업 (초급)',
                'worker2': '이전사 (중급)',
                'worker3': '박고수 (고급)',
                'worker4': '최베테랑 (특급)'
            };
            
            const workerName = workerOptions[selectedWorker];
            document.getElementById('mgmt-worker').textContent = workerName + ' (할당됨)';
            
            alert(`${workerName}에게 작업을 할당했습니다.`);
        }

        // 전사툴 실행 기능
        function launchTranscriptionTool() {
            alert('전사툴을 실행합니다.\n\n실제 환경에서는 전사 작업 도구가 새 창에서 열립니다.');
            // 실제로는 전사툴 URL로 새 창 열기
            // window.open('/transcription-tool', '_blank');
        }

        // 웍스파이 프로젝트 등록 관련 변수
        let worksbyProjectData = null;

        // 웍스파이 프로젝트 등록 모달 열기
        function openWorksbyProjectModal() {
            document.getElementById('worksbyProjectModal').style.display = 'flex';
            
            // 시연용 더미 데이터 입력
            const params = getUrlParams();
            const fileName = params.fileName ? decodeURIComponent(params.fileName).replace(/\.[^/.]+$/, "") : "음성파일";
            
            // 오늘 날짜와 2주 후 날짜 계산
            const today = new Date();
            const twoWeeksLater = new Date();
            twoWeeksLater.setDate(today.getDate() + 14);
            
            const formatDate = (date) => {
                return date.toISOString().split('T')[0];
            };
            
            // 폼 필드에 더미 데이터 입력
            document.getElementById('worksbyServiceSelect').value = '웍스파이';
            document.getElementById('worksbyProjectTitle').value = fileName + ' 전사 프로젝트';
            document.getElementById('worksbyProjectStartDate').value = formatDate(today);
            document.getElementById('worksbyProjectEndDate').value = formatDate(twoWeeksLater);
            document.getElementById('worksbyWorkerCount').value = '5';
            document.getElementById('worksbyProjectTypeSelect').value = '일반';
            document.getElementById('worksbyBudgetAmount').value = '500000';
            document.getElementById('worksbyPrioritySelect').value = '보통';
            
            // 리치 텍스트 에디터에 더미 내용 입력
            const contentEditor = document.getElementById('worksbyContentEditor');
            if (contentEditor) {
                contentEditor.innerHTML = `
                    <h3>프로젝트 개요</h3>
                    <p>이 프로젝트는 <strong>${fileName}</strong> 파일의 전사 작업을 위한 웍스파이 프로젝트입니다.</p>
                    
                    <h3>작업 요구사항</h3>
                    <ul>
                        <li>정확한 음성 인식 및 전사</li>
                        <li>화자 구분 작업</li>
                        <li>맞춤법 및 띄어쓰기 교정</li>
                        <li>전문 용어 정리</li>
                    </ul>
                    
                    <h3>품질 기준</h3>
                    <p>전사 정확도 <strong>95% 이상</strong>을 목표로 하며, 납기일 내 완료를 위해 경험 있는 작업자를 우선 배정합니다.</p>
                    
                    <h3>추가 요청사항</h3>
                    <p>작업 중 불명확한 부분은 [불명] 태그로 표시하고, 완료 후 검토 과정을 거쳐 최종 납품하겠습니다.</p>
                `;
            }
            
            // 토글 스위치 설정
            document.getElementById('worksbyActiveToggle').checked = true;
            document.getElementById('worksbyImportantProject').checked = false;
            
            console.log('더미 데이터로 웍스파이 프로젝트 모달 초기화 완료');
        }

        // 웍스파이 프로젝트 등록 모달 닫기
        function closeWorksbyProjectModal() {
            document.getElementById('worksbyProjectModal').style.display = 'none';
            document.getElementById('worksbyProjectForm').reset();
            document.getElementById('worksbyContentEditor').innerHTML = '';
        }

        // 웍스파이 프로젝트 제출 처리
        function handleWorksbyProjectSubmit() {
            console.log('웍스파이 프로젝트 저장 시작!'); // 디버깅용
            
            // 필수 필드 검증
            const service = document.getElementById('worksbyServiceSelect').value;
            const title = document.getElementById('worksbyProjectTitle').value;
            const startDate = document.getElementById('worksbyProjectStartDate').value;
            const endDate = document.getElementById('worksbyProjectEndDate').value;
            
            if (!service) {
                alert('서비스를 선택해주세요.');
                return;
            }
            if (!title.trim()) {
                alert('프로젝트명을 입력해주세요.');
                return;
            }
            if (!startDate) {
                alert('시작일을 입력해주세요.');
                return;
            }
            if (!endDate) {
                alert('종료일을 입력해주세요.');
                return;
            }
            
            // 종료일이 시작일보다 이전인지 체크
            if (new Date(endDate) <= new Date(startDate)) {
                alert('종료일은 시작일보다 나중이어야 합니다.');
                return;
            }
            
            const formData = {
                service: service,
                title: title.trim(),
                startDate: startDate,
                endDate: endDate,
                workerCount: document.getElementById('worksbyWorkerCount').value || '0',
                projectType: document.getElementById('worksbyProjectTypeSelect').value,
                budget: document.getElementById('worksbyBudgetAmount').value,
                priority: document.getElementById('worksbyPrioritySelect').value,
                description: document.getElementById('worksbyContentEditor').innerHTML || '프로젝트 설명이 추가되지 않았습니다.',
                isActive: document.getElementById('worksbyActiveToggle').checked,
                isImportant: document.getElementById('worksbyImportantProject').checked
            };
            
            console.log('수집된 폼 데이터:', formData); // 디버깅용
            saveWorksbyProject(formData);
        }

        // 웍스파이 프로젝트 저장
        function saveWorksbyProject(formData) {
            console.log('saveWorksbyProject 함수 호출됨!', formData); // 디버깅용
            
            // 프로젝트 번호 생성
            const projectNo = 'PJ' + new Date().toISOString().slice(0, 10).replace(/-/g, '') + Math.floor(Math.random() * 1000).toString().padStart(3, '0');
            console.log('생성된 프로젝트 번호:', projectNo); // 디버깅용
            
            // 썸네일 텍스트 생성
            const thumbnailText = formData.service === '웍스파이' ? 'WORKSPY' : 
                                formData.service === '소리바로' ? 'SORIBARO' :
                                formData.service === '팀벨' ? 'TEAMBELL' :
                                formData.service === '엔튜브' ? 'NTUBE' :
                                formData.service === '더 데이터' ? 'DATA' :
                                formData.service === '텍스타' ? 'TEXTA' : 'PROJECT';

            // 프로젝트 데이터 생성
            worksbyProjectData = {
                projectNo: projectNo,
                title: formData.title,
                service: formData.service,
                startDate: formData.startDate,
                endDate: formData.endDate,
                workerCount: formData.workerCount || '0',
                projectType: formData.projectType,
                budget: formData.budget,
                priority: formData.priority,
                description: formData.description,
                isActive: formData.isActive,
                isImportant: formData.isImportant,
                thumbnailText: thumbnailText,
                regDate: new Date().toISOString().slice(0, 16).replace('T', ' ')
            };

            // 테이블에 프로젝트 추가
            console.log('테이블에 프로젝트 추가 중...'); // 디버깅용
            addWorksbyProjectToTable(worksbyProjectData);
            
            // 빈 상태 숨기고 테이블 표시
            console.log('UI 상태 변경 중...'); // 디버깅용
            const emptyState = document.getElementById('workspy-empty-state');
            const projectTable = document.getElementById('workspy-project-table');
            
            if (emptyState && projectTable) {
                emptyState.style.display = 'none';
                projectTable.style.display = 'block';
                console.log('UI 상태 변경 완료!'); // 디버깅용
            } else {
                console.error('UI 요소를 찾을 수 없습니다:', { emptyState, projectTable }); // 디버깅용
            }
            
            // 모달 닫기
            console.log('모달 닫기 중...'); // 디버깅용
            closeWorksbyProjectModal();
            
            alert('웍스파이 프로젝트가 등록되었습니다!\n\n프로젝트가 웍스파이에 등록되어 작업자 모집이 시작됩니다.');
        }

        // 테이블에 프로젝트 행 추가
        function addWorksbyProjectToTable(data) {
            console.log('addWorksbyProjectToTable 함수 호출됨!', data); // 디버깅용
            const tbody = document.getElementById('worksby-table-body');
            
            if (!tbody) {
                console.error('테이블 body를 찾을 수 없습니다!'); // 디버깅용
                return;
            }
            console.log('테이블 body 발견:', tbody); // 디버깅용
            
            // 현재 테이블 행 수를 확인하여 새 번호 계산
            const currentRows = tbody.querySelectorAll('tr').length;
            const newRowNumber = currentRows + 1;
            
            const thumbnailColor = getRandomThumbnailColor();
            
            const row = document.createElement('tr');
            row.style.cursor = 'pointer';
            row.style.transition = 'background-color 0.2s';
            row.onclick = () => openDetailModal(data);
            
            // 호버 효과 추가
            row.onmouseenter = function() { this.style.backgroundColor = '#f9fafb'; };
            row.onmouseleave = function() { this.style.backgroundColor = ''; };
            
            // 작업자 현황
            const workerStatus = `0 / ${data.workerCount || '0'}`;
            
            // 진행상태
            const progressStatus = '기획';
            const progressClass = 'color: #6b7280; font-weight: 500;';
            
            // 프로젝트 상태
            const projectStatus = data.isActive ? '활성' : '중단';
            const projectStatusClass = data.isActive ? 'background: #10b981; color: white; padding: 3px 8px; border-radius: 12px; font-size: 10px; font-weight: 600;' : 'background: #ef4444; color: white; padding: 3px 8px; border-radius: 12px; font-size: 10px; font-weight: 600;';
            
            row.innerHTML = `
                <td style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600;">${newRowNumber}</td>
                <td style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;">
                    <div style="width: 40px; height: 40px; background: ${thumbnailColor}; color: white; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin: 0 auto; font-size: 10px; font-weight: 600;">
                        ${data.thumbnailText}
                    </div>
                </td>
                <td style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 500;">${data.title}</td>
                <td style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;">
                    <span style="${progressClass}">${progressStatus}</span>
                </td>
                <td style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;">${data.service}</td>
                <td style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;">${workerStatus}</td>
                <td style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;">${data.startDate}</td>
                <td style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;">${data.endDate}</td>
                <td style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;">
                    <span style="${projectStatusClass}">${projectStatus}</span>
                </td>
            `;
            
            // 호버 효과 추가
            row.addEventListener('mouseenter', function() {
                this.style.backgroundColor = '#f9fafb';
            });
            row.addEventListener('mouseleave', function() {
                this.style.backgroundColor = '';
            });
            
            tbody.appendChild(row);
            console.log('테이블에 행 추가 완료!', row); // 디버깅용
            
            // 프로젝트 카운트 업데이트
            updateWorksbyProjectCount();
        }

        // 웍스파이 프로젝트 카운트 업데이트
        function updateWorksbyProjectCount() {
            const tbody = document.getElementById('worksby-table-body');
            const countElement = document.querySelector('#workspy-project-table .total-count');
            
            if (tbody && countElement) {
                const totalCount = tbody.querySelectorAll('tr').length;
                countElement.textContent = totalCount;
                console.log(`프로젝트 카운트 업데이트: ${totalCount}개`); // 디버깅용
            }
        }

        // 랜덤 썸네일 색상 생성
        function getRandomThumbnailColor() {
            const colors = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#06b6d4', '#84cc16', '#f97316'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        // 파일 업로드 기능
        document.addEventListener('DOMContentLoaded', function() {
            const fileUpload = document.getElementById('file-upload');
            const uploadedFiles = document.getElementById('uploaded-files');
            const fileList = document.getElementById('file-list');
            
            fileUpload.addEventListener('change', function(e) {
                const files = Array.from(e.target.files);
                if (files.length > 0) {
                    uploadedFiles.style.display = 'block';
                    fileList.innerHTML = '';
                    
                    files.forEach(file => {
                        const li = document.createElement('li');
                        li.style.cssText = 'padding: 8px; background: #f3f4f6; margin-bottom: 5px; border-radius: 4px; display: flex; justify-content: space-between; align-items: center;';
                        li.innerHTML = `
                            <span>📄 ${file.name} (${(file.size / 1024).toFixed(1)} KB)</span>
                            <button onclick="removeFile(this)" style="background: #ef4444; color: white; border: none; padding: 4px 8px; border-radius: 4px; font-size: 12px; cursor: pointer;">삭제</button>
                        `;
                        fileList.appendChild(li);
                    });
                }
            });
            
            // 드래그 앤 드롭 기능
            const uploadArea = document.querySelector('.upload-area');
            
            uploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.style.borderColor = '#3b82f6';
                this.style.background = 'rgba(59, 130, 246, 0.1)';
            });
            
            uploadArea.addEventListener('dragleave', function(e) {
                e.preventDefault();
                this.style.borderColor = '#d1d5db';
                this.style.background = '#f9fafb';
            });
            
            uploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                this.style.borderColor = '#d1d5db';
                this.style.background = '#f9fafb';
                
                const files = Array.from(e.dataTransfer.files);
                if (files.length > 0) {
                    // 파일 입력 요소에 파일 설정 (가상으로)
                    const dt = new DataTransfer();
                    files.forEach(file => dt.items.add(file));
                    fileUpload.files = dt.files;
                    
                    // change 이벤트 발생시키기
                    fileUpload.dispatchEvent(new Event('change'));
                }
            });
            
            // DOMContentLoaded에서는 웍스파이 폼 이벤트를 등록하지 않음 (모달 열릴 때 등록)
            
            // 웍스파이 작업자 체크박스 이벤트
            const worksbyWorkerCheckboxes = document.querySelectorAll('input[name="worksbyWorkerSelect"]');
            worksbyWorkerCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updateWorksbySelectedWorkerCount);
            });
        });

        // 웍스파이 상세보기 모달 열기
        function openWorksbyDetailModal(data) {
            console.log('=== 웍스파이 상세보기 모달 열기 시작 ==='); 
            console.log('전달받은 데이터:', data); // 디버깅용
            
            const modal = document.getElementById('worksbyDetailModal');
            if (!modal) {
                console.error('worksbyDetailModal을 찾을 수 없습니다!'); // 디버깅용
                return;
            }
            
            modal.style.display = 'flex';
            console.log('모달 표시됨'); // 디버깅용
            
            // 데이터 설정
            const elements = {
                'worksbyDetailNo': data.projectNo,
                'worksbyDetailService': data.service,
                'worksbyDetailRegDate': data.regDate,
                'worksbyDetailTitle': data.title,
                'worksbyDetailWorkerCount': `0 / ${data.workerCount || '0'}명`,
                'worksbyDetailProjectType': data.projectType || '속기',
                'worksbyDetailBudget': data.budget || '미정'
            };
            
            // 각 요소에 데이터 설정
            Object.entries(elements).forEach(([id, value]) => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = value;
                    console.log(`✅ ${id} 설정됨:`, value); // 디버깅용
                    console.log(`   실제 표시된 값:`, element.textContent); // 확인용
                    console.log(`   요소 정보:`, element); // 요소 자체 확인
                } else {
                    console.error(`❌ ${id} 요소를 찾을 수 없습니다!`); // 디버깅용
                }
            });
            
            // 상태 설정 (색상 포함)
            const statusElement = document.getElementById('worksbyDetailStatus');
            if (statusElement) {
                statusElement.textContent = '기획';
                statusElement.style.color = '#6b7280';
                statusElement.style.fontWeight = '500';
                console.log('상태 설정됨: 기획'); // 디버깅용
            }
            
            // 날짜 범위 설정
            const startDateFormatted = data.startDate ? data.startDate.replace('T', ' ').slice(0, 16) : '-';
            const endDateFormatted = data.endDate ? data.endDate.replace('T', ' ').slice(0, 16) : '-';
            const periodElement = document.getElementById('worksbyDetailProjectPeriod');
            if (periodElement) {
                periodElement.textContent = `${startDateFormatted} ~ ${endDateFormatted}`;
                console.log('진행기간 설정됨:', `${startDateFormatted} ~ ${endDateFormatted}`); // 디버깅용
            }
            
            // 설명 설정
            const contentElement = document.getElementById('worksbyDetailContent');
            if (contentElement) {
                contentElement.innerHTML = data.description || '프로젝트 설명이 없습니다.';
                console.log('설명 설정됨:', data.description); // 디버깅용
            }
            
            // 기본적으로 프로젝트 정보 탭 활성화
            console.log('프로젝트 정보 탭 활성화 시도'); // 디버깅용
            showWorksbyTab('info');
            
            // 최종 상태 확인
            setTimeout(() => {
                console.log('=== 최종 상태 확인 ===');
                console.log('모달 표시 상태:', modal.style.display);
                console.log('프로젝트명:', document.getElementById('worksbyDetailTitle')?.textContent || '없음');
                console.log('프로젝트번호:', document.getElementById('worksbyDetailNo')?.textContent || '없음');
                console.log('서비스:', document.getElementById('worksbyDetailService')?.textContent || '없음');
                console.log('활성 탭:', document.querySelector('#worksby-tab-info.active') ? '프로젝트 정보' : '없음');
                console.log('=== 웍스파이 상세보기 모달 열기 완료 ===');
            }, 100);
            
            console.log('openWorksbyDetailModal 함수 실행 완료!'); // 디버깅용
        }

        // 웍스파이 상세보기 모달 닫기
        function closeWorksbyDetailModal() {
            document.getElementById('worksbyDetailModal').style.display = 'none';
        }

        // 웍스파이 상세보기 탭 전환
        function showWorksbyTab(tabName, clickedButton = null) {
            console.log('showWorksbyTab 호출됨:', tabName); // 디버깅용
            
            // 모든 탭 패널 숨기기
            const infoTab = document.getElementById('worksby-tab-info');
            const workersTab = document.getElementById('worksby-tab-workers');
            
            if (infoTab) infoTab.classList.remove('active');
            if (workersTab) workersTab.classList.remove('active');
            
            // 선택된 탭 보이기
            const targetTab = document.getElementById('worksby-tab-' + tabName);
            if (targetTab) {
                targetTab.classList.add('active');
                console.log('✅ 탭 활성화됨:', tabName); // 디버깅용
                console.log('   탭 요소:', targetTab);
                console.log('   탭 클래스:', targetTab.className);
                console.log('   탭 스타일:', targetTab.style.display);
            } else {
                console.error('❌ 탭을 찾을 수 없습니다:', 'worksby-tab-' + tabName); // 디버깅용
                // 모든 탭 요소 확인
                console.log('사용 가능한 탭들:');
                document.querySelectorAll('[id^="worksby-tab-"]').forEach(tab => {
                    console.log('  -', tab.id, tab);
                });
            }
            
            // 탭 버튼 스타일 변경
            const tabButtons = document.querySelectorAll('#worksbyDetailModal .tab-btn');
            tabButtons.forEach(btn => {
                btn.classList.remove('active');
                btn.style.background = '#f8fafc';
                btn.style.color = '#6b7280';
                btn.style.borderBottom = '3px solid transparent';
            });
            
            // 활성 탭 버튼 찾기 및 스타일 적용
            let activeButton = clickedButton;
            if (!activeButton) {
                // 클릭된 버튼이 없으면 탭명으로 찾기
                tabButtons.forEach(btn => {
                    const onclick = btn.getAttribute('onclick');
                    if (onclick && onclick.includes(`'${tabName}'`)) {
                        activeButton = btn;
                    }  
                });
            }
            
            if (activeButton) {
                activeButton.classList.add('active');
                activeButton.style.background = 'white';
                activeButton.style.color = '#3b82f6';
                activeButton.style.borderBottom = '3px solid #3b82f6';
            }
            
            // 탭에 따라 하단 버튼 변경
            const actionBtn = document.getElementById('worksbyModalActionBtn');
            if (actionBtn) {
                if (tabName === 'info') {
                    actionBtn.textContent = '수정';
                    actionBtn.onclick = editWorksbyProject;
                    actionBtn.className = 'btn-edit';
                    actionBtn.style.background = '';
                    actionBtn.onmouseover = null;
                    actionBtn.onmouseout = null;
                } else if (tabName === 'workers') {
                    actionBtn.textContent = '확정';
                    actionBtn.onclick = confirmWorksbyWorkers;
                    actionBtn.className = 'btn-edit';
                    actionBtn.style.background = '#f59e0b';
                    actionBtn.onmouseover = () => actionBtn.style.background = '#d97706';
                    actionBtn.onmouseout = () => actionBtn.style.background = '#f59e0b';
                }
            }
        }

        // 웍스파이 프로젝트 수정
        function editWorksbyProject() {
            alert('프로젝트 수정 기능입니다.\n\n실제 환경에서는 프로젝트 정보를 수정할 수 있습니다.');
        }

        // 웍스파이 작업자 확정
        function confirmWorksbyWorkers() {
            alert('작업자 확정 처리가 완료되었습니다.\n\n선택된 작업자들에게 알림이 발송됩니다.');
        }

        // 웍스파이 작업자 체크박스 관리
        function toggleAllWorksbyWorkers(selectAllCheckbox) {
            const checkboxes = document.querySelectorAll('input[name="worksbyWorkerSelect"]');
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAllCheckbox.checked;
            });
            updateWorksbySelectedWorkerCount();
        }

        // 웍스파이 선택된 작업자 수 업데이트
        function updateWorksbySelectedWorkerCount() {
            const checkedBoxes = document.querySelectorAll('input[name="worksbyWorkerSelect"]:checked');
            const countElement = document.getElementById('worksbySelectedWorkerCount');
            if (countElement) {
                countElement.textContent = checkedBoxes.length + '명';
            }
        }

        // 웍스파이 작업자 상태 일괄 업데이트
        function batchUpdateWorksbyWorkerStatus(status) {
            const checkedBoxes = document.querySelectorAll('input[name="worksbyWorkerSelect"]:checked');
            if (checkedBoxes.length === 0) {
                alert('선택된 작업자가 없습니다.');
                return;
            }
            
            const statusText = status === 'assigned' ? '배정' : '미배정';
            const confirmMessage = `선택된 ${checkedBoxes.length}명의 작업자를 ${statusText}하시겠습니까?`;
            
            if (confirm(confirmMessage)) {
                checkedBoxes.forEach(checkbox => {
                    const row = checkbox.closest('tr');
                    const statusCell = row.querySelector('td:nth-child(10)');
                    const statusSpan = statusCell.querySelector('.applicant-status');
                   
                   if (status === 'assigned') {
                       statusSpan.textContent = '배정';
                       statusSpan.className = 'applicant-status status-approved';
                       // 배정일 업데이트
                       const assignmentDateCell = row.querySelector('td:nth-child(9)');
                       assignmentDateCell.textContent = new Date().toISOString().slice(0, 10).replace(/-/g, '.');
                   } else if (status === 'unassigned') {
                       statusSpan.textContent = '미배정';
                       statusSpan.className = 'applicant-status status-cancelled';
                   }
                   
                   // 체크박스 해제
                   checkbox.checked = false;
                });
                
                // 전체 선택 체크박스도 해제
                const selectAllCheckbox = document.getElementById('worksbySelectAllWorkers');
                if (selectAllCheckbox) {
                    selectAllCheckbox.checked = false;
                }
                
                updateWorksbySelectedWorkerCount();
                
                // 테이블 정렬 (배정 상단, 미배정 하단)
                sortWorksbyWorkerTable();
                
                alert(`${checkedBoxes.length}명의 작업자가 ${statusText}되었습니다.`);
                
                // 통계 업데이트
                updateWorksbyWorkerStats();
            }
        }
        
        // 웍스파이 작업자 테이블 정렬 (배정 상단, 미배정 하단)
        function sortWorksbyWorkerTable() {
            const table = document.querySelector('#worksby-tab-workers .applicants-table tbody');
            if (!table) return;
            
            const rows = Array.from(table.querySelectorAll('tr'));
            
            // 상태에 따라 정렬 (배정=0, 미배정=1)
            rows.sort((a, b) => {
                const statusA = a.querySelector('.applicant-status').textContent.trim();
                const statusB = b.querySelector('.applicant-status').textContent.trim();
                
                const priorityA = statusA === '배정' ? 0 : 1;
                const priorityB = statusB === '배정' ? 0 : 1;
                
                return priorityA - priorityB;
            });
            
            // 테이블에 정렬된 행들 다시 삽입
            rows.forEach(row => table.appendChild(row));
        }

        // 웍스파이 작업자 통계 업데이트
        function updateWorksbyWorkerStats() {
            const allWorkers = document.querySelectorAll('#worksbyWorkersList tr');
            let assigned = 0, unassigned = 0;
            
            allWorkers.forEach(row => {
                const statusSpan = row.querySelector('.applicant-status');
                if (statusSpan) {
                    const status = statusSpan.textContent;
                    if (status === '배정') assigned++;
                    else if (status === '미배정') unassigned++;
                }
            });
            
            document.getElementById('worksbyTotalWorkers').textContent = allWorkers.length;
            document.getElementById('worksbyAssignedCount').textContent = assigned;
            document.getElementById('worksbyExcludedCount').textContent = unassigned;
        }

        // 파일 업로드 관련 함수들
        function handleWorksbyThumbnailUpload(input) {
            if (input.files && input.files[0]) {
                const file = input.files[0];
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('worksbyThumbnailImage').src = e.target.result;
                        document.querySelector('#worksbyThumbnailUpload .file-upload-content').style.display = 'none';
                        document.getElementById('worksbyThumbnailPreview').style.display = 'flex';
                    };
                    reader.readAsDataURL(file);
                } else {
                    alert('이미지 파일만 업로드 가능합니다.');
                    input.value = '';
                }
            }
        }

        function removeWorksbyThumbnail() {
            document.getElementById('worksbyThumbnailInput').value = '';
            document.getElementById('worksbyThumbnailImage').src = '';
            document.querySelector('#worksbyThumbnailUpload .file-upload-content').style.display = 'flex';
            document.getElementById('worksbyThumbnailPreview').style.display = 'none';
        }

        function handleWorksbyAttachmentUpload(input) {
            const files = Array.from(input.files);
            const fileList = document.getElementById('worksbyAttachmentList');
            
            files.forEach(file => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <div class="file-info">
                        <span class="file-icon">📄</span>
                        <div>
                            <div class="file-name">${file.name}</div>
                            <div class="file-size">${(file.size / 1024).toFixed(1)} KB</div>
                        </div>
                    </div>
                    <button class="file-remove" onclick="removeWorksbyAttachment(this)">×</button>
                `;
                fileList.appendChild(fileItem);
            });
            
            if (files.length > 0) {
                document.querySelector('#worksbyAttachmentUpload .file-upload-content').style.display = 'none';
            }
        }

        function removeWorksbyAttachment(button) {
            button.parentElement.remove();
            const fileList = document.getElementById('worksbyAttachmentList');
            if (fileList.children.length === 0) {
                document.querySelector('#worksbyAttachmentUpload .file-upload-content').style.display = 'flex';
                document.getElementById('worksbyAttachmentInput').value = '';
            }
        }

        // 텍스트 포맷팅 함수
        function formatText(command) {
            document.execCommand(command, false, null);
        }

        // 파일 삭제 기능
        function removeFile(button) {
            button.parentElement.remove();
            
            // 파일 목록이 비어있으면 업로드 영역 숨기기
            const fileList = document.getElementById('file-list');
            if (fileList.children.length === 0) {
                document.getElementById('uploaded-files').style.display = 'none';
                document.getElementById('file-upload').value = '';
            }
        }
    </script>

    <script>
        // projects.html에서 가져온 JavaScript 함수들
        
        // 간단한 탭 전환 함수
        function showTab(tabName) {
            // 모든 탭 패널 숨기기
            document.getElementById('tab-info').classList.remove('active');
            document.getElementById('tab-workers').classList.remove('active');
            
            // 선택된 탭 보이기
            document.getElementById('tab-' + tabName).classList.add('active');
            
            // 탭 버튼 스타일 변경
            const tabButtons = document.querySelectorAll('.tab-btn');
            tabButtons.forEach(btn => {
                btn.classList.remove('active');
                btn.style.background = '#f8fafc';
                btn.style.color = '#6b7280';
                btn.style.borderBottom = '3px solid transparent';
            });
            
            // 클릭된 탭 버튼 활성화
            event.target.classList.add('active');
            event.target.style.background = 'white';
            event.target.style.color = '#3b82f6';
            event.target.style.borderBottom = '3px solid #3b82f6';
            
            // 탭에 따라 하단 버튼 변경
            const actionBtn = document.getElementById('modalActionBtn');
            if (tabName === 'info') {
                actionBtn.textContent = '수정';
                actionBtn.onclick = editProject;
                actionBtn.className = 'btn-edit';
            } else if (tabName === 'workers') {
                actionBtn.textContent = '확정';
                actionBtn.onclick = confirmWorkers;
                actionBtn.className = 'btn-confirm';
            }
        }
        
        // 모달 열기/닫기
        function openDetailModal(projectData) {
            console.log('=== openDetailModal 호출됨 ===');
            console.log('전달받은 projectData:', projectData);
            
            // 프로젝트 데이터로 모달 내용 업데이트
            if (projectData) {
                console.log('데이터 매핑 시작...');
                
                document.getElementById('detailNo').textContent = projectData.projectNo || 'PJ202507160057';
                document.getElementById('detailService').textContent = projectData.service || '웍스파이';
                document.getElementById('detailStatus').textContent = '기획';
                document.getElementById('detailRegDate').textContent = projectData.regDate || '2025.01.02 14:30';
                document.getElementById('detailTitle').textContent = projectData.title || '제목없는1.2 북터키스 아이키 전사 프로젝트';
                document.getElementById('detailProjectPeriod').textContent = `${projectData.startDate || '2025.01.02'} ~ ${projectData.endDate || '2025.01.16'}`;
                document.getElementById('detailWorkerCount').textContent = `0 / ${projectData.workerCount || '5'}명`;
                document.getElementById('detailProjectType').textContent = projectData.projectType || '속기'; 
                document.getElementById('detailBudget').textContent = projectData.budget ? (projectData.budget + '원') : '500,000원';
                document.getElementById('detailContent').innerHTML = projectData.description || '프로젝트 설명이 없습니다.';
                
                console.log('데이터 매핑 완료!');
                console.log('detailNo:', document.getElementById('detailNo').textContent);
                console.log('detailTitle:', document.getElementById('detailTitle').textContent);
                console.log('detailContent:', document.getElementById('detailContent').innerHTML);
            } else {
                console.error('projectData가 없습니다!');
            }
            
            document.getElementById('detailModal').style.display = 'flex';
            
            // 탭 초기화 - 프로젝트 정보 탭을 기본으로 활성화
            document.getElementById('tab-info').classList.add('active');
            document.getElementById('tab-workers').classList.remove('active');
            
            // 탭 버튼 초기화
            const tabButtons = document.querySelectorAll('#detailModal .tab-btn');
            tabButtons.forEach(btn => {
                btn.classList.remove('active');
                btn.style.background = '#f8fafc';
                btn.style.color = '#6b7280';
                btn.style.borderBottom = '3px solid transparent';
            });
            
            // 첫 번째 탭 버튼 활성화
            const firstTabBtn = document.querySelector('#detailModal .tab-btn');
            if (firstTabBtn) {
                firstTabBtn.classList.add('active');
                firstTabBtn.style.background = 'white';
                firstTabBtn.style.color = '#3b82f6';
                firstTabBtn.style.borderBottom = '3px solid #3b82f6';
            }
            
            // 디버깅: 탭 상태 확인
            console.log('=== 탭 상태 확인 ===');
            console.log('tab-info 요소:', document.getElementById('tab-info'));
            console.log('tab-info 클래스:', document.getElementById('tab-info')?.className);
            console.log('tab-info 스타일:', document.getElementById('tab-info')?.style.display);
            console.log('tab-workers 요소:', document.getElementById('tab-workers'));
            console.log('tab-workers 클래스:', document.getElementById('tab-workers')?.className);
            
            // 모달 열 때 기본적으로 프로젝트 정보 탭 활성화 및 버튼 설정
            const actionBtn = document.getElementById('modalActionBtn');
            actionBtn.textContent = '수정';
            actionBtn.onclick = editProject;
            actionBtn.className = 'btn-edit';
            
            console.log('=== 모달 열기 완료 ===');
        }
        
        function closeDetailModal() {
            document.getElementById('detailModal').style.display = 'none';
        }
        
        // 등록 모달 열기/닫기
        function addNewProject() {
            // 더미 데이터로 프로젝트 등록 폼 미리 채우기
            const params = getUrlParams();
            const fileName = params.fileName ? decodeURIComponent(params.fileName).replace(/\.[^/.]+$/, "") : "음성파일";
            const today = new Date();
            const twoWeeksLater = new Date();
            twoWeeksLater.setDate(today.getDate() + 14);
            const formatDate = (date) => { return date.toISOString().split('T')[0]; };
            
            document.getElementById('serviceSelect').value = '웍스파이';
            document.getElementById('projectTitle').value = fileName + ' 전사 프로젝트';
            document.getElementById('projectStartDate').value = formatDate(today);
            document.getElementById('projectEndDate').value = formatDate(twoWeeksLater);
            document.getElementById('workerCount').value = '5';
            document.getElementById('projectTypeSelect').value = '속기';
            document.getElementById('budgetAmount').value = '500000';
            document.getElementById('prioritySelect').value = '보통';
            
            const contentEditor = document.getElementById('contentEditor');
            if (contentEditor) {
                contentEditor.innerHTML = `
                    사람을 구합니다.<br>
                    테스트합니다.<br>
                    하나둘하나둘
                `.trim();
            }
            document.getElementById('activeToggle').checked = true;
            document.getElementById('importantProject').checked = false;
            
            document.getElementById('projectModal').style.display = 'flex';
        }
        
        function closeProjectModal() {
            document.getElementById('projectModal').style.display = 'none';
        }
        
        // 간단한 기능들
        function updateWorkerStatus(workerNo, status) {
            const statusText = status === 'assigned' ? '배정' : '미배정';
            if (confirm(`작업자를 ${statusText}하시겠습니까?`)) {
                alert(`작업자가 ${statusText}되었습니다.`);
            }
        }
        
        function editProject() {
            alert('프로젝트 수정 기능');
        }
        
        function confirmWorkers() {
            alert('작업자 확정 처리 완료');
        }
        
        function formatText(command) {
            document.execCommand(command, false, null);
        }
        
        function handleThumbnailUpload(input) {
            alert('썸네일 업로드');
        }
        
        function handleAttachmentUpload(input) {
            alert('첨부파일 업로드');
        }
        
        function removeThumbnail() {
            alert('썸네일 제거');
        }
        
        function removeAttachment(fileName) {
            alert('첨부파일 제거');
        }
        
        // 체크박스 전체 선택/해제
        function toggleAllWorkers(selectAllCheckbox) {
            const checkboxes = document.querySelectorAll('input[name="workerSelect"]');
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAllCheckbox.checked;
            });
            updateSelectedWorkerCount();
        }
        
        // 선택된 체크박스 개수 업데이트
        function updateSelectedWorkerCount() {
            const checkedBoxes = document.querySelectorAll('input[name="workerSelect"]:checked');
            const countElement = document.getElementById('selectedWorkerCount');
            if (countElement) {
                countElement.textContent = checkedBoxes.length + '명';
            }
        }
        
        // 일괄 배정/미배정 처리
        function batchUpdateWorkerStatus(status) {
            const checkedBoxes = document.querySelectorAll('input[name="workerSelect"]:checked');
            if (checkedBoxes.length === 0) {
                alert('선택된 작업자가 없습니다.');
                return;
            }
            
            const statusText = status === 'assigned' ? '배정' : '미배정';
            const confirmMessage = `선택된 ${checkedBoxes.length}명의 작업자를 ${statusText}하시겠습니까?`;
            
            if (confirm(confirmMessage)) {
                checkedBoxes.forEach(checkbox => {
                    const row = checkbox.closest('tr');
                    const statusCell = row.querySelector('td:nth-child(10)');
                    const statusSpan = statusCell.querySelector('.applicant-status');
                    
                    if (status === 'assigned') {
                        statusSpan.textContent = '배정';
                        statusSpan.className = 'applicant-status status-approved';
                        // 배정일 추가
                        const assignDateCell = row.querySelector('td:nth-child(9)');
                        const today = new Date();
                        assignDateCell.textContent = today.toISOString().slice(0, 10).replace(/-/g, '.');
                    } else if (status === 'unassigned') {
                        statusSpan.textContent = '미배정';
                        statusSpan.className = 'applicant-status status-cancelled';
                    }
                    
                    // 체크박스 해제
                    checkbox.checked = false;
                });
                
                // 전체 선택 체크박스도 해제
                const selectAllCheckbox = document.getElementById('selectAllWorkers');
                if (selectAllCheckbox) {
                    selectAllCheckbox.checked = false;
                }
                
                updateSelectedWorkerCount();
                
                // 테이블 정렬 (배정 상단, 미배정 하단)
                sortWorkerTable();
                
                alert(`${checkedBoxes.length}명의 작업자가 ${statusText}되었습니다.`);
            }
        }
        
        // 작업자 테이블 정렬 (배정 상단, 미배정 하단)
        function sortWorkerTable() {
            const table = document.querySelector('#detailModal .applicants-table tbody');
            if (!table) return;
            
            const rows = Array.from(table.querySelectorAll('tr'));
            
            // 상태에 따라 정렬 (배정=0, 미배정=1)
            rows.sort((a, b) => {
                const statusA = a.querySelector('.applicant-status').textContent.trim();
                const statusB = b.querySelector('.applicant-status').textContent.trim();
                
                const priorityA = statusA === '배정' ? 0 : 1;
                const priorityB = statusB === '배정' ? 0 : 1;
                
                return priorityA - priorityB;
            });
            
            // 테이블에 정렬된 행들 다시 삽입
            rows.forEach(row => table.appendChild(row));
        }
        
        // 웍스파이 프로젝트 등록 버튼 클릭 시 호출되는 함수 (기존 HTML과의 연결)
        function openWorksbyProjectModal() {
            addNewProject(); // 새 이름으로 연결
        }
        
        // 프로젝트 저장 처리
        function saveProject(formData) {
            console.log('saveProject 함수 호출됨!', formData); // 디버깅용
            
            // 프로젝트 번호 생성
            const projectNo = 'PJ' + new Date().toISOString().slice(0, 10).replace(/-/g, '') + Math.floor(Math.random() * 1000).toString().padStart(3, '0');
            console.log('생성된 프로젝트 번호:', projectNo); // 디버깅용
            
            // 썸네일 텍스트 생성
            const thumbnailText = formData.service === '웍스파이' ? 'WORKSPY' : 
                                formData.service === '소리바로' ? 'SORIBARO' :
                                formData.service === '팀벨' ? 'TEAMBELL' :
                                formData.service === '엔튜브' ? 'NTUBE' :
                                formData.service === '더 데이터' ? 'DATA' :
                                formData.service === '텍스타' ? 'TEXTA' : 'PROJECT';

            // 날짜 형식 변환 함수
            const formatDisplayDate = (dateStr) => {
                if (!dateStr) return '';
                return dateStr.replace(/-/g, '.');
            };
            
            // 금액 형식 변환 함수
            const formatBudget = (amount) => {
                if (!amount) return '0';
                return parseInt(amount).toLocaleString();
            };

            // 프로젝트 데이터 생성
            const worksbyProjectData = {
                projectNo: projectNo,
                title: formData.title,
                service: formData.service,
                startDate: formatDisplayDate(formData.startDate),
                endDate: formatDisplayDate(formData.endDate),
                workerCount: formData.workerCount || '0',
                projectType: formData.projectType,
                budget: formatBudget(formData.budget),
                priority: formData.priority,
                description: formData.description,
                isActive: formData.isActive,
                isImportant: formData.isImportant,
                thumbnailText: thumbnailText,
                regDate: new Date().toISOString().slice(0, 16).replace('T', ' ').replace(/-/g, '.')
            };

            // 테이블에 프로젝트 추가
            console.log('테이블에 프로젝트 추가 중...'); // 디버깅용
            addWorksbyProjectToTable(worksbyProjectData);
            
            // 빈 상태 숨기고 테이블 표시
            console.log('UI 상태 변경 중...'); // 디버깅용
            const emptyState = document.getElementById('workspy-empty-state');
            const projectTable = document.getElementById('workspy-project-table');
            
            if (emptyState && projectTable) {
                emptyState.style.display = 'none';
                projectTable.style.display = 'block';
                console.log('UI 상태 변경 완료!'); // 디버깅용
            } else {
                console.error('UI 요소를 찾을 수 없습니다:', { emptyState, projectTable }); // 디버깅용
            }
            
            // 모달 닫기
            console.log('모달 닫기 중...'); // 디버깅용
            closeProjectModal();
            
            alert('웍스파이 프로젝트가 등록되었습니다!\n\n프로젝트가 웍스파이에 등록되어 작업자 모집이 시작됩니다.');
        }
        
        // DOMContentLoaded 이벤트 리스너
        document.addEventListener('DOMContentLoaded', function() {
            // 프로젝트 등록 폼 제출 이벤트
            const projectForm = document.getElementById('projectForm');
            if (projectForm) {
                projectForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // 폼 데이터 수집
                    const formData = {
                        service: document.getElementById('serviceSelect').value,
                        title: document.getElementById('projectTitle').value,
                        startDate: document.getElementById('projectStartDate').value,
                        endDate: document.getElementById('projectEndDate').value,
                        workerCount: document.getElementById('workerCount').value,
                        projectType: document.getElementById('projectTypeSelect').value,
                        budget: document.getElementById('budgetAmount').value,
                        priority: document.getElementById('prioritySelect').value,
                        description: document.getElementById('contentEditor').innerHTML,
                        isActive: document.getElementById('activeToggle').checked,
                        isImportant: document.getElementById('importantProject').checked
                    };
                    
                    // 간단한 유효성 검사
                    if (!formData.service) {
                        alert('서비스를 선택해주세요.');
                        return;
                    }
                    if (!formData.title.trim()) {
                        alert('프로젝트명을 입력해주세요.');
                        return;
                    }
                    if (!formData.startDate || !formData.endDate) {
                        alert('진행기간을 입력해주세요.');
                        return;
                    }
                    
                    saveProject(formData);
                });
            }
            
            // 작업자 체크박스 이벤트 리스너
            const workerCheckboxes = document.querySelectorAll('input[name="workerSelect"]');
            workerCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updateSelectedWorkerCount);
            });
        });
    </script>

    <!-- 웍스파이 프로젝트 등록 팝업 - 교체 중 -->
    <div id="worksbyProjectModal" class="modal-overlay" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <h2>웍스파이 프로젝트 등록</h2>
                <button class="modal-close" onclick="closeWorksbyProjectModal()">&times;</button>
            </div>
            
            <form class="modal-form" id="worksbyProjectForm">
                <div class="form-row" style="display: flex; align-items: flex-end; gap: 20px;">
                    <div class="form-group required" style="flex: 1;">
                        <label>서비스 <span class="required-mark">*</span></label>
                        <select id="worksbyServiceSelect" required>
                            <option value="">선택하세요</option>
                            <option value="웍스파이">웍스파이</option>
                            <option value="더 데이터">더 데이터</option>
                            <option value="엔튜브">엔튜브</option>
                            <option value="소리바로">소리바로</option>
                            <option value="팀벨">팀벨</option>
                            <option value="텍스타">텍스타</option>
                        </select>
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 30px; margin-bottom: 8px;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <label style="margin: 0; font-size: 14px; font-weight: 500; color: #374151;">활성상태</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="worksbyActiveToggle" class="toggle-input" checked>
                                <label for="worksbyActiveToggle" class="toggle-label"></label>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="worksbyImportantProject">
                            <label for="worksbyImportantProject" style="margin: 0; font-size: 14px; font-weight: 500; color: #374151;">중요</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group required full-width">
                        <label>프로젝트명 <span class="required-mark">*</span></label>
                        <input type="text" id="worksbyProjectTitle" required placeholder="프로젝트명을 입력하세요">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group required">
                        <label>진행기간 <span class="required-mark">*</span></label>
                        <div class="date-range">
                            <input type="datetime-local" id="worksbyProjectStartDate" required>
                            <span>~</span>
                            <input type="datetime-local" id="worksbyProjectEndDate" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>작업자 수</label>
                        <input type="number" id="worksbyWorkerCount" placeholder="0" style="width: 80px;">
                    </div>
                    
                    <div class="form-group">
                        <label>프로젝트 유형</label>
                        <select id="worksbyProjectTypeSelect">
                            <option value="속기">속기</option>
                            <option value="번역">번역</option>
                            <option value="시스템">시스템</option>
                            <option value="개발">개발</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>예산</label>
                        <input type="text" id="worksbyBudgetAmount" placeholder="예산을 입력하세요">
                    </div>
                    
                    <div class="form-group">
                        <label>우선순위</label>
                        <select id="worksbyPrioritySelect">
                            <option value="보통">보통</option>
                            <option value="높음">높음</option>
                            <option value="긴급">긴급</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group full-width">
                        <label>프로젝트 설명</label>
                        <div class="simple-editor-toolbar">
                            <button type="button" class="simple-editor-btn" onclick="formatText('bold')" title="굵게"><strong>B</strong></button>
                            <button type="button" class="simple-editor-btn" onclick="formatText('underline')" title="밑줄"><u>U</u></button>
                            <button type="button" class="simple-editor-btn" onclick="formatText('insertUnorderedList')" title="목록">•</button>
                            <button type="button" class="simple-editor-btn" onclick="formatText('createLink')" title="링크">🔗</button>
                        </div>
                        <div id="worksbyContentEditor" contenteditable="true" class="simple-content-editor" 
                             placeholder="프로젝트 상세설명을 입력하세요..."></div>
                    </div>
                </div>
                
                <!-- 파일 업로드 섹션 -->
                <div class="form-row">
                    <div class="form-group">
                        <label>썸네일</label>
                        <div class="file-upload-area" id="worksbyThumbnailUpload">
                            <div class="file-upload-content">
                                <div class="file-upload-icon">🖼️</div>
                                <div class="file-upload-text">
                                    <p>썸네일 이미지를 업로드하세요</p>
                                    <p class="file-upload-subtext">JPG, PNG, GIF (최대 5MB)</p>
                                </div>
                                <button type="button" class="file-upload-btn" onclick="document.getElementById('worksbyThumbnailInput').click()">파일 선택</button>
                                <input type="file" id="worksbyThumbnailInput" accept="image/*" style="display: none;" onchange="handleWorksbyThumbnailUpload(this)">
                            </div>
                            <div class="file-preview" id="worksbyThumbnailPreview" style="display: none;">
                                <img id="worksbyThumbnailImage" src="" alt="썸네일 미리보기">
                                <button type="button" class="file-remove-btn" onclick="removeWorksbyThumbnail()">✕</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>첨부파일</label>
                        <div class="file-upload-area" id="worksbyAttachmentUpload">
                            <div class="file-upload-content">
                                <div class="file-upload-icon">📎</div>
                                <div class="file-upload-text">
                                    <p>첨부파일을 업로드하세요</p>
                                    <p class="file-upload-subtext">모든 파일 형식 (최대 10MB)</p>
                                </div>
                                <button type="button" class="file-upload-btn" onclick="document.getElementById('worksbyAttachmentInput').click()">파일 선택</button>
                                <input type="file" id="worksbyAttachmentInput" multiple style="display: none;" onchange="handleWorksbyAttachmentUpload(this)">
                            </div>
                            <div class="file-list" id="worksbyAttachmentList"></div>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn-save" onclick="handleWorksbyProjectSubmit()">저장</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 웍스파이 프로젝트 상세보기 팝업 -->
    <div id="worksbyDetailModal" class="modal-overlay" style="display: none;">
        <div class="modal-container detail-modal">
            <div class="modal-header">
                <h2>📋 웍스파이 프로젝트 상세정보</h2>
                <button class="modal-close" onclick="closeWorksbyDetailModal()">&times;</button>
            </div>
            
            <div class="detail-content">
                <!-- 탭 네비게이션 -->
                <div class="tab-navigation">
                    <button class="tab-btn active" onclick="showWorksbyTab('info', this)" style="background: white; color: #3b82f6; border-bottom: 3px solid #3b82f6;">📄 프로젝트 정보</button>
                    <button class="tab-btn" onclick="showWorksbyTab('workers', this)" style="background: #f8fafc; color: #6b7280;">👥 작업자 관리</button>
                </div>
                
                <!-- 탭 콘텐츠 -->
                <div class="tab-content">
                    <!-- 프로젝트 정보 탭 -->
                    <div id="worksby-tab-info" class="tab-panel active">
                        <div class="detail-section">
                            <div class="info-grid">
                                <div class="info-item">
                                    <label>프로젝트번호</label>
                                    <span id="worksbyDetailNo"></span>
                                </div>
                                <div class="info-item">
                                    <label>서비스</label>
                                    <span id="worksbyDetailService"></span>
                                </div>
                                <div class="info-item">
                                    <label>진행상태</label>
                                    <span id="worksbyDetailStatus"></span>
                                </div>
                                <div class="info-item">
                                    <label>등록일</label>
                                    <span id="worksbyDetailRegDate"></span>
                                </div>
                            </div>
                            
                            <div class="info-item full-width">
                                <label>프로젝트명</label>
                                <h3 id="worksbyDetailTitle"></h3>
                            </div>
                            
                            <div class="info-grid">
                                <div class="info-item">
                                    <label>진행기간</label>
                                    <span id="worksbyDetailProjectPeriod"></span>
                                </div>
                                <div class="info-item">
                                    <label>작업자 수</label>
                                    <span id="worksbyDetailWorkerCount"></span>
                                </div>
                                <div class="info-item">
                                    <label>프로젝트 유형</label>
                                    <span id="worksbyDetailProjectType"></span>
                                </div>
                                <div class="info-item">
                                    <label>예산</label>
                                    <span id="worksbyDetailBudget"></span>
                                </div>
                            </div>

                            <div class="info-item full-width">
                                <label>프로젝트 설명</label>
                                <div id="worksbyDetailContent" class="content-box"></div>
                            </div>
                            
                            <div class="info-grid">
                                <div class="info-item">
                                    <label>썸네일</label>
                                    <div id="worksbyDetailThumbnail" class="thumbnail-preview">이미지 없음</div>
                                </div>
                                <div class="info-item">
                                    <label>첨부파일</label>
                                    <div id="worksbyDetailAttachments" class="attachments-list">파일 없음</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 작업자 관리 탭 -->
                    <div id="worksby-tab-workers" class="tab-panel">
                        <div class="detail-section">
                            <div class="section-header">
                                <h3 class="section-title">👥 작업자 관리</h3>
                                <div class="applicant-stats">
                                    <span class="stat-item">총 <strong id="worksbyTotalWorkers">0</strong>명</span>
                                    <span class="stat-item">배정 <strong id="worksbyAssignedCount">0</strong>명</span>
                                    <span class="stat-item">미배정 <strong id="worksbyExcludedCount">0</strong>명</span>
                                </div>
                            </div>
                            
                            <div class="applicants-table-wrapper">
                                <table class="applicants-table">
                                    <thead>
                                        <tr>
                                            <th><input type="checkbox" id="worksbySelectAllWorkers" onchange="toggleAllWorksbyWorkers(this)"></th>
                                            <th>이름</th>
                                            <th>성별</th>
                                            <th>휴대전화</th>
                                            <th>생년월일</th>
                                            <th>전문분야</th>
                                            <th>경력</th>
                                            <th>등급</th>
                                            <th>배정일</th>
                                            <th>상태</th>
                                        </tr>
                                    </thead>
                                    <tbody id="worksbyWorkersList">
                                        <!-- 샘플 작업자 데이터 -->
                                        <tr>
                                            <td style="text-align: center;"><input type="checkbox" name="worksbyWorkerSelect" value="1"></td>
                                            <td>김민영</td>
                                            <td style="text-align: center;">여성</td>
                                            <td style="text-align: center;">010-1**2-3456</td>
                                            <td style="text-align: center;">1990.**.**</td>
                                            <td style="text-align: center;">속기</td>
                                            <td style="text-align: center;">5년</td>
                                            <td style="text-align: center;">고급</td>
                                            <td style="text-align: center;">-</td>
                                            <td style="text-align: center;"><span class="applicant-status status-cancelled">미배정</span></td>
                                        </tr>
                                        <tr>
                                            <td style="text-align: center;"><input type="checkbox" name="worksbyWorkerSelect" value="2"></td>
                                            <td>박준호</td>
                                            <td style="text-align: center;">남성</td>
                                            <td style="text-align: center;">010-2**3-4567</td>
                                            <td style="text-align: center;">1988.**.**</td>
                                            <td style="text-align: center;">속기</td>
                                            <td style="text-align: center;">7년</td>
                                            <td style="text-align: center;">전문가</td>
                                            <td style="text-align: center;">-</td>
                                            <td style="text-align: center;"><span class="applicant-status status-cancelled">미배정</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- 배정/미배정 버튼 -->
                            <div class="batch-actions" style="display: flex; gap: 10px; align-items: center; margin-top: 15px; padding: 15px; background: white; border-radius: 8px; border: 1px solid #e5e7eb;">
                                <div style="display: flex; align-items: center; gap: 8px; color: #6b7280; font-size: 14px;">
                                    <span>선택된 작업자:</span>
                                    <span id="worksbySelectedWorkerCount" style="font-weight: 600; color: #374151;">0명</span>
                                </div>
                                <div style="margin-left: auto; display: flex; gap: 8px;">
                                    <button class="batch-btn btn-approve" onclick="batchUpdateWorksbyWorkerStatus('assigned')" style="background: #10b981; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 13px; cursor: pointer; transition: background-color 0.2s;">
                                        ✓ 배정
                                    </button>
                                    <button class="batch-btn btn-reject" onclick="batchUpdateWorksbyWorkerStatus('unassigned')" style="background: #ef4444; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 13px; cursor: pointer; transition: background-color 0.2s;">
                                        ✗ 미배정
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeWorksbyDetailModal()">닫기</button>
                <button type="button" class="btn-edit" id="worksbyModalActionBtn" onclick="editWorksbyProject()">수정</button>
            </div>
        </div>
    </div>
    <!-- projects.html에서 가져온 프로젝트 등록 팝업 -->
    <div id="projectModal" class="modal-overlay" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <h2>프로젝트 등록</h2>
                <button class="modal-close" onclick="closeProjectModal()">&times;</button>
            </div>
            
            <form class="modal-form" id="projectForm">
                <div class="form-row" style="display: flex; align-items: flex-end; gap: 20px;">
                    <div class="form-group required" style="flex: 1;">
                        <label>서비스 <span class="required-mark">*</span></label>
                        <select id="serviceSelect" required>
                            <option value="">선택하세요</option>
                            <option value="웍스파이">웍스파이</option>
                            <option value="더 데이터">더 데이터</option>
                            <option value="엔튜브">엔튜브</option>
                            <option value="소리바로">소리바로</option>
                            <option value="팀벨">팀벨</option>
                            <option value="텍스타">텍스타</option>
                        </select>
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 30px; margin-bottom: 8px;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <label style="margin: 0; font-size: 14px; font-weight: 500; color: #374151;">활성상태</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="activeToggle" class="toggle-input" checked>
                                <label for="activeToggle" class="toggle-label"></label>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="importantProject">
                            <label for="importantProject" style="margin: 0; font-size: 14px; font-weight: 500; color: #374151;">중요</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group required full-width">
                        <label>프로젝트명 <span class="required-mark">*</span></label>
                        <input type="text" id="projectTitle" required placeholder="프로젝트명을 입력하세요">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group required">
                        <label>진행기간 <span class="required-mark">*</span></label>
                        <div class="date-range">
                            <input type="datetime-local" id="projectStartDate" required>
                            <span>~</span>
                            <input type="datetime-local" id="projectEndDate" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>작업자 수</label>
                        <input type="number" id="workerCount" placeholder="0" style="width: 80px;">
                    </div>
                    
                    <div class="form-group">
                        <label>프로젝트 유형</label>
                        <select id="projectTypeSelect">
                            <option value="속기">속기</option>
                            <option value="번역">번역</option>
                            <option value="시스템">시스템</option>
                            <option value="개발">개발</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>예산</label>
                        <input type="text" id="budgetAmount" placeholder="예산을 입력하세요">
                    </div>
                    
                    <div class="form-group">
                        <label>우선순위</label>
                        <select id="prioritySelect">
                            <option value="보통">보통</option>
                            <option value="높음">높음</option>
                            <option value="긴급">긴급</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group full-width">
                        <label>프로젝트 설명</label>
                        <div class="simple-editor-toolbar">
                            <button type="button" class="simple-editor-btn" onclick="formatText('bold')" title="굵게"><strong>B</strong></button>
                            <button type="button" class="simple-editor-btn" onclick="formatText('underline')" title="밑줄"><u>U</u></button>
                            <button type="button" class="simple-editor-btn" onclick="formatText('insertUnorderedList')" title="목록">•</button>
                            <button type="button" class="simple-editor-btn" onclick="formatText('createLink')" title="링크">🔗</button>
                        </div>
                        <div id="contentEditor" contenteditable="true" class="simple-content-editor" 
                             placeholder="프로젝트 상세설명을 입력하세요..."></div>
                    </div>
                </div>
                
                <!-- 파일 업로드 섹션 -->
                <div class="form-row">
                    <div class="form-group">
                        <label>썸네일</label>
                        <div class="file-upload-area" id="thumbnailUpload">
                            <div class="file-upload-content">
                                <div class="file-upload-icon">🖼️</div>
                                <div class="file-upload-text">
                                    <p>썸네일 이미지를 업로드하세요</p>
                                    <p class="file-upload-subtext">JPG, PNG, GIF (최대 5MB)</p>
                                </div>
                                <button type="button" class="file-upload-btn" onclick="document.getElementById('thumbnailInput').click()">파일 선택</button>
                                <input type="file" id="thumbnailInput" accept="image/*" style="display: none;" onchange="handleThumbnailUpload(this)">
                            </div>
                            <div class="file-preview" id="thumbnailPreview" style="display: none;">
                                <img id="thumbnailImage" src="" alt="썸네일 미리보기">
                                <button type="button" class="file-remove-btn" onclick="removeThumbnail()">✕</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>첨부파일</label>
                        <div class="file-upload-area" id="attachmentUpload">
                            <div class="file-upload-content">
                                <div class="file-upload-icon">📎</div>
                                <div class="file-upload-text">
                                    <p>첨부파일을 업로드하세요</p>
                                    <p class="file-upload-subtext">모든 파일 형식 (최대 10MB)</p>
                                </div>
                                <button type="button" class="file-upload-btn" onclick="document.getElementById('attachmentInput').click()">파일 선택</button>
                                <input type="file" id="attachmentInput" multiple style="display: none;" onchange="handleAttachmentUpload(this)">
                            </div>
                            <div class="file-list" id="attachmentList"></div>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="submit" class="btn-save">저장</button>
                </div>
            </form>
        </div>
    </div>

    <!-- projects.html에서 가져온 프로젝트 상세보기 팝업 -->
    <div id="detailModal" class="modal-overlay" style="display: none;">
        <div class="modal-container detail-modal">
            <div class="modal-header">
                <h2>📋 프로젝트 상세정보</h2>
                <button class="modal-close" onclick="closeDetailModal()">&times;</button>
            </div>
            
            <div class="detail-content">
                <!-- 탭 네비게이션 -->
                <div class="tab-navigation">
                    <button class="tab-btn active" onclick="showTab('info')" style="background: white; color: #3b82f6; border-bottom: 3px solid #3b82f6;">📄 프로젝트 정보</button>
                    <button class="tab-btn" onclick="showTab('workers')" style="background: #f8fafc; color: #6b7280;">👥 작업자 관리</button>
                </div>
                
                <!-- 탭 콘텐츠 -->
                <div class="tab-content">
                    <!-- 프로젝트 정보 탭 -->
                    <div id="tab-info" class="tab-panel active">
                        <div class="detail-section">
                            <div class="info-grid">
                                <div class="info-item">
                                    <label>프로젝트번호</label>
                                    <span id="detailNo">PJ202507160057</span>
                                </div>
                                <div class="info-item">
                                    <label>서비스</label>
                                    <span id="detailService">웍스파이</span>
                                </div>
                                <div class="info-item">
                                    <label>진행상태</label>
                                    <span id="detailStatus" style="color: #059669; font-weight: 500;">진행중</span>
                                </div>
                                <div class="info-item">
                                    <label>등록일</label>
                                    <span id="detailRegDate">2025.07.16 09:00</span>
                                </div>
                            </div>
                            
                            <div class="info-item full-width">
                                <label>프로젝트명</label>
                                <h3 id="detailTitle">팀벨 글로벌 속기 시스템 구축 프로젝트</h3>
                            </div>
                            
                            <div class="info-grid">
                                <div class="info-item">
                                    <label>진행기간</label>
                                    <span id="detailProjectPeriod">2025.07.16 ~ 2025.08.30</span>
                                </div>
                                <div class="info-item">
                                    <label>작업자 수</label>
                                    <span id="detailWorkerCount">5 / 8명</span>
                                </div>
                                <div class="info-item">
                                    <label>프로젝트 유형</label>
                                    <span id="detailProjectType">속기</span>
                                </div>
                                <div class="info-item">
                                    <label>예산</label>
                                    <span id="detailBudget">5,000,000원</span>
                                </div>
                            </div>

                            <div class="info-item full-width">
                                <label>프로젝트 설명</label>
                                <div id="detailContent" class="content-box">팀벨 글로벌 속기 시스템 구축을 위한 통합 프로젝트입니다.<br>최신 AI 기술을 활용한 실시간 속기 솔루션을 개발합니다.</div>
                            </div>
                            
                            <div class="info-grid">
                                <div class="info-item">
                                    <label>썸네일</label>
                                    <div id="detailThumbnail" class="thumbnail-preview">이미지 없음</div>
                                </div>
                                <div class="info-item">
                                    <label>첨부파일</label>
                                    <div id="detailAttachments" class="attachments-list">파일 없음</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 작업자 관리 탭 -->
                    <div id="tab-workers" class="tab-panel">
                    <div class="detail-section">
                        <div class="section-header">
                            <h3 class="section-title">👥 작업자 관리</h3>
                        <div class="applicant-stats">
                            <span class="stat-item">총 <strong id="totalWorkers">5</strong>명</span>
                            <span class="stat-item">배정 <strong id="assignedCount">3</strong>명</span>
                            <span class="stat-item">미배정 <strong id="excludedCount">2</strong>명</span>
                        </div>
                    </div>
                    
                    <div class="applicants-table-wrapper">
                        <table class="applicants-table">
                            <thead>
                                <tr>
                                    <th><input type="checkbox" id="selectAllWorkers" onchange="toggleAllWorkers(this)"></th>
                                    <th>이름</th>
                                    <th>성별</th>
                                    <th>휴대전화</th>
                                    <th>생년월일</th>
                                    <th>전문분야</th>
                                    <th>경력</th>
                                    <th>등급</th>
                                    <th>배정일</th>
                                    <th>상태</th>
                                </tr>
                            </thead>
                            <tbody id="workersList">
                                <!-- 더미 데이터 직접 삽입 -->
                                <tr>
                                    <td style="text-align: center;"><input type="checkbox" name="workerSelect" value="1"></td>
                                    <td>김민영</td>
                                    <td style="text-align: center;">여성</td>
                                    <td style="text-align: center;">010-1**2-3456</td>
                                    <td style="text-align: center;">1990.**.**</td>
                                    <td style="text-align: center;">속기</td>
                                    <td style="text-align: center;">5년</td>
                                    <td style="text-align: center;">고급</td>
                                    <td style="text-align: center;">2025.07.16</td>
                                    <td style="text-align: center;"><span class="applicant-status status-approved">배정</span></td>
                                </tr>
                                <tr>
                                    <td style="text-align: center;"><input type="checkbox" name="workerSelect" value="2"></td>
                                    <td>박준호</td>
                                    <td style="text-align: center;">남성</td>
                                    <td style="text-align: center;">010-2**3-4567</td>
                                    <td style="text-align: center;">1988.**.**</td>
                                    <td style="text-align: center;">속기</td>
                                    <td style="text-align: center;">7년</td>
                                    <td style="text-align: center;">전문가</td>
                                    <td style="text-align: center;">2025.07.16</td>
                                    <td style="text-align: center;"><span class="applicant-status status-approved">배정</span></td>
                                </tr>
                                <tr>
                                    <td style="text-align: center;"><input type="checkbox" name="workerSelect" value="3"></td>
                                    <td>이수진</td>
                                    <td style="text-align: center;">여성</td>
                                    <td style="text-align: center;">010-3**4-5678</td>
                                    <td style="text-align: center;">1992.**.**</td>
                                    <td style="text-align: center;">속기</td>
                                    <td style="text-align: center;">3년</td>
                                    <td style="text-align: center;">중급</td>
                                    <td style="text-align: center;">2025.07.17</td>
                                    <td style="text-align: center;"><span class="applicant-status status-approved">배정</span></td>
                                </tr>
                                <tr>
                                    <td style="text-align: center;"><input type="checkbox" name="workerSelect" value="4"></td>
                                    <td>최영수</td>
                                    <td style="text-align: center;">남성</td>
                                    <td style="text-align: center;">010-4**5-6789</td>
                                    <td style="text-align: center;">1985.**.**</td>
                                    <td style="text-align: center;">시스템</td>
                                    <td style="text-align: center;">10년</td>
                                    <td style="text-align: center;">전문가</td>
                                    <td style="text-align: center;">-</td>
                                                                            <td style="text-align: center;"><span class="applicant-status status-cancelled">미배정</span></td>
                                </tr>
                                <tr>
                                    <td style="text-align: center;"><input type="checkbox" name="workerSelect" value="5"></td>
                                    <td>정미란</td>
                                    <td style="text-align: center;">여성</td>
                                    <td style="text-align: center;">010-5**6-7890</td>
                                    <td style="text-align: center;">1987.**.**</td>
                                    <td style="text-align: center;">번역</td>
                                    <td style="text-align: center;">8년</td>
                                    <td style="text-align: center;">고급</td>
                                    <td style="text-align: center;">-</td>
                                                                            <td style="text-align: center;"><span class="applicant-status status-cancelled">미배정</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                                            <!-- 배정/미배정 버튼 -->
                    <div class="batch-actions" style="display: flex; gap: 10px; align-items: center; margin-top: 15px; padding: 15px; background: white; border-radius: 8px; border: 1px solid #e5e7eb;">
                        <div style="display: flex; align-items: center; gap: 8px; color: #6b7280; font-size: 14px;">
                            <span>선택된 작업자:</span>
                            <span id="selectedWorkerCount" style="font-weight: 600; color: #374151;">0명</span>
                        </div>
                        <div style="margin-left: auto; display: flex; gap: 8px;">
                            <button class="batch-btn btn-approve" onclick="batchUpdateWorkerStatus('assigned')" style="background: #10b981; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 13px; cursor: pointer; transition: background-color 0.2s;">
                                ✓ 배정
                            </button>
                                                                <button class="batch-btn btn-reject" onclick="batchUpdateWorkerStatus('unassigned')" style="background: #ef4444; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 13px; cursor: pointer; transition: background-color 0.2s;">
                                        ✗ 미배정
                                    </button>
                        </div>
                    </div>
                </div>
            </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeDetailModal()">닫기</button>
                <button type="button" class="btn-edit" id="modalActionBtn" onclick="editProject()">수정</button>
            </div>
        </div>
    </div>

</body>
</html>