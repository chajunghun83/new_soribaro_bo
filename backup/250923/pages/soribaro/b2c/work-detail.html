<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>작업 상세정보 - 소리바로 BO</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            color: #333;
            padding: 30px;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .page-title {
            font-size: 28px;
            font-weight: 600;
            color: #374151;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .back-button {
            background: #6b7280;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .back-button:hover {
            background: #4b5563;
        }
        
        .cancel-button {
            background: #dc2626;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .cancel-button:hover {
            background: #b91c1c;
        }
        
        /* 정보 섹션 */
        .info-section {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .section-title {
            margin: 0 0 25px 0;
            color: #374151;
            font-size: 1.2rem;
            font-weight: 600;
            border-bottom: 3px solid #3b82f6;
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: 140px 1fr;
            gap: 20px;
            align-items: start;
        }
        
        .info-grid-2col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }
        
        .info-label {
            font-weight: 500;
            color: #6b7280;
            font-size: 14px;
        }
        
        .info-value {
            color: #374151;
            font-size: 14px;
        }
        
        .info-value.highlight {
            font-weight: 600;
            color: #3b82f6;
        }
        
        .info-value.warning {
            color: #f59e0b;
            font-weight: 500;
        }
        
        .info-value.success {
            color: #10b981;
            font-weight: 500;
        }
        
        /* 액션 버튼 영역 */
        .action-section {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: #3b82f6;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2563eb;
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn-success:hover {
            background: #059669;
        }
        
        .btn-warning {
            background: #f59e0b;
            color: white;
        }
        
        .btn-warning:hover {
            background: #d97706;
        }
        
        .btn-outline {
            background: white;
            color: #6b7280;
            border: 1px solid #d1d5db;
        }
        
        .btn-outline:hover {
            background: #f9fafb;
        }
        
        /* 상태 배지 */
        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
        }
        
        .status-waiting { background: rgba(245, 158, 11, 0.1); color: #f59e0b; }
        .status-inprogress { background: rgba(59, 130, 246, 0.1); color: #3b82f6; }
        .status-completed { background: rgba(16, 185, 129, 0.1); color: #10b981; }
        .status-cancelled { background: rgba(239, 68, 68, 0.1); color: #ef4444; }
        
        /* 파일 플레이어 영역 */
        .file-player-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .file-info-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .file-name-info {
            color: #374151;
            font-weight: 500;
            font-size: 14px;
        }
        
        .download-buttons {
            display: flex;
            gap: 10px;
        }
        
        .download-btn {
            background: #10b981;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .download-btn:hover {
            background: #059669;
        }
        
        .download-btn.json {
            background: #3b82f6;
        }
        
        .download-btn.json:hover {
            background: #2563eb;
        }
        
        /* 탭 스타일 */
        .tab-container {
            margin-bottom: 30px;
        }
        
        .tab-nav {
            display: flex;
            border-bottom: 2px solid #e5e7eb;
            margin-bottom: 20px;
        }
        
        .tab-button {
            background: none;
            border: none;
            padding: 15px 25px;
            font-size: 16px;
            font-weight: 500;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            position: relative;
        }
        
        .tab-button.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
            background: rgba(59, 130, 246, 0.05);
        }
        
        .tab-button:hover:not(.active) {
            color: #374151;
            background: #f9fafb;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* 작업관리 탭 스타일 */
        .work-management-section {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .work-info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }
        
        .assignment-section {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .worker-select {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            min-width: 150px;
        }
        
        .upload-area {
            border: 2px dashed #d1d5db;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            background: #f9fafb;
            transition: all 0.2s;
        }
        
        .upload-area:hover {
            border-color: #3b82f6;
            background: rgba(59, 130, 246, 0.05);
        }
        
        .upload-btn {
            background: #6b7280;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .upload-btn:hover {
            background: #4b5563;
        }
        
        .tool-btn {
            background: #f59e0b;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tool-btn:hover {
            background: #d97706;
        }
        
        /* 오디오 플레이어 스타일 */
        .audio-player {
            width: 100%;
            height: 40px;
            background: white;
            border-radius: 6px;
            border: 1px solid #e5e7eb;
        }
        
        .audio-player::-webkit-media-controls-panel {
            background-color: white;
        }
        
        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            font-size: 12px;
            color: #6b7280;
        }
        
        /* 정보 섹션 그리드 배치 */
        .info-sections-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }
        
        /* 웍스파이 모달 팝업 스타일 */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .modal-container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            width: 90%;
            max-width: 1000px;
            max-height: 95vh;
            display: flex;
            flex-direction: column;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            border-bottom: 1px solid #e2e8f0;
            background: #f8fafc;
            flex-shrink: 0;
        }
        
        .modal-header h2 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
            color: #1f2937;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            color: #6b7280;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-close:hover {
            color: #374151;
            background: #e5e7eb;
            border-radius: 4px;
        }
        
        .modal-form {
            padding: 25px;
            overflow-y: auto;
            flex: 1;
            max-height: calc(95vh - 140px);
        }
        
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            align-items: flex-start;
        }
        
        .form-group {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .form-group.full-width {
            flex: 1 1 100%;
        }
        
        .form-group.required {
            position: relative;
        }
        
        .form-group label {
            font-size: 14px;
            font-weight: 500;
            color: #374151;
            margin-bottom: 8px;
            display: block;
        }
        
        .required-mark {
            color: #ef4444;
            font-weight: bold;
        }
        
        .form-group input,
        .form-group select {
            padding: 10px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            color: #374151;
            outline: none;
            transition: border-color 0.2s;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .date-range {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .date-range input {
            flex: 1;
        }
        
        .date-range span {
            font-size: 14px;
            color: #6b7280;
        }
        
        /* 토글 스위치 스타일 */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }
        
        .toggle-input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-label {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        
        .toggle-label:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        .toggle-input:checked + .toggle-label {
            background-color: #3b82f6;
        }
        
        .toggle-input:checked + .toggle-label:before {
            transform: translateX(20px);
        }
        
        /* 심플 에디터 스타일 */
        .simple-editor-toolbar {
            display: flex;
            gap: 4px;
            padding: 8px 12px;
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-bottom: none;
            border-radius: 6px 6px 0 0;
        }
        
        .simple-editor-btn {
            padding: 4px 8px;
            background: none;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 13px;
            color: #6b7280;
            transition: all 0.2s;
            min-width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .simple-editor-btn:hover {
            background: #e5e7eb;
            color: #374151;
        }
        
        .simple-content-editor {
            min-height: 180px;
            padding: 16px;
            border: 1px solid #e5e7eb;
            border-radius: 0 0 6px 6px;
            outline: none;
            font-size: 14px;
            line-height: 1.6;
            color: #374151;
            background: white;
            transition: border-color 0.2s;
        }
        
        .simple-content-editor:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
        }
        
        .simple-content-editor:empty:before {
            content: attr(placeholder);
            color: #9ca3af;
            font-style: italic;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            padding: 15px 25px;
            border-top: 1px solid #e2e8f0;
            background: white;
            flex-shrink: 0;
            gap: 10px;
        }
        
        .btn-save {
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 12px 30px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .btn-save:hover {
            background: #2563eb;
        }
        
        /* 파일 업로드 스타일 */
        .file-upload-area {
            border: 2px dashed #d1d5db;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            background: #f9fafb;
            transition: all 0.3s ease;
            position: relative;
            height: 180px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .file-upload-area:hover {
            border-color: #3b82f6;
            background: #f0f9ff;
        }
        
        .file-upload-area.dragover {
            border-color: #3b82f6;
            background: #dbeafe;
        }
        
        .file-upload-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            flex-shrink: 0;
            justify-content: center;
            height: 100%;
        }
        
        .file-upload-icon {
            font-size: 32px;
            opacity: 0.6;
        }
        
        .file-upload-text p {
            margin: 0;
            color: #374151;
            font-size: 14px;
        }
        
        .file-upload-subtext {
            font-size: 12px !important;
            color: #6b7280 !important;
        }
        
        .file-upload-btn {
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            font-size: 13px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .file-upload-btn:hover {
            background: #2563eb;
        }
        
        /* 썸네일 미리보기 */
        .file-preview {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            flex-shrink: 0;
        }
        
        .file-preview img {
            max-width: 200px;
            max-height: 150px;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .file-remove-btn {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .file-remove-btn:hover {
            background: #dc2626;
        }
        
        /* 첨부파일 리스트 */
        .file-list {
            flex: 1;
            overflow-y: auto;
            padding-top: 15px;
        }
        
        .file-list:empty {
            display: none;
        }
        
        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 12px;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            margin-bottom: 8px;
        }
        
        .file-info {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .file-icon {
            font-size: 16px;
        }
        
        .file-name {
            font-size: 14px;
            color: #374151;
            font-weight: 500;
        }
        
        .file-size {
            font-size: 12px;
            color: #6b7280;
        }
        
        .file-remove {
            background: none;
            border: none;
            color: #ef4444;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .file-remove:hover {
            background: #fef2f2;
        }

         /* 상세보기 팝업 스타일 */
         .detail-modal {
             max-width: 1200px;
             width: 95%;
             height: 85vh;
             max-height: 85vh;
         }
         
         .detail-content {
             padding: 0;
             flex: 1;
             overflow: hidden;
             display: flex;
             flex-direction: column;
         }
         
         /* 탭 네비게이션 - 모달 전용 */
         #detailModal .tab-navigation {
             display: flex;
             background: #f8fafc;
             border-bottom: 1px solid #e5e7eb;
             flex-shrink: 0;
         }
         
         #detailModal .tab-btn {
             flex: 1;
             padding: 15px 20px;
             background: none;
             border: none;
             cursor: pointer;
             font-size: 14px;
             font-weight: 500;
             color: #6b7280;
             transition: all 0.2s;
             border-bottom: 3px solid transparent;
         }
         
         #detailModal .tab-btn:hover {
             background: #f3f4f6;
             color: #374151;
         }
         
         #detailModal .tab-btn.active {
             background: white !important;
             color: #3b82f6 !important;
             border-bottom-color: #3b82f6 !important;
         }
         
         /* 탭 콘텐츠 - 모달 전용 */
         #detailModal .tab-content {
             position: relative;
             flex: 1;
             overflow: hidden;
             display: block !important; /* 기존 CSS 우선순위보다 높게 */
         }
         
         #detailModal .tab-panel {
             display: none !important;
             padding: 0;
             height: 100%;
             overflow-y: auto;
             visibility: hidden;
             opacity: 0;
             transition: all 0.2s ease;
         }
         
         #detailModal .tab-panel.active {
             display: block !important;
             visibility: visible !important;
             opacity: 1 !important;
         }
         
         #detailModal .detail-section {
             background: #f8fafc !important;
             border-radius: 8px;
             padding: 25px;
             margin: 25px;
             margin-bottom: 20px;
             display: block !important;
         }
         
         #detailModal .detail-section:last-child {
             margin-bottom: 0;
         }
         
         .section-title {
             font-size: 16px;
             font-weight: 600;
             color: #1f2937;
             margin: 0 0 15px 0;
             display: flex;
             align-items: center;
             gap: 8px;
         }
         
         .section-header {
             display: flex;
             justify-content: space-between;
             align-items: center;
             margin-bottom: 15px;
         }
         
         #detailModal .info-grid {
             display: grid !important;
             grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
             gap: 15px;
             margin-bottom: 15px;
         }
         
         #detailModal .info-item {
             display: flex !important;
             flex-direction: column;
             gap: 5px;
         }
         
         #detailModal .info-item.full-width {
             grid-column: 1 / -1;
         }
         
         #detailModal .info-item label {
             font-size: 13px;
             font-weight: 500;
             color: #6b7280;
             text-transform: uppercase;
             letter-spacing: 0.5px;
             display: block !important;
         }
         
         #detailModal .info-item span,
         #detailModal .info-item h3 {
             font-size: 14px;
             color: #374151;
             margin: 0;
             padding: 8px 12px;
             background: white;
             border-radius: 6px;
             border: 1px solid #e5e7eb;
             display: block !important;
         }
         
         #detailModal .info-item h3 {
             font-size: 16px;
             font-weight: 600;
             color: #1f2937;
         }
         
         #detailModal .content-box {
             min-height: 80px;
             padding: 12px;
             background: white;
             border-radius: 6px;
             border: 1px solid #e5e7eb;
             line-height: 1.6;
             display: block !important;
         }
         
         #detailModal .thumbnail-preview {
             padding: 12px;
             background: white;
             border-radius: 6px;
             border: 1px solid #e5e7eb;
             min-height: 80px;
             display: flex !important;
             align-items: center;
             justify-content: center;
             color: #6b7280;
         }
         
         #detailModal .thumbnail-preview img {
             max-width: 100%;
             max-height: 120px;
             border-radius: 4px;
         }
         
         #detailModal .attachments-list {
             padding: 12px;
             background: white;
             border-radius: 6px;
             border: 1px solid #e5e7eb;
             min-height: 80px;
             display: block !important;
         }
         
         .attachment-item {
             display: flex;
             align-items: center;
             gap: 8px;
             padding: 6px 0;
             border-bottom: 1px solid #f3f4f6;
         }
         
         .attachment-item:last-child {
             border-bottom: none;
         }
         
         .attachment-item a {
             color: #3b82f6;
             text-decoration: none;
             font-size: 14px;
         }
         
         .attachment-item a:hover {
             text-decoration: underline;
         }
         
         /* 작업자 통계 - 모달 전용 */
         #detailModal .applicant-stats {
             display: flex !important;
             gap: 20px;
         }
         
         #detailModal .stat-item {
             font-size: 14px;
             color: #6b7280;
             display: inline-block !important;
         }
         
         #detailModal .stat-item strong {
             color: #1f2937;
             font-size: 16px;
         }
         
         /* 작업자 테이블 - 모달 전용 */
         #detailModal .applicants-table-wrapper {
             background: white;
             border-radius: 8px;
             overflow: visible;
             border: 1px solid #e5e7eb;
             display: block !important;
         }
         
         #detailModal .applicants-table {
             width: 100%;
             border-collapse: collapse;
             min-width: 825px;
             display: table !important;
         }
         
         .applicants-table th,
         .applicants-table td {
             padding: 6px 8px;
             text-align: left;
             border-bottom: 1px solid #f3f4f6;
             font-size: 12px;
             white-space: nowrap;
             overflow: hidden;
             text-overflow: ellipsis;
         }
         
         /* 체크박스 스타일 */
         .applicants-table input[type="checkbox"] {
             width: 16px;
             height: 16px;
             cursor: pointer;
         }
         
         .applicants-table th {
             background: #f8fafc;
             font-weight: 600;
             color: #374151;
             text-align: center;
             position: sticky;
             top: 0;
             z-index: 1;
         }
         
         .applicants-table td {
             color: #6b7280;
         }
         
         .applicants-table tbody tr {
             cursor: pointer;
             transition: background-color 0.2s ease;
         }
         
         .applicants-table tbody tr:hover {
             background: #f9fafb;
         }
         
         .applicant-status {
             padding: 4px 8px;
             border-radius: 12px;
             font-size: 12px;
             font-weight: 500;
             text-align: center;
         }
         
         .status-pending {
             background: #fef3c7;
             color: #d97706;
         }
         
         .status-approved {
             background: #d1fae5;
             color: #059669;
         }
         
         .status-rejected {
             background: #fee2e2;
             color: #dc2626;
         }
         
         .status-cancelled {
             background: #fecaca;
             color: #dc2626;
         }
         
         /* 일괄 처리 버튼 호버 효과 */
         .batch-btn.btn-approve:hover {
             background: #059669 !important;
         }
         
         .batch-btn.btn-reject:hover {
             background: #dc2626 !important;
         }
         
         /* 모달 푸터 버튼 */
         .btn-secondary {
             background: #6b7280;
             color: white;
             border: none;
             border-radius: 6px;
             padding: 10px 20px;
             font-size: 14px;
             cursor: pointer;
             transition: background-color 0.2s;
         }
         
         .btn-secondary:hover {
             background: #4b5563;
         }
         
         .btn-edit {
             background: #3b82f6;
             color: white;
             border: none;
             border-radius: 6px;
             padding: 10px 20px;
             font-size: 14px;
             cursor: pointer;
             transition: background-color 0.2s;
         }
         
         .btn-edit:hover {
             background: #2563eb;
         }
         
         .btn-confirm {
             background: #10b981;
             color: white;
             border: none;
             border-radius: 6px;
             padding: 10px 20px;
             font-size: 14px;
             cursor: pointer;
             transition: background-color 0.2s;
         }
         
         .btn-confirm:hover {
             background: #059669;
         }

        /* 반응형 */
        @media (max-width: 768px) {
            body {
                padding: 20px;
            }
            
            .page-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .info-sections-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .info-grid-2col {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .file-info-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .download-buttons {
                flex-direction: column;
                width: 100%;
                gap: 8px;
            }
            
            .download-btn {
                width: 100%;
                justify-content: center;
            }
            
            .tab-nav {
                flex-direction: column;
            }
            
            .tab-button {
                padding: 12px 15px;
                font-size: 14px;
                text-align: left;
            }
            
            .work-info-grid {
                grid-template-columns: 1fr;
            }
            
            .assignment-section {
                flex-direction: column;
                align-items: stretch;
            }
            
            .worker-select {
                min-width: auto;
                width: 100%;
            }
            
            .modal-container {
                width: 95%;
                margin: 20px;
                max-height: calc(100vh - 40px);
            }
            
            .form-row {
                flex-direction: column;
                gap: 15px;
            }
            
            .simple-editor-toolbar {
                flex-wrap: wrap;
            }
            
            .detail-modal {
                width: 98%;
                margin: 10px;
                height: 90vh;
                max-height: 90vh;
            }
            
            .tab-btn {
                padding: 12px 15px;
                font-size: 13px;
            }
            
            .detail-section {
                margin: 15px;
                padding: 20px;
            }
            
            .section-header {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }
            
            .applicant-stats {
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .applicants-table {
                min-width: 100%;
                font-size: 10px;
            }
            
            .applicants-table th,
            .applicants-table td {
                padding: 4px 2px;
                font-size: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- 페이지 헤더 -->
    <div class="page-header">
        <h1 class="page-title">
            <span>📄</span>
            작업 상세정보
        </h1>
        <div style="display: flex; gap: 10px;">
            <button class="cancel-button" onclick="cancelWork()">
                <span>✕</span>
                작업취소
            </button>
        <button class="back-button" onclick="goBack()">
            <span>←</span>
            목록으로 돌아가기
        </button>
        </div>
    </div>
    
    <!-- 탭 네비게이션 -->
    <div class="tab-container">
        <div class="tab-nav">
            <button class="tab-button active" onclick="switchTab('detail')">📋 작업 상세정보</button>
            <button class="tab-button" onclick="switchTab('management')">⚙️ 작업관리</button>
        </div>

        <!-- 작업 상세정보 탭 -->
        <div id="detail-tab" class="tab-content active">
            <!-- 첫 번째 행: 요청 정보 + 작업 정보 -->
            <div class="info-sections-grid">
                <!-- 요청 정보 -->
                <div class="info-section">
                    <h2 class="section-title">
                        <span>📋</span>
                        요청 정보
                    </h2>
                    <div class="info-grid">
                        <span class="info-label">녹취원본</span>
                        <span class="info-value">신청</span>
                        
                        <span class="info-label">추가 신청</span>
                        <span class="info-value">2부</span>
                        
                        <span class="info-label">수령인</span>
                        <span id="recipient-name" class="info-value">황진은</span>
                        
                        <span class="info-label">수령인 연락처</span>
                        <span id="recipient-contact" class="info-value">010-4585-3518</span>
                        
                        <span class="info-label">수령인 주소</span>
                        <span class="info-value">전남 나주시 그린로 198 10층</span>
                    </div>
                </div>

                <!-- 작업 정보 -->
                <div class="info-section">
                    <h2 class="section-title">
                        <span>⚙️</span>
                        작업 정보
                    </h2>
                    <div class="info-grid">
                        <span class="info-label">구간선택</span>
                        <span class="info-value">전체 구간 (00:00 ~ 01:54)</span>
                        
                        <span class="info-label">화자설정</span>
                        <span class="info-value">2명<br>화자 1 : 차정훈 (부드러운 목소리)<br>화자 2 : 김철수 (저음에 낮게 깔리는 목소리)</span>
                    </div>
                </div>
            </div>

            <!-- 두 번째 행: 결제 정보 + 파일 정보 -->
            <div class="info-sections-grid" style="grid-template-columns: 750px 750px;">
                <!-- 결제 정보 -->
                <div class="info-section">
                    <h2 class="section-title">
                        <span>💳</span>
                        결제 정보
                    </h2>
                    <div class="info-grid">
                        <span class="info-label">의뢰자명</span>
                        <span id="client-name" class="info-value">황진은</span>
                        
                        <span class="info-label">연락처</span>
                        <span id="client-contact" class="info-value">010-4585-3518</span>
                        
                        <span class="info-label">결제타입</span>
                        <span id="payment-method" class="info-value">신용카드</span>
                        
                        <span class="info-label">결제금액</span>
                        <span id="payment-amount" class="info-value highlight">40,000원</span>
                        
                        <span class="info-label">입금자명</span>
                        <span id="depositor-name" class="info-value">황진은</span>
                        
                        <span class="info-label">결제일시</span>
                        <span id="payment-date" class="info-value">2025-07-30 17:39</span>
                    </div>
                </div>

                <!-- 파일 정보 -->
                <div class="info-section">
                    <h2 class="section-title">
                        <span>📁</span>
                        파일 정보
                    </h2>
                    <div class="info-grid">
                        <span class="info-label">녹음일시</span>
                        <span class="info-value">2025-07-30</span>
                        
                        <span class="info-label">녹음장소</span>
                        <span class="info-value">서울특별시 강남구 테헤란로 123</span>
                        
                        <span class="info-label">진행 상태</span>
                        <div>
                            <span id="work-status" class="status-badge status-inprogress">초안완성</span>
                        </div>
                    </div>
                    
                    <!-- 음성 플레이어 및 다운로드 영역 -->
                    <div class="file-player-section">
                        <div class="file-info-header">
                            <div>
                                <div style="font-weight: 600; color: #374151; margin-bottom: 5px; font-size: 14px;">파일 정보</div>
                                <span id="file-name-display" class="file-name-info">음성원본 1개 선교월령01.m4a / 재생시간: 00:03:30</span>
                            </div>
                        </div>
                        
                        <!-- 오디오 플레이어 -->
                        <audio class="audio-player" controls>
                            <source id="audio-source" src="#" type="audio/mpeg">
                            <source id="audio-source-m4a" src="#" type="audio/mp4">
                            브라우저가 오디오를 지원하지 않습니다.
                        </audio>
                        

                    </div>
                </div>

                <!-- 세 번째 행: 고객 세부 요청사항 + 고객 첨부파일 -->
                <div class="info-sections-grid" style="grid-template-columns: 750px 750px;">
                    <!-- 고객 세부 요청사항 -->
                    <div class="info-section">
                        <h2 class="section-title">
                            <span>📝</span>
                            고객 세부 요청사항
                        </h2>
                        <div style="display: flex; gap: 15px;">
                            <!-- 왼쪽: 원본 요청사항 -->
                            <div style="flex: 1;">
                                <textarea id="customer-request-original" placeholder="고객의 세부 요청사항을 입력하세요..." style="width: 100%; min-height: 120px; padding: 15px; border: 1px solid #d1d5db; border-radius: 8px; font-size: 14px; line-height: 1.5; resize: vertical; font-family: inherit;" readonly>고객님께서 전문 용어는 가급적 한글로 번역하여 표기해 주시고, 발화자 구분을 명확하게 해달라고 요청하셨습니다. 특히 의료진과 환자 대화에서 전문 의학 용어들은 일반인이 이해하기 쉽도록 풀어서 설명해 주시기 바랍니다.</textarea>
                            </div>
                            
                            <!-- 오른쪽: 공유용 요청사항 -->
                            <div style="flex: 1;">
                                <textarea id="customer-request-share" placeholder="공유할 요청사항을 편집하세요..." style="width: 100%; min-height: 120px; padding: 15px; border: 1px solid #d1d5db; border-radius: 8px; font-size: 14px; line-height: 1.5; resize: vertical; font-family: inherit;"></textarea>
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; margin-top: 15px;">
                            <button onclick="copyToShareBox()" style="background: #10b981; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 500;">
                                → 오른쪽으로 복사
                            </button>
                            <button id="share-request-btn" onclick="shareCustomerRequest()" data-status="idle" style="background: #3b82f6; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 500;">
                                공유
                            </button>
                        </div>
                    </div>

                    <!-- 고객 첨부파일 -->
                    <div class="info-section">
                        <h2 class="section-title">
                            <span>📎</span>
                            고객 첨부파일
                        </h2>
                        <div class="file-list" style="max-height: 150px; overflow-y: auto; margin-bottom: 15px;">
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f3f4f6;">
                                <div style="display: flex; align-items: center; flex: 1;">
                                    <input type="checkbox" id="file1" onchange="handleFileSelection(this)" style="margin-right: 12px;">
                                    <span style="color: #3b82f6; cursor: pointer; text-decoration: none; font-size: 13px;" onclick="downloadFile('참고자료_의료진_대화_예시.pdf')">참고자료_의료진_대화_예시.pdf</span>
                </div>
                                <span id="file1-status" style="font-size: 10px; color: #6b7280; min-width: 40px; text-align: center;">대기중</span>
                            </div>
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f3f4f6;">
                                <div style="display: flex; align-items: center; flex: 1;">
                                    <input type="checkbox" id="file2" onchange="handleFileSelection(this)" style="margin-right: 12px;">
                                    <span style="color: #3b82f6; cursor: pointer; text-decoration: none; font-size: 13px;" onclick="downloadFile('전사_양식_템플릿.hwp')">전사_양식_템플릿.hwp</span>
                                </div>
                                <span id="file2-status" style="font-size: 10px; color: #6b7280; min-width: 40px; text-align: center;">대기중</span>
                            </div>
                            <div style="display: flex; align-items: center; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f3f4f6;">
                                <div style="display: flex; align-items: center; flex: 1;">
                                    <input type="checkbox" id="file3" onchange="handleFileSelection(this)" style="margin-right: 12px;">
                                    <span style="color: #3b82f6; cursor: pointer; text-decoration: none; font-size: 13px;" onclick="downloadFile('용어_사전.xlsx')">용어_사전.xlsx</span>
                                </div>
                                <span id="file3-status" style="font-size: 10px; color: #6b7280; min-width: 40px; text-align: center;">대기중</span>
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: flex-end; gap: 8px;">
                            <button onclick="downloadAllFiles()" style="background: #10b981; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 500;">
                                모두 다운로드
                            </button>
                            <button onclick="shareCustomerFiles()" style="background: #3b82f6; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 500;">
                                공유
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 작업관리 탭 -->
        <div id="management-tab" class="tab-content">
            <!-- 기본 파일 정보 -->
            <div class="work-management-section">
                <h2 class="section-title">
                    <span>📁</span>
                    파일 정보
                </h2>
                    <div class="info-grid">
                        <span class="info-label">파일이름</span>
                        <span id="mgmt-file-name" class="info-value">제목없는1.2 북터키스 아이키.m4a</span>
                        
                        <span class="info-label">재생시간</span>
                        <span id="mgmt-work-time" class="info-value">00:01:54</span>
                </div>
            </div>

            <!-- 웍스파이 프로젝트 등록 -->
            <div class="work-management-section">
                <h2 class="section-title">
                    <span>🚀</span>
                    웍스파이 프로젝트 등록
                </h2>
                
                <!-- 초기 상태: 버튼만 표시 -->
                <div id="workspy-empty-state" style="display: block; text-align: center; padding: 40px 20px; background: #f9fafb; border-radius: 8px; border: 2px dashed #d1d5db;">
                    <div style="color: #6b7280; margin-bottom: 15px; font-size: 32px;">📋</div>
                    <p style="color: #374151; font-size: 16px; font-weight: 500; margin-bottom: 10px;">등록된 프로젝트가 없습니다</p>
                    <p style="color: #6b7280; font-size: 14px; margin-bottom: 20px;">웍스파이에 새 프로젝트를 등록하여 작업자를 모집해보세요</p>
                    <button class="btn btn-primary" onclick="openWorksbyProjectModal()">
                        <span>➕</span>
                        새 프로젝트 등록
                    </button>
                </div>
                
                <!-- 프로젝트 생성 후 상태: 테이블 표시 -->
                <div id="workspy-project-table" style="display: none;">
                    <div style="margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #374151; font-weight: 600; font-size: 14px;" class="project-count">
                            총 <span style="color: #3b82f6;" class="total-count">0</span>개의 웍스파이 프로젝트
                        </div>
                    </div>
                    <div style="overflow-x: auto;">
                        <table id="workspy-table" style="width: 100%; border-collapse: collapse; table-layout: fixed;">
                            <thead>
                                <tr style="background: #f8f9fa;">
                                    <th style="width: 40px; padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151;">NO</th>
                                    <th style="width: 60px; padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151;">썸네일</th>
                                    <th style="width: 277px; padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151;">프로젝트명</th>
                                    <th style="width: 70px; padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151;">서비스</th>
                                    <th style="width: 70px; padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151;">작업자</th>
                                    <th style="width: 264px; padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151;">모집기간</th>
                                    <th style="width: 93px; padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151;">모집상태</th>
                                    <th style="width: 264px; padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151;">작업기간</th>
                                    <th style="width: 80px; padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151;">작업상태</th>
                                </tr>
                            </thead>
                            <tbody id="worksby-table-body">
                                <!-- 동적으로 생성될 프로젝트 데이터 -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- 작업관리 테이블 -->
            <div id="work-management-table-section" class="work-management-section" style="display: none;">
                <h2 class="section-title">
                    <span>📋</span>
                    작업관리
                </h2>
                
                <div style="margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;">
                    <div style="color: #374151; font-weight: 600; font-size: 14px;">
                        총 <span style="color: #3b82f6;">1</span>개의 작업 파일
                    </div>
                </div>
                
                <div style="overflow-x: auto;">
                    <table style="width: 100%; min-width: 1200px; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #f8f9fa;">
                                <th style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151; width: 25%;">파일이름</th>
                                <th style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151; width: 10%;">재생시간</th>
                                <th style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151; width: 10%;">작업자</th>
                                <th style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151; width: 12%;">작업자 배정</th>
                                <th style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151; width: 13%;">전사툴</th>
                                <th style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151; width: 18%;">산출물 업로드</th>
                                <th style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151; width: 12%;">작업자 상태</th>
                            </tr>
                        </thead>
                        <tbody id="work-management-table-body">
                            <tr style="border-bottom: 1px solid #e5e7eb;">
                                <td style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;">선교월령01.m4a</td>
                                <td style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;">00:03:30</td>
                                <td style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;" id="assigned-worker-cell">-</td>
                                <td style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;">
                                    <button class="btn" onclick="openWorkerAssignmentModal('선교월령01.m4a')" 
                                            style="padding: 6px 12px; font-size: 11px; background: #8b5cf6; color: white; border: none; border-radius: 4px; cursor: pointer; margin: 0 auto; display: inline-block;">
                                        <span>👤</span>
                                        작업자 배정
                                    </button>
                                </td>
                                <td style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;">
                                    <div style="display: flex; justify-content: center; gap: 6px; flex-wrap: nowrap;">
                                        <button class="tool-btn" style="padding: 6px 10px; font-size: 11px; white-space: nowrap; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer;" onclick="launchTranscriptionTool()">
                                            🚀 전사툴 실행
                                        </button>
                                        <button class="tool-btn" style="padding: 6px 10px; font-size: 11px; white-space: nowrap; background: #f59e0b; color: white; border: none; border-radius: 4px; cursor: pointer;" onclick="launchReviewTool()">
                                            ✅ 검수툴 실행
                                        </button>
                                    </div>
                                </td>
                                <td style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;">
                                    <div style="display: flex; justify-content: center; gap: 6px; flex-wrap: nowrap;">
                                        <button class="upload-btn" style="padding: 6px 10px; font-size: 11px; white-space: nowrap; background: #6b7280; color: white; border: none; border-radius: 4px; cursor: pointer;" onclick="uploadNotarizedFile()">
                                            📄 공증파일
                                        </button>
                                        <button class="upload-btn" style="padding: 6px 10px; font-size: 11px; white-space: nowrap; background: #6b7280; color: white; border: none; border-radius: 4px; cursor: pointer;" onclick="uploadFinalOutput()">
                                            📁 최종산출물
                                        </button>
                                    </div>
                                </td>
                                <td style="padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;">
                                    <span class="status-badge status-inprogress">작업중</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
            </div>

            <!-- 파일공유 영역 -->
            <div class="work-management-section">
                <h2 class="section-title">
                    <span>📁</span>
                    파일공유
                </h2>
                
                <div style="margin-bottom: 15px;">
                    <p style="color: #6b7280; font-size: 14px; margin: 0;">관리자/검수자/작업자 파일 공유</p>
                </div>
                
                <div style="position: relative;">
                    <!-- 파일 목록 영역 -->
                    <div style="background: #f8f9fa; border: 1px solid #e5e7eb; border-radius: 8px; min-height: 200px; padding: 15px; padding-bottom: 60px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #e5e7eb;">
                            <span style="font-weight: 600; color: #374151;">파일 이름</span>
                        </div>
                        
                        <!-- 공유 파일 목록 -->
                        <div id="shared-files-list">
                            <div style="display: flex; align-items: center; padding: 6px 0; border-bottom: 1px solid #e5e7eb;">
                                <input type="checkbox" style="margin-right: 18px;">
                                <span style="color: #3b82f6; cursor: pointer; text-decoration: none; font-size: 12px;">소리바로_HWP_템플릿_1번(기본) (1).hwp</span>
                            </div>
                            <div style="display: flex; align-items: center; padding: 6px 0; border-bottom: 1px solid #e5e7eb;">
                                <input type="checkbox" style="margin-right: 18px;">
                                <span style="color: #3b82f6; cursor: pointer; text-decoration: none; font-size: 12px;">소리바로_HWP_템플릿_1번(기본) (2).hwp</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 버튼 영역 (오른쪽 하단) -->
                    <div style="position: absolute; bottom: 15px; right: 15px; display: flex; gap: 8px;">
                        <button onclick="addSharedFile()" style="background: #f59e0b; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 500;">
                            파일추가
                        </button>
                        <button onclick="deleteSharedFile()" style="background: #ef4444; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 500;">
                            삭제
                    </button>
                </div>
                </div>
            </div>

            <!-- 작업 특이사항 -->
            <div class="work-management-section">
                <h2 class="section-title">
                    <span>📝</span>
                    작업 특이사항
                </h2>
                
                <div style="position: relative;">
                    <textarea id="work-notes" placeholder="작업과 관련된 특이사항을 입력하세요..." style="width: 100%; min-height: 150px; padding: 15px; border: 1px solid #d1d5db; border-radius: 8px; font-size: 14px; line-height: 1.5; resize: vertical; font-family: inherit;" onchange="markNotesAsModified()"></textarea>
                    
                    <div style="display: flex; justify-content: flex-end; margin-top: 15px;">
                        <button onclick="saveWorkNotes()" style="background: #3b82f6; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 500;">
                            저장
                    </button>
                </div>
            </div>
            </div>


        </div>
    </div>

    <script>
        // URL 파라미터에서 데이터 추출
        function getUrlParams() {
            const urlParams = new URLSearchParams(window.location.search);
            return {
                orderNumber: urlParams.get('orderNumber'),
                fileName: urlParams.get('fileName'),
                client: urlParams.get('client'),
                contact: urlParams.get('contact'),
                requestDate: urlParams.get('requestDate'),
                workTime: urlParams.get('workTime'),
                paymentAmount: urlParams.get('paymentAmount'),
                paymentMethod: urlParams.get('paymentMethod'),
                worker: urlParams.get('worker'),
                status: urlParams.get('status')
            };
        }

        // 페이지 로드 시 데이터 설정
        document.addEventListener('DOMContentLoaded', function() {
            const params = getUrlParams();
            
            // 요청 정보 섹션
            if (params.requestDate) {
                const requestDateTime = decodeURIComponent(params.requestDate);
                const recordDate = requestDateTime.split(' ')[0]; // 날짜 부분만 추출
                document.getElementById('record-date').textContent = recordDate;
            }
            if (params.client) {
                document.getElementById('recipient-name').textContent = decodeURIComponent(params.client);
            }
            if (params.contact) {
                document.getElementById('recipient-contact').textContent = decodeURIComponent(params.contact);
            }
            
            // 결제 정보 섹션
            if (params.client) {
                document.getElementById('client-name').textContent = decodeURIComponent(params.client);
            }
            if (params.contact) {
                document.getElementById('client-contact').textContent = decodeURIComponent(params.contact);
            }
            if (params.paymentMethod) {
                document.getElementById('payment-method').textContent = decodeURIComponent(params.paymentMethod);
            }
            if (params.paymentAmount) {
                const paymentAmount = decodeURIComponent(params.paymentAmount);
                document.getElementById('payment-amount').textContent = paymentAmount + '원';
            }
            if (params.requestDate) {
                document.getElementById('request-date').textContent = decodeURIComponent(params.requestDate);
            }
            
            // 파일 정보 섹션 (작업 상세정보 탭)
            if (params.fileName) {
                const fileName = decodeURIComponent(params.fileName);
                const workTime = params.workTime ? decodeURIComponent(params.workTime) : '00:03:30';
                document.getElementById('file-name-display').textContent = `음성원본 1개 ${fileName} / 재생시간: ${workTime}`;
                
                // 작업관리 탭에도 동일한 정보 설정
                document.getElementById('mgmt-file-name').textContent = fileName;
                document.getElementById('mgmt-work-time').textContent = workTime;
            }
            if (params.status) {
                const statusElement = document.getElementById('work-status');
                const statusText = decodeURIComponent(params.status);
                statusElement.textContent = statusText;
                // 상태에 따라 클래스 설정
                statusElement.className = 'status-badge ' + getStatusClass(statusText);
                
                // 작업관리 탭에도 동일한 상태 설정
                const mgmtStatusElement = document.getElementById('mgmt-work-status');
                mgmtStatusElement.textContent = statusText;
                mgmtStatusElement.className = 'status-badge ' + getStatusClass(statusText);
            }
            if (params.worker) {
                const workerName = decodeURIComponent(params.worker);
                document.getElementById('mgmt-worker').textContent = workerName;
            }
        });

        // 상태에 따른 CSS 클래스 반환
        function getStatusClass(status) {
            if (status.includes('미배정')) return 'status-cancelled';
            if (status.includes('진행') || status.includes('초안')) return 'status-inprogress';
            if (status.includes('완료')) return 'status-completed';
            if (status.includes('취소')) return 'status-cancelled';
            return 'status-inprogress';
        }

        // 뒤로 가기
        function goBack() {
            try {
                // 방법 1: iframe의 parent에서 이전 페이지 로드
                if (window.parent && window.parent !== window && typeof window.parent.loadPage === 'function') {
                    console.log('parent.loadPage로 이전 페이지 이동');
                    window.parent.loadPage('pages/soribaro/b2c/work-management.html');
                    return;
                }
            } catch (e) {
                console.log('parent.loadPage 실패:', e);
            }
            
            try {
                // 방법 2: 브라우저 히스토리 back
                if (window.history.length > 1) {
                    console.log('history.back() 사용');
                    window.history.back();
                    return;
                }
            } catch (e) {
                console.log('history.back() 실패:', e);
            }
            
            try {
                // 방법 3: 직접 작업현황관리 페이지로 이동
                console.log('직접 페이지 이동');
                window.location.href = 'work-management.html';
            } catch (e) {
                console.log('직접 페이지 이동 실패:', e);
                alert('이전 페이지로 돌아갈 수 없습니다.');
            }
        }

        // 작업 취소
        function cancelWork() {
            const message = '해당파일과 진행중인 작업이 모두 종료 됩니다.\n종료후에는 재작업이 불가합니다.\n작업을 취소 하시겠습니까?';
            
            if (confirm(message)) {
                // 작업 취소 로직 (실제 구현에서는 서버 API 호출)
                console.log('작업이 취소되었습니다.');
                alert('작업이 취소되었습니다.');
                
                // 목록으로 돌아가기
                goBack();
            }
        }

        // 다운로드 기능
        function downloadTXT() {
            // 실제 프로젝트에서는 서버에서 TXT 파일을 다운로드받는 API 호출
            const params = getUrlParams();
            const fileName = params.fileName ? decodeURIComponent(params.fileName).replace(/\.[^/.]+$/, "") : "transcript";
            
            // 샘플 텍스트 데이터 (실제로는 서버에서 받아옴)
            const sampleText = `[화자1] 안녕하세요. 오늘 회의를 시작하겠습니다.\n[화자2] 네, 안녕하세요. 준비되었습니다.\n[화자1] 먼저 첫 번째 안건부터 논의해보겠습니다.\n[화자2] 좋습니다. 검토해보겠습니다.`;
            
            // 파일 다운로드
            const blob = new Blob([sampleText], { type: 'text/plain;charset=utf-8' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${fileName}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        function downloadJSON() {
            // 실제 프로젝트에서는 서버에서 JSON 파일을 다운로드받는 API 호출
            const params = getUrlParams();
            const fileName = params.fileName ? decodeURIComponent(params.fileName).replace(/\.[^/.]+$/, "") : "transcript";
            
            // 샘플 JSON 데이터 (실제로는 서버에서 받아옴)
            const sampleData = {
                file_info: {
                    name: fileName,
                    duration: params.workTime ? decodeURIComponent(params.workTime) : "00:03:30",
                    format: "M4A"
                },
                speakers: [
                    { id: 1, name: "화자1" },
                    { id: 2, name: "화자2" }
                ],
                transcript: [
                    { speaker: 1, start_time: "00:00:00", end_time: "00:00:05", text: "안녕하세요. 오늘 회의를 시작하겠습니다." },
                    { speaker: 2, start_time: "00:00:06", end_time: "00:00:10", text: "네, 안녕하세요. 준비되었습니다." },
                    { speaker: 1, start_time: "00:00:11", end_time: "00:00:18", text: "먼저 첫 번째 안건부터 논의해보겠습니다." },
                    { speaker: 2, start_time: "00:00:19", end_time: "00:00:23", text: "좋습니다. 검토해보겠습니다." }
                ]
            };
            
            // 파일 다운로드
            const blob = new Blob([JSON.stringify(sampleData, null, 2)], { type: 'application/json;charset=utf-8' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${fileName}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        // 탭 전환 기능
        function switchTab(tabName) {
            // 모든 탭 버튼과 콘텐츠 비활성화
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // 선택된 탭 활성화
            document.querySelector(`button[onclick="switchTab('${tabName}')"]`).classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }



        // 전사툴 실행 기능
        function launchTranscriptionTool() {
            alert('전사툴을 실행합니다.\n\n실제 환경에서는 전사 작업 도구가 새 창에서 열립니다.');
            // 실제로는 전사툴 URL로 새 창 열기
            // window.open('/transcription-tool', '_blank');
        }

        // 검수툴 실행 기능
        function launchReviewTool() {
            alert('검수툴을 실행합니다.\n\n실제 환경에서는 검수 작업 도구가 새 창에서 열립니다.');
            // 실제로는 검수툴 URL로 새 창 열기
            // window.open('/review-tool', '_blank');
        }

        // 공증파일 업로드 기능
        function uploadNotarizedFile() {
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.accept = '.pdf,.doc,.docx';
            fileInput.onchange = function(e) {
                if (e.target.files.length > 0) {
                    const fileName = e.target.files[0].name;
                    alert(`공증파일이 업로드되었습니다:\n${fileName}\n\n실제 환경에서는 서버로 파일이 전송됩니다.`);
                }
            }
            fileInput.click();
        }

        // 최종산출물 업로드 기능
        function uploadFinalOutput() {
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.accept = '.txt,.docx,.pdf,.zip';
            fileInput.onchange = function(e) {
                if (e.target.files.length > 0) {
                    const fileName = e.target.files[0].name;
                    alert(`최종산출물이 업로드되었습니다:\n${fileName}\n\n실제 환경에서는 서버로 파일이 전송됩니다.`);
                }
            }
            fileInput.click();
        }

        // 공유 파일 추가 기능
        function addSharedFile() {
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.multiple = true;
            fileInput.accept = '.hwp,.doc,.docx,.pdf,.txt,.zip';
            fileInput.onchange = function(e) {
                if (e.target.files.length > 0) {
                    const filesList = document.getElementById('shared-files-list');
                    
                    for (let i = 0; i < e.target.files.length; i++) {
                        const fileName = e.target.files[i].name;
                        
                        // 새 파일 항목 생성
                        const fileItem = document.createElement('div');
                        fileItem.style.cssText = 'display: flex; align-items: center; padding: 6px 0; border-bottom: 1px solid #e5e7eb;';
                        fileItem.innerHTML = `
                            <input type="checkbox" style="margin-right: 18px;">
                            <span style="color: #3b82f6; cursor: pointer; text-decoration: none; font-size: 12px;">${fileName}</span>
                        `;
                        
                        filesList.appendChild(fileItem);
                    }
                    
                    alert(`${e.target.files.length}개의 파일이 공유 목록에 추가되었습니다.`);
                }
            }
            fileInput.click();
        }

        // 공유 파일 삭제 기능
        function deleteSharedFile() {
            const checkboxes = document.querySelectorAll('#shared-files-list input[type="checkbox"]:checked');
            
            if (checkboxes.length === 0) {
                alert('삭제할 파일을 선택해주세요.');
                return;
            }
            
            if (confirm(`선택된 ${checkboxes.length}개의 파일을 삭제하시겠습니까?`)) {
                checkboxes.forEach(checkbox => {
                    checkbox.parentElement.remove();
                });
                alert(`${checkboxes.length}개의 파일이 삭제되었습니다.`);
            }
        }

        // 작업 특이사항 수정 표시
        let notesModified = false;
        function markNotesAsModified() {
            notesModified = true;
        }

        // 작업 특이사항 저장 기능
        function saveWorkNotes() {
            const notes = document.getElementById('work-notes').value;
            
            // 실제 환경에서는 서버로 데이터 전송
            setTimeout(() => {
                notesModified = false;
                alert('작업 특이사항이 저장되었습니다.');
            }, 500);
        }

        // 왼쪽 내용을 오른쪽으로 복사
        function copyToShareBox() {
            const originalText = document.getElementById('customer-request-original').value;
            document.getElementById('customer-request-share').value = originalText;
        }

        // 고객 세부 요청사항 공유 기능 (업데이트됨)
        function shareCustomerRequest() {
            const shareBtn = document.getElementById('share-request-btn');
            const currentStatus = shareBtn.getAttribute('data-status');
            
            if (currentStatus === 'idle') {
                // 공유 실행
                const shareText = document.getElementById('customer-request-share').value;
                
                if (!shareText.trim()) {
                    alert('공유할 요청사항이 없습니다.');
                    return;
                }
                
                // 실제 환경에서는 공유 API 호출
                alert('고객 세부 요청사항이 작업자에게 공유되었습니다.');
                
                // 버튼 상태를 "공유중"으로 변경
                shareBtn.setAttribute('data-status', 'sharing');
                shareBtn.textContent = '공유중';
                shareBtn.style.background = '#f59e0b'; // 주황색
                
            } else if (currentStatus === 'sharing') {
                // 공유 취소 확인
                if (confirm('공유를 취소하시겠습니까?')) {
                    // 버튼 상태를 "공유"로 되돌리기
                    shareBtn.setAttribute('data-status', 'idle');
                    shareBtn.textContent = '공유';
                    shareBtn.style.background = '#3b82f6'; // 원래 파란색
                    
                    alert('공유가 취소되었습니다.');
                }
            }
        }

        // 개별 파일 다운로드 기능
        function downloadFile(fileName) {
            // 실제 환경에서는 서버에서 파일을 다운로드받는 API 호출
            console.log(`파일 다운로드: ${fileName}`);
            alert(`${fileName} 파일을 다운로드합니다.`);
        }

        // 파일 선택 처리
        function handleFileSelection(checkbox) {
            // 체크박스 선택만 처리, 다운로드 알림 제거
            // const fileName = checkbox.nextElementSibling.textContent;
            // if (checkbox.checked) {
            //     downloadFile(fileName);
            // }
        }

        // 모든 파일 다운로드 기능
        function downloadAllFiles() {
            const files = [
                '참고자료_의료진_대화_예시.pdf',
                '전사_양식_템플릿.hwp',
                '용어_사전.xlsx'
            ];
            
            // 실제 환경에서는 ZIP 파일로 압축하여 다운로드
            alert(`총 ${files.length}개 파일을 모두 다운로드합니다.`);
        }

        // 고객 첨부파일 공유 기능 (업데이트됨)
        function shareCustomerFiles() {
            const checkedFiles = document.querySelectorAll('input[type="checkbox"]:checked');
            
            if (checkedFiles.length === 0) {
                alert('공유할 파일을 선택해주세요.');
                return;
            }
            
            const fileNames = Array.from(checkedFiles).map(cb => cb.nextElementSibling.textContent);
            alert(`선택된 ${fileNames.length}개 파일이 작업자에게 공유되었습니다.`);
            
            // 선택된 파일들의 상태 업데이트
            checkedFiles.forEach(checkbox => {
                const fileId = checkbox.id;
                const statusElement = document.getElementById(`${fileId}-status`);
                if (statusElement) {
                    statusElement.textContent = '공유완료';
                    statusElement.style.color = '#10b981';
                }
                checkbox.checked = false; // 체크박스 해제
            });
        }



        // 웍스파이 프로젝트 등록 관련 변수
        let worksbyProjectData = null;
        let currentProjectData = null;

        // 웍스파이 프로젝트 등록 모달 열기
        function openWorksbyProjectModal() {
            document.getElementById('worksbyProjectModal').style.display = 'flex';
            
            // 시연용 더미 데이터 입력
            const params = getUrlParams();
            const fileName = params.fileName ? decodeURIComponent(params.fileName).replace(/\.[^/.]+$/, "") : "음성파일";
            
            // 오늘 날짜와 2주 후 날짜 계산
            const today = new Date();
            const twoWeeksLater = new Date();
            twoWeeksLater.setDate(today.getDate() + 14);
            
            const formatDate = (date) => {
                return date.toISOString().split('T')[0];
            };
            
            // 폼 필드에 더미 데이터 입력
            document.getElementById('worksbyServiceSelect').value = '소리바로';
            document.getElementById('worksbyProjectTitle').value = fileName + ' 전사 프로젝트';
            document.getElementById('worksbyProjectStartDate').value = formatDate(today);
            document.getElementById('worksbyProjectEndDate').value = formatDate(twoWeeksLater);
            document.getElementById('worksbyWorkerCount').value = '5';

            document.getElementById('worksbyBudgetAmount').value = '500000';

            
            // 리치 텍스트 에디터에 간소화된 내용 입력
            const contentEditor = document.getElementById('worksbyContentEditor');
            if (contentEditor) {
                contentEditor.innerHTML = `
                    사람 구합니다.<br>
                    사람 구합니다.<br>
                    사람 구합니다.
                `;
            }
            
            // 토글 스위치 설정
            document.getElementById('worksbyActiveToggle').checked = true;
            document.getElementById('worksbyImportantProject').checked = false;
            
            console.log('더미 데이터로 웍스파이 프로젝트 모달 초기화 완료');
        }

        // 웍스파이 프로젝트 등록 모달 닫기
        function closeWorksbyProjectModal() {
            document.getElementById('worksbyProjectModal').style.display = 'none';
            document.getElementById('worksbyProjectForm').reset();
            document.getElementById('worksbyContentEditor').innerHTML = '';
        }

        // 웍스파이 프로젝트 제출 처리
        function handleWorksbyProjectSubmit() {
            
            // 필수 필드 검증
            const service = document.getElementById('worksbyServiceSelect').value;
            const title = document.getElementById('worksbyProjectTitle').value;
            const startDate = document.getElementById('worksbyProjectStartDate').value;
            const endDate = document.getElementById('worksbyProjectEndDate').value;
            const workStartDate = document.getElementById('worksbyWorkStartDate').value;
            const workEndDate = document.getElementById('worksbyWorkEndDate').value;
            const qualification = document.getElementById('worksbyQualification').value;
            
            if (!service) {
                alert('서비스를 선택해주세요.');
                return;
            }
            if (!title.trim()) {
                alert('프로젝트명을 입력해주세요.');
                return;
            }
            if (!startDate) {
                alert('시작일을 입력해주세요.');
                return;
            }
            if (!endDate) {
                alert('종료일을 입력해주세요.');
                return;
            }
            // 작업기간 유효성은 선택된 경우에만 검사
            if ((workStartDate && !workEndDate) || (!workStartDate && workEndDate)) {
                alert('작업기간은 시작/종료일을 모두 입력해야 합니다.');
                return;
            }
            if (workStartDate && workEndDate && new Date(workEndDate) < new Date(workStartDate)) {
                alert('작업기간 종료일은 시작일보다 나중이어야 합니다.');
                return;
            }
            
            // 종료일이 시작일보다 이전인지 체크
            if (new Date(endDate) <= new Date(startDate)) {
                alert('종료일은 시작일보다 나중이어야 합니다.');
                return;
            }
            
            const formData = {
                service: service,
                title: title.trim(),
                startDate: startDate,
                endDate: endDate,
                workStartDate: workStartDate,
                workEndDate: workEndDate,
                qualification: qualification,
                workerCount: document.getElementById('worksbyWorkerCount').value || '0',

                budget: document.getElementById('worksbyBudgetAmount').value,

                description: document.getElementById('worksbyContentEditor').innerHTML || '프로젝트 설명이 추가되지 않았습니다.',
                isActive: document.getElementById('worksbyActiveToggle').checked,
                isImportant: document.getElementById('worksbyImportantProject').checked
            };
            
            saveWorksbyProject(formData);
        }

        // 웍스파이 프로젝트 저장
        function saveWorksbyProject(formData) {
            
            // 프로젝트 번호 생성
            const projectNo = 'PJ' + new Date().toISOString().slice(0, 10).replace(/-/g, '') + Math.floor(Math.random() * 1000).toString().padStart(3, '0');
            
            // 썸네일 텍스트 생성
            const thumbnailText = formData.service === '웍스파이' ? 'WORKSPY' : 
                                formData.service === '소리바로' ? 'SORIBARO' :
                                formData.service === '팀벨' ? 'TEAMBELL' :
                                formData.service === '엔튜브' ? 'NTUBE' :
                                formData.service === '더 데이터' ? 'DATA' :
                                formData.service === '텍스타' ? 'TEXTA' : 'PROJECT';

            // 프로젝트 데이터 생성
            worksbyProjectData = {
                projectNo: projectNo,
                title: formData.title,
                service: formData.service,
                startDate: formData.startDate,
                endDate: formData.endDate,
                workStartDate: formData.workStartDate,
                workEndDate: formData.workEndDate,
                qualification: formData.qualification,
                workerCount: formData.workerCount || '0',
                budget: formData.budget,
                description: formData.description,
                isActive: formData.isActive,
                isImportant: formData.isImportant,
                thumbnailText: thumbnailText,
                regDate: new Date().toISOString().slice(0, 16).replace('T', ' ')
            };
            
            // currentProjectData에도 동일한 데이터 저장
            currentProjectData = worksbyProjectData;

            // 테이블에 프로젝트 추가
            addWorksbyProjectToTable(worksbyProjectData);
            
            // 빈 상태 숨기고 테이블 표시
            const emptyState = document.getElementById('workspy-empty-state');
            const projectTable = document.getElementById('workspy-project-table');
            
            if (emptyState && projectTable) {
                emptyState.style.display = 'none';
                projectTable.style.display = 'block';
                
                // 프로젝트 생성 후 즉시 작업관리 테이블 노출
                const workMgmt = document.getElementById('work-management-table-section');
                if (workMgmt) {
                    workMgmt.style.display = 'block';
                    
                    // 작업관리 섹션으로 스크롤
                    setTimeout(() => {
                        workMgmt.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }, 500);
                }
            }
            
            // 모달 닫기
            closeWorksbyProjectModal();
            
            alert('웍스파이 프로젝트가 등록되었습니다!\n\n프로젝트가 웍스파이에 등록되어 작업자 모집이 시작됩니다.');
        }

        // 테이블에 프로젝트 행 추가
        function addWorksbyProjectToTable(data) {
            const tbody = document.getElementById('worksby-table-body');
            
            if (!tbody) {
                console.error('테이블 body를 찾을 수 없습니다!'); // 디버깅용
                return;
            }
            console.log('테이블 body 발견:', tbody); // 디버깅용
            
            // 현재 테이블 행 수를 확인하여 새 번호 계산
            const currentRows = tbody.querySelectorAll('tr').length;
            const newRowNumber = currentRows + 1;
            
            const thumbnailColor = getRandomThumbnailColor();
            
            const row = document.createElement('tr');
            row.style.cursor = 'pointer';
            row.style.transition = 'background-color 0.2s';
            row.onclick = () => openDetailModal(data);
            
            // 호버 효과 추가
            row.onmouseenter = function() { this.style.backgroundColor = '#f9fafb'; };
            row.onmouseleave = function() { this.style.backgroundColor = ''; };
            
            // 작업자 현황
            const workerStatus = `0 / ${data.workerCount || '0'}`;
            
            // 모집/작업 상태 배지 스타일 (meeting-detail과 통일된 파란 배지)
            const badgeBlue = 'display:inline-block; background: #3b82f6; color: white; padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: 700;';
            
            // 날짜 포맷 함수
            const toDate = (s) => {
                if (!s) return '';
                const d = new Date(s);
                if (Number.isNaN(d.getTime())) return s;
                return d.toISOString();
            };
            const formatDateOnly = (iso) => iso ? iso.slice(0,10).replace(/-/g,'.') : '';
            const formatDateTime = (iso) => {
                if (!iso) return '';
                // 입력이 yyyy.MM.dd 또는 yyyy-MM-dd일 수도 있어 그대로 표시 보존
                if (/^\d{4}\.\d{2}\.\d{2}/.test(iso)) return iso;
                const d = new Date(iso);
                if (Number.isNaN(d.getTime())) return iso;
                const yyyy = d.getFullYear();
                const mm = String(d.getMonth()+1).padStart(2,'0');
                const dd = String(d.getDate()).padStart(2,'0');
                const hh = String(d.getHours()).padStart(2,'0');
                const mi = String(d.getMinutes()).padStart(2,'0');
                return `${yyyy}.${mm}.${dd} ${hh}:${mi}`;
            };
            
            row.innerHTML = `
                <td style="padding: 10px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;">${newRowNumber}</td>
                <td style="padding: 10px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;">
                    <div style="width: 40px; height: 40px; background: ${thumbnailColor}; color: white; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin: 0 auto; font-size: 10px; font-weight: 600;">
                        ${data.thumbnailText}
                    </div>
                </td>
                <td style="padding: 10px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">${data.title}</td>
                <td style="padding: 10px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;">${data.service}</td>
                <td style="padding: 10px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;">${workerStatus}</td>
                <td style="padding: 10px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">${formatDateTime(toDate(data.startDate))} ~ ${formatDateTime(toDate(data.endDate))}</td>
                <td style="padding: 10px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;"><span style="${badgeBlue}">진행중</span></td>
                <td style="padding: 10px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">${data.workStartDate && data.workEndDate ? `${formatDateOnly(toDate(data.workStartDate))} ~ ${formatDateOnly(toDate(data.workEndDate))}` : ''}</td>
                <td style="padding: 10px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px;"><span style="${badgeBlue}">진행중</span></td>
            `;
            
            // 호버 효과 추가
            row.addEventListener('mouseenter', function() {
                this.style.backgroundColor = '#f9fafb';
            });
            row.addEventListener('mouseleave', function() {
                this.style.backgroundColor = '';
            });
            
            tbody.appendChild(row);
            console.log('테이블에 행 추가 완료!', row); // 디버깅용
            
            // 프로젝트 카운트 업데이트
            updateWorksbyProjectCount();
        }

        // 웍스파이 프로젝트 카운트 업데이트
        function updateWorksbyProjectCount() {
            const tbody = document.getElementById('worksby-table-body');
            const countElement = document.querySelector('#workspy-project-table .total-count');
            
            if (tbody && countElement) {
                const totalCount = tbody.querySelectorAll('tr').length;
                countElement.textContent = totalCount;
                console.log(`프로젝트 카운트 업데이트: ${totalCount}개`); // 디버깅용
            }
        }

        // 랜덤 썸네일 색상 생성
        function getRandomThumbnailColor() {
            const colors = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#06b6d4', '#84cc16', '#f97316'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        // 파일 업로드 기능
        document.addEventListener('DOMContentLoaded', function() {
            const fileUpload = document.getElementById('file-upload');
            const uploadedFiles = document.getElementById('uploaded-files');
            const fileList = document.getElementById('file-list');
            
            fileUpload.addEventListener('change', function(e) {
                const files = Array.from(e.target.files);
                if (files.length > 0) {
                    uploadedFiles.style.display = 'block';
                    fileList.innerHTML = '';
                    
                    files.forEach(file => {
                        const li = document.createElement('li');
                        li.style.cssText = 'padding: 8px; background: #f3f4f6; margin-bottom: 5px; border-radius: 4px; display: flex; justify-content: space-between; align-items: center;';
                        li.innerHTML = `
                            <span>📄 ${file.name} (${(file.size / 1024).toFixed(1)} KB)</span>
                            <button onclick="removeFile(this)" style="background: #ef4444; color: white; border: none; padding: 4px 8px; border-radius: 4px; font-size: 12px; cursor: pointer;">삭제</button>
                        `;
                        fileList.appendChild(li);
                    });
                }
            });
            
            // 드래그 앤 드롭 기능
            const uploadArea = document.querySelector('.upload-area');
            
            uploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.style.borderColor = '#3b82f6';
                this.style.background = 'rgba(59, 130, 246, 0.1)';
            });
            
            uploadArea.addEventListener('dragleave', function(e) {
                e.preventDefault();
                this.style.borderColor = '#d1d5db';
                this.style.background = '#f9fafb';
            });
            
            uploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                this.style.borderColor = '#d1d5db';
                this.style.background = '#f9fafb';
                
                const files = Array.from(e.dataTransfer.files);
                if (files.length > 0) {
                    // 파일 입력 요소에 파일 설정 (가상으로)
                    const dt = new DataTransfer();
                    files.forEach(file => dt.items.add(file));
                    fileUpload.files = dt.files;
                    
                    // change 이벤트 발생시키기
                    fileUpload.dispatchEvent(new Event('change'));
                }
            });
            
            // DOMContentLoaded에서는 웍스파이 폼 이벤트를 등록하지 않음 (모달 열릴 때 등록)
            
            // 웍스파이 작업자 체크박스 이벤트
            const worksbyWorkerCheckboxes = document.querySelectorAll('input[name="worksbyWorkerSelect"]');
            worksbyWorkerCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updateWorksbySelectedWorkerCount);
            });
        });

        // 웍스파이 상세보기 모달 열기
        function openWorksbyDetailModal(data) {
            console.log('=== 웍스파이 상세보기 모달 열기 시작 ==='); 
            console.log('전달받은 데이터:', data); // 디버깅용
            
            const modal = document.getElementById('worksbyDetailModal');
            if (!modal) {
                console.error('worksbyDetailModal을 찾을 수 없습니다!'); // 디버깅용
                return;
            }
            
            modal.style.display = 'flex';
            console.log('모달 표시됨'); // 디버깅용
            
            // 데이터 설정
            const elements = {
                'worksbyDetailNo': data.projectNo,
                'worksbyDetailService': data.service,
                'worksbyDetailRegDate': data.regDate,
                'worksbyDetailTitle': data.title,
                'worksbyDetailWorkerCount': `0 / ${data.workerCount || '0'}명`,
                'worksbyDetailBudget': data.budget || '미정'
            };
            
            // 각 요소에 데이터 설정
            Object.entries(elements).forEach(([id, value]) => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = value;
                    console.log(`✅ ${id} 설정됨:`, value); // 디버깅용
                    console.log(`   실제 표시된 값:`, element.textContent); // 확인용
                    console.log(`   요소 정보:`, element); // 요소 자체 확인
                } else {
                    console.error(`❌ ${id} 요소를 찾을 수 없습니다!`); // 디버깅용
                }
            });
            
            // 상태 설정 (색상 포함)
            const statusElement = document.getElementById('worksbyDetailStatus');
            if (statusElement) {
                statusElement.textContent = '기획';
                statusElement.style.color = '#6b7280';
                statusElement.style.fontWeight = '500';
                console.log('상태 설정됨: 기획'); // 디버깅용
            }
            
            // 날짜 범위 설정
            const startDateFormatted = data.startDate ? data.startDate.replace('T', ' ').slice(0, 16) : '-';
            const endDateFormatted = data.endDate ? data.endDate.replace('T', ' ').slice(0, 16) : '-';
            const periodElement = document.getElementById('worksbyDetailProjectPeriod');
            if (periodElement) {
                periodElement.textContent = `${startDateFormatted} ~ ${endDateFormatted}`;
                console.log('진행기간 설정됨:', `${startDateFormatted} ~ ${endDateFormatted}`); // 디버깅용
            }
            
            // 설명 설정
            const contentElement = document.getElementById('worksbyDetailContent');
            if (contentElement) {
                contentElement.innerHTML = data.description || '프로젝트 설명이 없습니다.';
                console.log('설명 설정됨:', data.description); // 디버깅용
            }
            
            // 기본적으로 프로젝트 정보 탭 활성화
            console.log('프로젝트 정보 탭 활성화 시도'); // 디버깅용
            showWorksbyTab('info');
            
            // 최종 상태 확인
            setTimeout(() => {
                console.log('=== 최종 상태 확인 ===');
                console.log('모달 표시 상태:', modal.style.display);
                console.log('프로젝트명:', document.getElementById('worksbyDetailTitle')?.textContent || '없음');
                console.log('프로젝트번호:', document.getElementById('worksbyDetailNo')?.textContent || '없음');
                console.log('서비스:', document.getElementById('worksbyDetailService')?.textContent || '없음');
                console.log('활성 탭:', document.querySelector('#worksby-tab-info.active') ? '프로젝트 정보' : '없음');
                console.log('=== 웍스파이 상세보기 모달 열기 완료 ===');
            }, 100);
            
            console.log('openWorksbyDetailModal 함수 실행 완료!'); // 디버깅용
        }

        // 웍스파이 상세보기 모달 닫기
        function closeWorksbyDetailModal() {
            document.getElementById('worksbyDetailModal').style.display = 'none';
        }

        // 웍스파이 상세보기 탭 전환
        function showWorksbyTab(tabName, clickedButton = null) {
            console.log('showWorksbyTab 호출됨:', tabName); // 디버깅용
            
            // 모든 탭 패널 숨기기
            const infoTab = document.getElementById('worksby-tab-info');
            const workersTab = document.getElementById('worksby-tab-workers');
            
            if (infoTab) infoTab.classList.remove('active');
            if (workersTab) workersTab.classList.remove('active');
            
            // 선택된 탭 보이기
            const targetTab = document.getElementById('worksby-tab-' + tabName);
            if (targetTab) {
                targetTab.classList.add('active');
                console.log('✅ 탭 활성화됨:', tabName); // 디버깅용
                console.log('   탭 요소:', targetTab);
                console.log('   탭 클래스:', targetTab.className);
                console.log('   탭 스타일:', targetTab.style.display);
            } else {
                console.error('❌ 탭을 찾을 수 없습니다:', 'worksby-tab-' + tabName); // 디버깅용
                // 모든 탭 요소 확인
                console.log('사용 가능한 탭들:');
                document.querySelectorAll('[id^="worksby-tab-"]').forEach(tab => {
                    console.log('  -', tab.id, tab);
                });
            }
            
            // 탭 버튼 스타일 변경
            const tabButtons = document.querySelectorAll('#worksbyDetailModal .tab-btn');
            tabButtons.forEach(btn => {
                btn.classList.remove('active');
                btn.style.background = '#f8fafc';
                btn.style.color = '#6b7280';
                btn.style.borderBottom = '3px solid transparent';
            });
            
            // 활성 탭 버튼 찾기 및 스타일 적용
            let activeButton = clickedButton;
            if (!activeButton) {
                // 클릭된 버튼이 없으면 탭명으로 찾기
                tabButtons.forEach(btn => {
                    const onclick = btn.getAttribute('onclick');
                    if (onclick && onclick.includes(`'${tabName}'`)) {
                        activeButton = btn;
                    }  
                });
            }
            
            if (activeButton) {
                activeButton.classList.add('active');
                activeButton.style.background = 'white';
                activeButton.style.color = '#3b82f6';
                activeButton.style.borderBottom = '3px solid #3b82f6';
            }
            
            // 탭에 따라 하단 버튼 변경
            const actionBtn = document.getElementById('worksbyModalActionBtn');
            if (actionBtn) {
                if (tabName === 'info') {
                    actionBtn.textContent = '수정';
                    actionBtn.onclick = editWorksbyProject;
                    actionBtn.className = 'btn-edit';
                    actionBtn.style.background = '';
                    actionBtn.onmouseover = null;
                    actionBtn.onmouseout = null;
                } else if (tabName === 'workers') {
                    actionBtn.textContent = '확정';
                    actionBtn.onclick = confirmWorksbyWorkers;
                    actionBtn.className = 'btn-edit';
                    actionBtn.style.background = '#f59e0b';
                    actionBtn.onmouseover = () => actionBtn.style.background = '#d97706';
                    actionBtn.onmouseout = () => actionBtn.style.background = '#f59e0b';
                }
            }
        }

        // 웍스파이 프로젝트 수정
        function editWorksbyProject() {
            alert('프로젝트 수정 기능입니다.\n\n실제 환경에서는 프로젝트 정보를 수정할 수 있습니다.');
        }

        // 웍스파이 작업자 확정
        function confirmWorksbyWorkers() {
            alert('작업자 확정 처리가 완료되었습니다.\n\n선택된 작업자들에게 알림이 발송됩니다.');
        }

        // 웍스파이 작업자 체크박스 관리
        function toggleAllWorksbyWorkers(selectAllCheckbox) {
            const checkboxes = document.querySelectorAll('input[name="worksbyWorkerSelect"]');
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAllCheckbox.checked;
            });
            updateWorksbySelectedWorkerCount();
        }

        // 웍스파이 선택된 작업자 수 업데이트
        function updateWorksbySelectedWorkerCount() {
            const checkedBoxes = document.querySelectorAll('input[name="worksbyWorkerSelect"]:checked');
            const countElement = document.getElementById('worksbySelectedWorkerCount');
            if (countElement) {
                countElement.textContent = checkedBoxes.length + '명';
            }
        }

        // 웍스파이 작업자 상태 일괄 업데이트
        function batchUpdateWorksbyWorkerStatus(status) {
            const checkedBoxes = document.querySelectorAll('input[name="worksbyWorkerSelect"]:checked');
            if (checkedBoxes.length === 0) {
                alert('선택된 작업자가 없습니다.');
                return;
            }
            
            const statusText = status === 'assigned' ? '배정' : '미배정';
            const confirmMessage = `선택된 ${checkedBoxes.length}명의 작업자를 ${statusText}하시겠습니까?`;
            
            if (confirm(confirmMessage)) {
                checkedBoxes.forEach(checkbox => {
                    const row = checkbox.closest('tr');
                    // 상태 컬럼은 9번째, 배정일은 8번째
                    const statusCell = row.querySelector('td:nth-child(9)');
                    const statusSpan = statusCell ? statusCell.querySelector('.applicant-status') : null;
                   
                   if (status === 'assigned') {
                       statusSpan.textContent = '배정';
                       statusSpan.className = 'applicant-status status-approved';
                       // 배정일 업데이트
                       const assignmentDateCell = row.querySelector('td:nth-child(9)');
                       assignmentDateCell.textContent = new Date().toISOString().slice(0, 10).replace(/-/g, '.');
                   } else if (status === 'unassigned') {
                       statusSpan.textContent = '미배정';
                       statusSpan.className = 'applicant-status status-cancelled';
                   }
                   
                   // 체크박스 해제
                   checkbox.checked = false;
                });
                
                // 전체 선택 체크박스도 해제
                const selectAllCheckbox = document.getElementById('worksbySelectAllWorkers');
                if (selectAllCheckbox) {
                    selectAllCheckbox.checked = false;
                }
                
                updateWorksbySelectedWorkerCount();
                
                // 테이블 정렬 (배정 상단, 미배정 하단)
                sortWorksbyWorkerTable();
                
                alert(`${checkedBoxes.length}명의 작업자가 ${statusText}되었습니다.`);
                
                // 통계 업데이트
                updateWorksbyWorkerStats();
            }
        }
        
        // 웍스파이 작업자 테이블 정렬 (배정 상단, 미배정 하단)
        function sortWorksbyWorkerTable() {
            const table = document.querySelector('#worksby-tab-workers .applicants-table tbody');
            if (!table) return;
            
            const rows = Array.from(table.querySelectorAll('tr'));
            
            // 상태에 따라 정렬 (배정=0, 미배정=1)
            rows.sort((a, b) => {
                const statusA = a.querySelector('.applicant-status').textContent.trim();
                const statusB = b.querySelector('.applicant-status').textContent.trim();
                
                const priorityA = statusA === '배정' ? 0 : 1;
                const priorityB = statusB === '배정' ? 0 : 1;
                
                return priorityA - priorityB;
            });
            
            // 테이블에 정렬된 행들 다시 삽입
            rows.forEach(row => table.appendChild(row));
        }

        // 웍스파이 작업자 통계 업데이트
        function updateWorksbyWorkerStats() {
            const allWorkers = document.querySelectorAll('#worksbyWorkersList tr');
            let assigned = 0, unassigned = 0;
            
            allWorkers.forEach(row => {
                const statusSpan = row.querySelector('.applicant-status');
                if (statusSpan) {
                    const status = statusSpan.textContent;
                    if (status === '배정') assigned++;
                    else if (status === '미배정') unassigned++;
                }
            });
            
            document.getElementById('worksbyTotalWorkers').textContent = allWorkers.length;
            document.getElementById('worksbyAssignedCount').textContent = assigned;
            document.getElementById('worksbyExcludedCount').textContent = unassigned;
        }

        // 파일 업로드 관련 함수들
        function handleWorksbyThumbnailUpload(input) {
            if (input.files && input.files[0]) {
                const file = input.files[0];
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('worksbyThumbnailImage').src = e.target.result;
                        document.querySelector('#worksbyThumbnailUpload .file-upload-content').style.display = 'none';
                        document.getElementById('worksbyThumbnailPreview').style.display = 'flex';
                    };
                    reader.readAsDataURL(file);
                } else {
                    alert('이미지 파일만 업로드 가능합니다.');
                    input.value = '';
                }
            }
        }

        function removeWorksbyThumbnail() {
            document.getElementById('worksbyThumbnailInput').value = '';
            document.getElementById('worksbyThumbnailImage').src = '';
            document.querySelector('#worksbyThumbnailUpload .file-upload-content').style.display = 'flex';
            document.getElementById('worksbyThumbnailPreview').style.display = 'none';
        }

        function handleWorksbyAttachmentUpload(input) {
            const files = Array.from(input.files);
            const fileList = document.getElementById('worksbyAttachmentList');
            
            files.forEach(file => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <div class="file-info">
                        <span class="file-icon">📄</span>
                        <div>
                            <div class="file-name">${file.name}</div>
                            <div class="file-size">${(file.size / 1024).toFixed(1)} KB</div>
                        </div>
                    </div>
                    <button class="file-remove" onclick="removeWorksbyAttachment(this)">×</button>
                `;
                fileList.appendChild(fileItem);
            });
            
            if (files.length > 0) {
                document.querySelector('#worksbyAttachmentUpload .file-upload-content').style.display = 'none';
            }
        }

        function removeWorksbyAttachment(button) {
            button.parentElement.remove();
            const fileList = document.getElementById('worksbyAttachmentList');
            if (fileList.children.length === 0) {
                document.querySelector('#worksbyAttachmentUpload .file-upload-content').style.display = 'flex';
                document.getElementById('worksbyAttachmentInput').value = '';
            }
        }

        // 텍스트 포맷팅 함수
        function formatText(command) {
            document.execCommand(command, false, null);
        }

        // 파일 삭제 기능
        function removeFile(button) {
            button.parentElement.remove();
            
            // 파일 목록이 비어있으면 업로드 영역 숨기기
            const fileList = document.getElementById('file-list');
            if (fileList.children.length === 0) {
                document.getElementById('uploaded-files').style.display = 'none';
                document.getElementById('file-upload').value = '';
            }
        }
    </script>

    <script>
        // projects.html에서 가져온 JavaScript 함수들
        
        // 간단한 탭 전환 함수
        function showTab(tabName) {
            // 모든 탭 패널 숨기기
            document.getElementById('tab-info').classList.remove('active');
            document.getElementById('tab-workers').classList.remove('active');
            
            // 선택된 탭 보이기
            document.getElementById('tab-' + tabName).classList.add('active');
            
            // 탭 버튼 스타일 변경
            const tabButtons = document.querySelectorAll('.tab-btn');
            tabButtons.forEach(btn => {
                btn.classList.remove('active');
                btn.style.background = '#f8fafc';
                btn.style.color = '#6b7280';
                btn.style.borderBottom = '3px solid transparent';
            });
            
            // 클릭된 탭 버튼 활성화
            event.target.classList.add('active');
            event.target.style.background = 'white';
            event.target.style.color = '#3b82f6';
            event.target.style.borderBottom = '3px solid #3b82f6';
            
            // 탭에 따라 하단 버튼 변경
            const actionBtn = document.getElementById('modalActionBtn');
            if (tabName === 'info') {
                actionBtn.textContent = '수정';
                actionBtn.onclick = editProject;
                actionBtn.className = 'btn-edit';
            } else if (tabName === 'workers') {
                actionBtn.textContent = '확정';
                actionBtn.onclick = confirmWorkers;
                actionBtn.className = 'btn-confirm';
            }
        }
        
        // 모달 열기/닫기
        function openDetailModal(projectData) {
            console.log('=== openDetailModal 호출됨 ===');
            console.log('전달받은 projectData:', projectData);
            
            // 프로젝트 데이터로 모달 내용 업데이트
            if (projectData) {
                console.log('데이터 매핑 시작...');
                
                document.getElementById('detailNo').textContent = projectData.projectNo || 'PJ202507160057';
                document.getElementById('detailService').textContent = projectData.service || '웍스파이';
                document.getElementById('detailRegDate').textContent = projectData.regDate || '2025.01.02 14:30';
                document.getElementById('detailTitle').textContent = projectData.title || '제목없는1.2 북터키스 아이키 전사 프로젝트';
                // 모집기간(날짜+시간)
                const formatDateTime = (s) => {
                    if (!s) return '';
                    if (/^\d{4}\.\d{2}\.\d{2}/.test(s)) return s;
                    const d = new Date(s);
                    if (Number.isNaN(d.getTime())) return s;
                    const yyyy = d.getFullYear();
                    const mm = String(d.getMonth()+1).padStart(2,'0');
                    const dd = String(d.getDate()).padStart(2,'0');
                    const hh = String(d.getHours()).padStart(2,'0');
                    const mi = String(d.getMinutes()).padStart(2,'0');
                    return `${yyyy}.${mm}.${dd} ${hh}:${mi}`;
                };
                const formatDateOnly = (s) => {
                    if (!s) return '';
                    if (/^\d{4}\.\d{2}\.\d{2}/.test(s)) return s;
                    const d = new Date(s);
                    if (Number.isNaN(d.getTime())) return s;
                    const yyyy = d.getFullYear();
                    const mm = String(d.getMonth()+1).padStart(2,'0');
                    const dd = String(d.getDate()).padStart(2,'0');
                    return `${yyyy}.${mm}.${dd}`;
                };
                document.getElementById('detailProjectPeriod').textContent = `${formatDateTime(projectData.startDate)} ~ ${formatDateTime(projectData.endDate)}`;
                // 작업기간(날짜만)
                const workEl = document.getElementById('detailWorkPeriod');
                if (workEl) {
                    workEl.textContent = (projectData.workStartDate && projectData.workEndDate)
                        ? `${formatDateOnly(projectData.workStartDate)} ~ ${formatDateOnly(projectData.workEndDate)}`
                        : '2025.08.21 ~ 2025.09.02';
                }
                // 지원자격
                const qualificationLabelMap = { anyone: '누구나', stenographer: '속기사' };
                const qualEl = document.getElementById('detailQualification');
                if (qualEl) qualEl.textContent = qualificationLabelMap[projectData.qualification] || '누구나';
                
                document.getElementById('detailWorkerCount').textContent = `0 / ${projectData.workerCount || '5'}명`;
                document.getElementById('detailBudget').textContent = projectData.budget ? projectData.budget + '원' : '500,000원';
                document.getElementById('detailContent').innerHTML = projectData.description || '프로젝트 설명이 없습니다.';
                
                // 선택된 파일 섹션 제거됨
                
                console.log('데이터 매핑 완료!');
                console.log('detailNo:', document.getElementById('detailNo').textContent);
                console.log('detailTitle:', document.getElementById('detailTitle').textContent);
                console.log('detailContent:', document.getElementById('detailContent').innerHTML);
            } else {
                console.error('projectData가 없습니다!');
            }
            
            document.getElementById('detailModal').style.display = 'flex';
            
            // 탭 초기화 - 프로젝트 정보 탭을 기본으로 활성화
            document.getElementById('tab-info').classList.add('active');
            document.getElementById('tab-workers').classList.remove('active');
            
            // 탭 버튼 초기화
            const tabButtons = document.querySelectorAll('#detailModal .tab-btn');
            tabButtons.forEach(btn => {
                btn.classList.remove('active');
                btn.style.background = '#f8fafc';
                btn.style.color = '#6b7280';
                btn.style.borderBottom = '3px solid transparent';
            });
            
            // 첫 번째 탭 버튼 활성화
            const firstTabBtn = document.querySelector('#detailModal .tab-btn');
            if (firstTabBtn) {
                firstTabBtn.classList.add('active');
                firstTabBtn.style.background = 'white';
                firstTabBtn.style.color = '#3b82f6';
                firstTabBtn.style.borderBottom = '3px solid #3b82f6';
            }
            
            // 디버깅: 탭 상태 확인
            console.log('=== 탭 상태 확인 ===');
            console.log('tab-info 요소:', document.getElementById('tab-info'));
            console.log('tab-info 클래스:', document.getElementById('tab-info')?.className);
            console.log('tab-info 스타일:', document.getElementById('tab-info')?.style.display);
            console.log('tab-workers 요소:', document.getElementById('tab-workers'));
            console.log('tab-workers 클래스:', document.getElementById('tab-workers')?.className);
            
            // 모달 열 때 기본적으로 프로젝트 정보 탭 활성화 및 버튼 설정
            const actionBtn = document.getElementById('modalActionBtn');
            actionBtn.textContent = '수정';
            actionBtn.onclick = editProject;
            actionBtn.className = 'btn-edit';
            
            console.log('=== 모달 열기 완료 ===');
        }
        
        function closeDetailModal() {
            document.getElementById('detailModal').style.display = 'none';
        }
        
        // 등록 모달 열기/닫기
        function addNewProject() {
            // 더미 데이터로 프로젝트 등록 폼 미리 채우기
            const params = getUrlParams();
            const fileName = params.fileName ? decodeURIComponent(params.fileName).replace(/\.[^/.]+$/, "") : "음성파일";
            const today = new Date();
            const twoWeeksLater = new Date();
            twoWeeksLater.setDate(today.getDate() + 14);
            const formatDate = (date) => { return date.toISOString().split('T')[0]; };
            
            document.getElementById('serviceSelect').value = '소리바로';
            document.getElementById('projectTitle').value = fileName + ' 전사 프로젝트';
            document.getElementById('projectStartDate').value = formatDate(today);
            document.getElementById('projectEndDate').value = formatDate(twoWeeksLater);
            // 작업기간 기본값은 비워두되, 필요하면 오늘~2주 후로 채울 수 있습니다
            const workStart = document.getElementById('projectWorkStartDate');
            const workEnd = document.getElementById('projectWorkEndDate');
            if (workStart && workEnd) {
                workStart.value = '';
                workEnd.value = '';
            }
            document.getElementById('workerCount').value = '5';

            document.getElementById('budgetAmount').value = '500000';

            
            const contentEditor = document.getElementById('contentEditor');
            if (contentEditor) {
                contentEditor.innerHTML = `
                    사람을 구합니다.<br>
                    테스트합니다.<br>
                    하나둘하나둘
                `.trim();
            }
            document.getElementById('activeToggle').checked = true;
            document.getElementById('importantProject').checked = false;
            
            document.getElementById('projectModal').style.display = 'flex';
        }
        
        function closeProjectModal() {
            document.getElementById('projectModal').style.display = 'none';
        }
        
        // 간단한 기능들
        function updateWorkerStatus(workerNo, status) {
            const statusText = status === 'assigned' ? '배정' : '미배정';
            if (confirm(`작업자를 ${statusText}하시겠습니까?`)) {
                alert(`작업자가 ${statusText}되었습니다.`);
            }
        }
        
        function editProject() {
            alert('프로젝트 수정 기능');
        }
        
        // 프로젝트 종료 (기획용)
        function closeProjectPermanently() {
            if (!confirm('프로젝트를 종료하시겠습니까?\n\n이 작업은 시연용이며 화면 상태만 변경됩니다.')) {
                return;
            }
            // 상태 배지를 종료로 표시
            const recruitBadge = document.getElementById('recruitStatusBadge');
            const workBadge = document.getElementById('workStatusBadge');
            if (recruitBadge) {
                recruitBadge.textContent = '종료';
                recruitBadge.style.background = '#6b7280';
            }
            if (workBadge) {
                workBadge.textContent = '종료';
                workBadge.style.background = '#6b7280';
            }
            alert('프로젝트가 종료 상태로 표시되었습니다.');
        }
        
        function confirmWorkers() {
            // 테이블 내 배정 상태 여부 확인
            const hasAssignedInTable = Array.from(document.querySelectorAll('#detailModal .applicant-status'))
                .some(span => span.textContent.trim() === '배정');
            // 수동 배정된 작업자 여부 확인
            const manualCount = (typeof manuallyAssignedWorkers !== 'undefined' && Array.isArray(manuallyAssignedWorkers))
                ? manuallyAssignedWorkers.length : 0;
            
            if (!hasAssignedInTable && manualCount === 0) {
                alert('배정된 작업자가 없습니다. 작업자를 배정한 후 확정해주세요.');
                return;
            }
            
            alert('작업자 확정 처리 완료');
            closeDetailModal();
        }
        
        function formatText(command) {
            document.execCommand(command, false, null);
        }
        
        function handleThumbnailUpload(input) {
            alert('썸네일 업로드');
        }
        
        function handleAttachmentUpload(input) {
            alert('첨부파일 업로드');
        }
        
        function removeThumbnail() {
            alert('썸네일 제거');
        }
        
        function removeAttachment(fileName) {
            alert('첨부파일 제거');
        }
        
        // 체크박스 전체 선택/해제
        function toggleAllWorkers(selectAllCheckbox) {
            const checkboxes = document.querySelectorAll('input[name="workerSelect"]');
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAllCheckbox.checked;
            });
            updateSelectedWorkerCount();
        }
        
        // 선택된 체크박스 개수 업데이트
        function updateSelectedWorkerCount() {
            const checkedBoxes = document.querySelectorAll('input[name="workerSelect"]:checked');
            const countElement = document.getElementById('selectedWorkerCount');
            if (countElement) {
                countElement.textContent = checkedBoxes.length + '명';
            }
        }
        
        // 일괄 배정/미배정 처리
        function batchUpdateWorkerStatus(status) {
            const checkedBoxes = document.querySelectorAll('input[name="workerSelect"]:checked');
            if (checkedBoxes.length === 0) {
                alert('선택된 작업자가 없습니다.');
                return;
            }
            
            const statusText = status === 'assigned' ? '배정' : '미배정';
            const confirmMessage = `선택된 ${checkedBoxes.length}명의 작업자를 ${statusText}하시겠습니까?`;
            
            if (confirm(confirmMessage)) {
                checkedBoxes.forEach(checkbox => {
                    const row = checkbox.closest('tr');
                    // 상태 span을 직접 찾고 그 셀의 이전 셀을 배정일로 사용 (열 인덱스 의존 제거)
                    const statusSpan = row.querySelector('.applicant-status');
                    const statusCell = statusSpan ? statusSpan.closest('td') : null;
                    const assignDateCell = statusCell ? statusCell.previousElementSibling : null;
                    
                    if (statusSpan) {
                        if (status === 'assigned') {
                            statusSpan.textContent = '배정';
                            statusSpan.className = 'applicant-status status-approved';
                            if (assignDateCell) {
                                const today = new Date();
                                assignDateCell.textContent = today.toISOString().slice(0, 10).replace(/-/g, '.');
                            }
                        } else if (status === 'unassigned') {
                            statusSpan.textContent = '미배정';
                            statusSpan.className = 'applicant-status status-cancelled';
                            if (assignDateCell) assignDateCell.textContent = '-';
                        }
                    }
                    
                    // 체크박스 해제
                    checkbox.checked = false;
                });
                
                // 전체 선택 체크박스도 해제
                const selectAllCheckbox = document.getElementById('selectAllWorkers');
                if (selectAllCheckbox) {
                    selectAllCheckbox.checked = false;
                }
                
                updateSelectedWorkerCount();
                
                // 테이블 정렬 (배정 상단, 미배정 하단)
                sortWorkerTable();
                
                alert(`${checkedBoxes.length}명의 작업자가 ${statusText}되었습니다.`);
            }
        }
        
        // 작업자 테이블 정렬 (배정 상단, 미배정 하단)
        function sortWorkerTable() {
            const table = document.querySelector('#detailModal .applicants-table tbody');
            if (!table) return;
            
            const rows = Array.from(table.querySelectorAll('tr'));
            
            // 상태에 따라 정렬 (배정=0, 미배정=1)
            rows.sort((a, b) => {
                const statusA = a.querySelector('.applicant-status')?.textContent.trim() || '';
                const statusB = b.querySelector('.applicant-status')?.textContent.trim() || '';
                
                const priorityA = statusA === '배정' ? 0 : 1;
                const priorityB = statusB === '배정' ? 0 : 1;
                
                return priorityA - priorityB;
            });
            
            // 테이블에 정렬된 행들 다시 삽입
            rows.forEach(row => table.appendChild(row));
        }
        
        // 중복된 함수 정의 제거 - 위에 정의된 openWorksbyProjectModal() 사용
        
        // 프로젝트 저장 처리
        function saveProject(formData) {
            console.log('saveProject 함수 호출됨!', formData); // 디버깅용
            
            // 프로젝트 번호 생성
            const projectNo = 'PJ' + new Date().toISOString().slice(0, 10).replace(/-/g, '') + Math.floor(Math.random() * 1000).toString().padStart(3, '0');
            console.log('생성된 프로젝트 번호:', projectNo); // 디버깅용
            
            // 썸네일 텍스트 생성
            const thumbnailText = formData.service === '웍스파이' ? 'WORKSPY' : 
                                formData.service === '소리바로' ? 'SORIBARO' :
                                formData.service === '팀벨' ? 'TEAMBELL' :
                                formData.service === '엔튜브' ? 'NTUBE' :
                                formData.service === '더 데이터' ? 'DATA' :
                                formData.service === '텍스타' ? 'TEXTA' : 'PROJECT';

            // 날짜 형식 변환 함수
            const formatDisplayDate = (dateStr) => {
                if (!dateStr) return '';
                return dateStr.replace(/-/g, '.');
            };
            
            // 금액 형식 변환 함수
            const formatBudget = (amount) => {
                if (!amount) return '0';
                return parseInt(amount).toLocaleString();
            };

            // 프로젝트 데이터 생성
            const worksbyProjectData = {
                projectNo: projectNo,
                title: formData.title,
                service: formData.service,
                startDate: formData.startDate,
                endDate: formData.endDate,
                workStartDate: formData.workStartDate,
                workEndDate: formData.workEndDate,
                qualification: formData.qualification,
                workerCount: formData.workerCount || '0',
                budget: formatBudget(formData.budget),
                description: formData.description,
                isActive: formData.isActive,
                isImportant: formData.isImportant,
                thumbnailText: thumbnailText,
                regDate: new Date().toISOString().slice(0, 16).replace('T', ' ').replace(/-/g, '.')
            };

            // 테이블에 프로젝트 추가
            console.log('테이블에 프로젝트 추가 중...'); // 디버깅용
            addWorksbyProjectToTable(worksbyProjectData);
            
            // 빈 상태 숨기고 테이블 표시
            console.log('UI 상태 변경 중...'); // 디버깅용
            const emptyState = document.getElementById('workspy-empty-state');
            const projectTable = document.getElementById('workspy-project-table');
            
            if (emptyState && projectTable) {
                emptyState.style.display = 'none';
                projectTable.style.display = 'block';
                
                // 프로젝트가 생성되면 새 프로젝트 등록 버튼 숨기기
                const newProjectBtn = document.getElementById('new-project-btn');
                if (newProjectBtn) {
                    newProjectBtn.style.display = 'none';
                    console.log('새 프로젝트 등록 버튼 숨김 처리 완료!'); // 디버깅용
                }
                
                console.log('UI 상태 변경 완료!'); // 디버깅용
            } else {
                console.error('UI 요소를 찾을 수 없습니다:', { emptyState, projectTable }); // 디버깅용
            }
            
            // 모달 닫기
            console.log('모달 닫기 중...'); // 디버깅용
            closeProjectModal();
            
            alert('웍스파이 프로젝트가 등록되었습니다!\n\n프로젝트가 웍스파이에 등록되어 작업자 모집이 시작됩니다.');
        }
        
        // DOMContentLoaded 이벤트 리스너
        document.addEventListener('DOMContentLoaded', function() {
            // 프로젝트 등록 폼 제출 이벤트
            const projectForm = document.getElementById('projectForm');
            if (projectForm) {
                projectForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // 폼 데이터 수집
                    const formData = {
                        service: document.getElementById('serviceSelect').value,
                        title: document.getElementById('projectTitle').value,
                        startDate: document.getElementById('projectStartDate').value,
                        endDate: document.getElementById('projectEndDate').value,
                        workStartDate: document.getElementById('projectWorkStartDate').value,
                        workEndDate: document.getElementById('projectWorkEndDate').value,
                        qualification: document.getElementById('projectQualification').value,
                        workerCount: document.getElementById('workerCount').value,

                        budget: document.getElementById('budgetAmount').value,

                        description: document.getElementById('contentEditor').innerHTML,
                        isActive: document.getElementById('activeToggle').checked,
                        isImportant: document.getElementById('importantProject').checked
                    };
                    
                    // 간단한 유효성 검사
                    if (!formData.service) {
                        alert('서비스를 선택해주세요.');
                        return;
                    }
                    if (!formData.title.trim()) {
                        alert('프로젝트명을 입력해주세요.');
                        return;
                    }
                    if (!formData.startDate || !formData.endDate) {
                        alert('모집기간을 입력해주세요.');
                        return;
                    }
                    
                    saveProject(formData);
                });
            }
            
            // 작업자 체크박스 이벤트 리스너
            const workerCheckboxes = document.querySelectorAll('input[name="workerSelect"]');
            workerCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updateSelectedWorkerCount);
            });

            // 작업자 테이블 행 클릭 이벤트 추가
            addWorkerRowClickEvents();
        });

        // 작업자 테이블 행 클릭 이벤트 추가 함수
        function addWorkerRowClickEvents() {
            // 웍스파이 작업자 테이블
            const worksbyWorkerRows = document.querySelectorAll('#worksbyWorkersList tr');
            worksbyWorkerRows.forEach(row => {
                row.style.cursor = 'pointer';
                row.addEventListener('click', function(e) {
                    // 체크박스 클릭시에는 작업자 상세정보를 열지 않음
                    if (e.target.type === 'checkbox') return;
                    openWorkerDetail(this);
                });
            });

            // 일반 작업자 테이블
            const workerRows = document.querySelectorAll('#workersList tr');
            workerRows.forEach(row => {
                row.style.cursor = 'pointer';
                row.addEventListener('click', function(e) {
                    // 체크박스 클릭시에는 작업자 상세정보를 열지 않음
                    if (e.target.type === 'checkbox') return;
                    openWorkerDetail(this);
                });
            });
        }

        // 작업자 상세정보 팝업 열기
        function openWorkerDetail(row) {
            const cells = row.querySelectorAll('td');
            if (cells.length >= 8) {
                const workerData = {
                    name: cells[1].textContent,
                    gender: cells[2].textContent,
                    phone: cells[3].textContent,
                    birth: cells[4].textContent,
                    address: cells[5].textContent,
                    certificate: cells[6].textContent,
                    assignmentDate: cells[7].textContent,
                    status: cells[8].textContent
                };
                
                // 실제 데이터로 팝업 내용 업데이트
                document.getElementById('detail-name').textContent = workerData.name || '김작업';
                document.getElementById('detail-phone').textContent = workerData.phone || '010-1234-5678';
                document.getElementById('detail-address').textContent = workerData.address || '서울특별시 강남구';
                document.getElementById('detail-device').textContent = '소리자바';
                document.getElementById('detail-association').textContent = '정회원';
                document.getElementById('detail-coupon').textContent = '2H30-5H4A-6E7F';
                
                // 기본정보
                document.getElementById('detail-gender').textContent = workerData.gender || '남성';
                document.getElementById('detail-birth').textContent = workerData.birth || '1985.03.12';
                document.getElementById('detail-email').textContent = workerData.name ? workerData.name.toLowerCase() + '@email.com' : 'kimwork@email.com';
                document.getElementById('detail-education').textContent = '대학 4년 졸업';
                document.getElementById('detail-school').textContent = '한국대학교';
                document.getElementById('detail-major').textContent = '컴퓨터공학과';
                document.getElementById('detail-korean-stenography').textContent = workerData.certificate || '2급';
                document.getElementById('detail-acquisition-year').textContent = '2020년';
                document.getElementById('detail-exam-round').textContent = '1회';
                document.getElementById('detail-marketing').textContent = 'Y';
                
                document.getElementById('workerDetailModal').style.display = 'block';
            }
        }

        // 작업자 상세정보 팝업 닫기
        function closeWorkerDetail() {
            document.getElementById('workerDetailModal').style.display = 'none';
        }

        // 관리자 메모 저장
        function saveAdminMemo() {
            const memo = document.getElementById('admin-memo').value;
            alert('관리자 메모가 저장되었습니다.');
        }

        // 작업자 수동 배정 모달 열기
        function openManualAssignModal() {
            document.getElementById('manualAssignModal').style.display = 'block';
            // 검색 결과 초기화
            document.getElementById('searchResults').innerHTML = '<div style="text-align: center; color: #6b7280; padding: 40px;">검색어를 입력하고 검색 버튼을 눌러주세요.</div>';
            document.getElementById('searchKeyword').value = '';
        }

        // 작업자 수동 배정 모달 닫기
        function closeManualAssignModal() {
            document.getElementById('manualAssignModal').style.display = 'none';
        }

        // 작업자 검색
        function searchWorkers() {
            const searchType = document.getElementById('searchType').value;
            const keyword = document.getElementById('searchKeyword').value.trim();
            
            if (!keyword) {
                alert('검색어를 입력하세요.');
                return;
            }

            // 더미 검색 결과 데이터
            const allWorkers = [
                { id: 'w001', name: '차정훈', email: 'jeonghoon@email.com', phone: '010-1234-5678', address: '서울특별시 강남구', certificate: '1급' },
                { id: 'w002', name: '김철수', email: 'chulsu@email.com', phone: '010-2345-6789', address: '경기도 수원시', certificate: '2급' },
                { id: 'w003', name: '김민지', email: 'minji@email.com', phone: '010-1111-2222', address: '서울특별시 강남구', certificate: '1급' },
                { id: 'w004', name: '박준호', email: 'junho@email.com', phone: '010-2222-3333', address: '경기도 성남시', certificate: '2급' },
                { id: 'w005', name: '이소연', email: 'soyeon@email.com', phone: '010-3333-4444', address: '인천광역시', certificate: '3급' },
                { id: 'w006', name: '최대한', email: 'daehan@email.com', phone: '010-4444-5555', address: '부산광역시', certificate: '1급' },
                { id: 'w007', name: '김태현', email: 'taehyun@email.com', phone: '010-5555-6666', address: '대구광역시', certificate: '2급' }
            ];

            // 검색 조건에 따른 필터링 및 이미 배정된 작업자 제외
            const filteredWorkers = allWorkers.filter(worker => {
                // 이미 배정된 작업자는 제외
                if (manuallyAssignedWorkers.some(assigned => assigned.id === worker.id)) {
                    return false;
                }
                
                switch(searchType) {
                    case 'name':
                        return worker.name.includes(keyword);
                    case 'email':
                        return worker.email.includes(keyword);
                    case 'phone':
                        return worker.phone.includes(keyword);
                    default:
                        return false;
                }
            });

            // 검색 결과 표시
            displaySearchResults(filteredWorkers);
        }
        
        // 작업자 배정 모달 열기 (vod-detail.html과 동일)
        function openWorkerAssignmentModal(fileName) {
            console.log('작업자 관리 모달 열기:', fileName);
            
            // 선택된 파일 정보를 전역 변수에 저장
            window.selectedFileInfo = {
                fileName: fileName,
                projectTitle: currentProjectData?.title || '웍스파이 프로젝트'
            };
            
            // 작업자 관리 모달 열기
            document.getElementById('workerManagementModal').style.display = 'flex';
        }
        
        // 작업자 관리 모달 닫기
        function closeWorkerManagementModal() {
            document.getElementById('workerManagementModal').style.display = 'none';
        }
        
        // 작업관리 작업자 검색
        function searchAssignWorkers() {
            const searchKeyword = document.getElementById('worker-search').value.trim();
            const searchType = document.getElementById('worker-search-type').value;
            const resultsContainer = document.getElementById('worker-search-results');
            
            if (!searchKeyword) {
                alert('검색어를 입력하세요.');
                return;
            }

            // 더미 검색 결과 데이터 - 김철수 검색 시나리오
            const allWorkers = [
                { id: 'w101', name: '김철수', gender: '남성', phone: '010-1234-5678', birth: '1990.05.15', address: '서울특별시 강남구', grade: '1급', email: 'kimcs@email.com' },
                { id: 'w102', name: '김영희', gender: '여성', phone: '010-2345-6789', birth: '1988.03.22', address: '경기도 수원시', grade: '2급', email: 'kimyh@email.com' },
                { id: 'w103', name: '이철수', gender: '남성', phone: '010-3456-7890', birth: '1992.07.08', address: '부산광역시', grade: '1급', email: 'leecs@email.com' }
            ];

            // 검색 조건에 따른 필터링
            const filteredWorkers = allWorkers.filter(worker => {
                switch(searchType) {
                    case 'name':
                        return worker.name.includes(searchKeyword);
                    case 'email':
                        return worker.email.includes(searchKeyword);
                    case 'phone':
                        return worker.phone.includes(searchKeyword);
                    default:
                        return worker.name.includes(searchKeyword);
                }
            });

            if (filteredWorkers.length === 0) {
                resultsContainer.innerHTML = '<div style="text-align: center; color: #6b7280; padding: 20px;">검색 결과가 없습니다.</div>';
                return;
            }

            let html = `<div style="margin-bottom: 10px; color: #374151; font-weight: 600;">검색 결과 ${filteredWorkers.length}명</div>`;
            
            filteredWorkers.forEach(worker => {
                html += `
                    <div style="display: flex; align-items: center; gap: 15px; padding: 8px 12px; background: #f9fafb; border-radius: 6px; margin-bottom: 6px; border: 1px solid #e5e7eb;">
                        <input type="radio" name="assignWorker" value="${worker.id}" id="search-${worker.id}">
                        <label for="search-${worker.id}" style="flex: 1; cursor: pointer; display: flex; align-items: center; gap: 20px;">
                            <div style="font-weight: 600; color: #1f2937; font-size: 15px; min-width: 80px;">${worker.name}</div>
                            <div style="font-size: 14px; color: #6b7280;">${worker.gender} | ${worker.phone} | ${worker.birth} | ${worker.address} | ${worker.grade}</div>
                        </label>
                    </div>
                `;
            });

            resultsContainer.innerHTML = html;
        }
        
        // 작업자 배정 실행
        function assignWorker() {
            const selectedRadio = document.querySelector('input[name="assignWorker"]:checked');
            
            if (!selectedRadio) {
                alert('배정할 작업자를 선택하세요.');
                return;
            }

            // 선택된 작업자 정보 가져오기
            const workerLabel = selectedRadio.nextElementSibling;
            const workerName = workerLabel.querySelector('div').textContent;
            
            if (confirm(`${workerName} 작업자를 배정하시겠습니까?`)) {
                // 작업관리 테이블의 작업자 컬럼 업데이트
                updateWorkerInManagementTable(workerName);
                
                alert(`${workerName} 작업자가 배정되었습니다.`);
                closeWorkerAssignModal();
            }
        }
        
        // 작업관리 테이블의 작업자 컬럼 업데이트
        function updateWorkerInManagementTable(workerName) {
            const workerCell = document.getElementById('assigned-worker-cell');
            if (workerCell) {
                workerCell.textContent = workerName;
                workerCell.style.color = '#059669';
                workerCell.style.fontWeight = '500';
            }
        }

        // 검색 결과 표시
        function displaySearchResults(workers) {
            const resultsContainer = document.getElementById('searchResults');
            
            if (workers.length === 0) {
                resultsContainer.innerHTML = '<div style="text-align: center; color: #6b7280; padding: 40px;">검색 결과가 없습니다.</div>';
                return;
            }

            let html = '<div style="border: 1px solid #e5e7eb; border-radius: 8px; overflow: hidden;">';
            html += '<table style="width: 100%; border-collapse: collapse;">';
            html += '<thead style="background: #f9fafb;">';
            html += '<tr>';
            html += '<th style="padding: 12px; text-align: center; border-bottom: 1px solid #e5e7eb; font-size: 14px; font-weight: 600;">선택</th>';
            html += '<th style="padding: 12px; text-align: center; border-bottom: 1px solid #e5e7eb; font-size: 14px; font-weight: 600;">이름</th>';
            html += '<th style="padding: 12px; text-align: center; border-bottom: 1px solid #e5e7eb; font-size: 14px; font-weight: 600;">이메일</th>';
            html += '<th style="padding: 12px; text-align: center; border-bottom: 1px solid #e5e7eb; font-size: 14px; font-weight: 600;">전화번호</th>';
            html += '<th style="padding: 12px; text-align: center; border-bottom: 1px solid #e5e7eb; font-size: 14px; font-weight: 600;">주소</th>';
            html += '<th style="padding: 12px; text-align: center; border-bottom: 1px solid #e5e7eb; font-size: 14px; font-weight: 600;">자격증</th>';
            html += '</tr>';
            html += '</thead>';
            html += '<tbody>';

            workers.forEach((worker, index) => {
                html += `<tr style="border-bottom: 1px solid #e5e7eb; ${index % 2 === 1 ? 'background: #f9fafb;' : ''}">`;
                html += `<td style="padding: 12px; text-align: center;"><input type="radio" name="selectedWorker" value="${worker.id}" data-name="${worker.name}"></td>`;
                html += `<td style="padding: 12px; text-align: center;">${worker.name}</td>`;
                html += `<td style="padding: 12px; text-align: center;">${worker.email}</td>`;
                html += `<td style="padding: 12px; text-align: center;">${worker.phone}</td>`;
                html += `<td style="padding: 12px; text-align: center;">${worker.address}</td>`;
                html += `<td style="padding: 12px; text-align: center;">${worker.certificate}</td>`;
                html += '</tr>';
            });

            html += '</tbody>';
            html += '</table>';
            html += '</div>';

            resultsContainer.innerHTML = html;
        }

        // 배정된 작업자 목록 (전역 변수)
        let manuallyAssignedWorkers = [];

        // 작업자 관리 모달에서 작업자 확정
        function confirmWorkersModal() {
            const assignedWorkers = document.querySelectorAll('#workersListModal .applicant-status.status-approved');
            if (assignedWorkers.length === 0) {
                alert('배정된 작업자가 없습니다.');
                return;
            }
            
            // 배정된 작업자 이름 수집
            const workerNames = [];
            assignedWorkers.forEach(statusSpan => {
                const row = statusSpan.closest('tr');
                const nameCell = row.querySelector('td:nth-child(2)'); // 이름 컬럼
                if (nameCell) {
                    workerNames.push(nameCell.textContent.trim());
                }
            });
            
            // 현재 선택된 파일 정보 가져오기
            const selectedFile = window.selectedFileInfo;
            const targetFileName = selectedFile?.fileName || '';
            
            if (confirm(`${workerNames.length}명의 작업자를 "${targetFileName}" 파일에 확정하시겠습니까?\n\n확정 작업자: ${workerNames.join(', ')}`)) {
                // 해당 파일에 작업자 배정
                if (workerNames.length > 0) {
                    updateWorkerInManagementTable(workerNames[0]); // 첫 번째 작업자 배정
                }
                
                closeWorkerManagementModal();
                alert(`${workerNames.length}명의 작업자가 "${targetFileName}" 파일에 확정되었습니다.`);
            }
        }
        
        // 작업자 관리 모달 일괄 배정/미배정 처리
        function batchUpdateWorkerStatusModal(status) {
            const checkedBoxes = document.querySelectorAll('input[name="workerSelectModal"]:checked');
            if (checkedBoxes.length === 0) {
                alert('선택된 작업자가 없습니다.');
                return;
            }
            
            const statusText = status === 'assigned' ? '배정' : '미배정';
            const confirmMessage = `선택된 ${checkedBoxes.length}명의 작업자를 ${statusText}하시겠습니까?`;
            
            if (confirm(confirmMessage)) {
                checkedBoxes.forEach(checkbox => {
                    const row = checkbox.closest('tr');
                    const statusCell = row.querySelector('td:nth-child(9)');
                    const statusSpan = statusCell.querySelector('.applicant-status');
                    
                    if (status === 'assigned') {
                        statusSpan.textContent = '배정';
                        statusSpan.className = 'applicant-status status-approved';
                        statusSpan.style.background = '#dcfce7';
                        statusSpan.style.color = '#166534';
                        // 배정일 추가
                        const assignDateCell = row.querySelector('td:nth-child(8)');
                        const today = new Date();
                        assignDateCell.textContent = today.toISOString().slice(0, 10).replace(/-/g, '.');
                    } else if (status === 'unassigned') {
                        statusSpan.textContent = '미배정';
                        statusSpan.className = 'applicant-status status-cancelled';
                        statusSpan.style.background = '#fef2f2';
                        statusSpan.style.color = '#991b1b';
                        // 배정일 제거
                        const assignDateCell = row.querySelector('td:nth-child(8)');
                        assignDateCell.textContent = '-';
                    }
                    
                    // 체크박스 해제
                    checkbox.checked = false;
                });
                
                // 전체 선택 체크박스도 해제
                const selectAllCheckbox = document.getElementById('selectAllWorkersModal');
                if (selectAllCheckbox) {
                    selectAllCheckbox.checked = false;
                }
                
                updateSelectedWorkerCountModal();
                
                alert(`${checkedBoxes.length}명의 작업자가 ${statusText}되었습니다.`);
            }
        }
        
        // 작업자 관리 모달 선택된 작업자 수 업데이트
        function updateSelectedWorkerCountModal() {
            const checkedBoxes = document.querySelectorAll('input[name="workerSelectModal"]:checked');
            const countElement = document.getElementById('selectedWorkerCountModal');
            if (countElement) {
                countElement.textContent = checkedBoxes.length + '명';
            }
        }
        
        // 작업자 관리 모달 체크박스 이벤트 리스너
        document.addEventListener('change', function(e) {
            if (e.target.name === 'workerSelectModal') {
                updateSelectedWorkerCountModal();
            }
        });
        
        // 작업자 수동 배정 모달 관련 함수들
        
        // 작업자 수동 배정 모달 열기
        function openManualWorkerAssignmentModal() {
            console.log('작업자 수동 배정 모달 열기');
            
            // 검색 초기화
            document.getElementById('manualSearchInput').value = '';
            document.getElementById('manualSearchOption').value = 'name';
            document.getElementById('manualSearchResultCount').textContent = '0';
            
            // 검색 결과 초기화
            const searchResults = document.getElementById('manualSearchResults');
            searchResults.innerHTML = `
                <div style="padding: 60px 20px; text-align: center; color: #9ca3af; font-size: 14px;">
                    검색어를 입력하고 검색 버튼을 눌러주세요
                </div>
            `;
            
            // 배정 버튼 비활성화
            const assignBtn = document.getElementById('assignSelectedWorkerBtn');
            if (assignBtn) {
                assignBtn.disabled = true;
                assignBtn.style.opacity = '0.5';
            }
            
            document.getElementById('manualWorkerAssignmentModal').style.display = 'flex';
        }
        
        // 작업자 수동 배정 모달 닫기
        function closeManualWorkerAssignmentModal() {
            document.getElementById('manualWorkerAssignmentModal').style.display = 'none';
        }
        
        // 검색 키 입력 처리
        function handleManualSearchKeypress(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                searchManualWorkers();
            }
        }
        
        // 작업자 검색 함수
        function searchManualWorkers() {
            const searchOption = document.getElementById('manualSearchOption').value;
            const searchInput = document.getElementById('manualSearchInput').value.trim();
            
            if (!searchInput) {
                alert('검색어를 입력해주세요.');
                return;
            }
            
            // 시나리오: "차정훈" 검색 시 결과 표시
            let searchResults = [];
            
            if (searchInput.includes('차정훈') || searchInput.includes('정훈')) {
                searchResults = [{
                    id: 'worker_001',
                    name: '차정훈',
                    email: 'jeonghoon@email.com',
                    phone: '010-1234-5678',
                    address: '서울특별시 강남구',
                    certificate: '1급'
                }];
            } else if (searchInput.includes('김철수') || searchInput.includes('철수')) {
                searchResults = [{
                    id: 'worker_002',
                    name: '김철수',
                    email: 'chulsu@email.com',
                    phone: '010-2345-6789',
                    address: '경기도 수원시',
                    certificate: '2급'
                }];
            }
            
            // 검색 결과 표시
            displayManualSearchResults(searchResults);
        }
        
        // 수동 배정 모달 검색 결과 표시 함수
        function displayManualSearchResults(results) {
            const searchResultsContainer = document.getElementById('manualSearchResults');
            const searchResultCount = document.getElementById('manualSearchResultCount');
            
            if (!searchResultsContainer) {
                return;
            }
            
            // 검색 결과 개수 업데이트
            if (searchResultCount) {
                searchResultCount.textContent = results.length;
            }
            
            if (results.length === 0) {
                searchResultsContainer.innerHTML = `
                    <div style="padding: 60px 20px; text-align: center; color: #9ca3af; font-size: 14px;">
                        검색 결과가 없습니다
                    </div>
                `;
                return;
            }
            
            // 검색 결과 HTML 생성
            let resultsHTML = '';
            results.forEach((worker, index) => {
                resultsHTML += `
                    <div class="worker-result-item" style="padding: 16px 20px; border-bottom: ${index < results.length - 1 ? '1px solid #f3f4f6' : 'none'}; cursor: pointer;" 
                         onclick="selectManualWorkerRadio('${worker.id}')">
                        <div style="display: flex; align-items: flex-start; gap: 12px;">
                            <input type="radio" name="selectedManualWorker" value="${worker.id}" 
                                   onchange="handleManualWorkerSelection()" 
                                   style="width: 16px; height: 16px; cursor: pointer; margin-top: 2px;">
                            <div style="flex: 1;">
                                <div style="font-size: 16px; font-weight: 600; color: #374151; margin-bottom: 4px;">
                                    ${worker.name}
                                </div>
                                <div style="font-size: 14px; color: #6b7280; margin-bottom: 2px;">
                                    ${worker.email}
                                </div>
                                <div style="display: flex; gap: 15px; font-size: 14px; color: #6b7280;">
                                    <span>📞 ${worker.phone}</span>
                                    <span>📍 ${worker.address}</span>
                                    <span style="background: #f3f4f6; color: #374151; padding: 2px 6px; border-radius: 8px; font-size: 12px;">
                                        🏆 ${worker.certificate}급
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            // 검색 결과 HTML 설정
            searchResultsContainer.innerHTML = resultsHTML;
        }
        
        // 수동 배정 모달 작업자 라디오 버튼 선택 헬퍼 함수
        function selectManualWorkerRadio(workerId) {
            const radio = document.querySelector(`input[name="selectedManualWorker"][value="${workerId}"]`);
            if (radio) {
                radio.checked = true;
                handleManualWorkerSelection();
            }
        }
        
        // 수동 배정 모달 작업자 선택 처리
        function handleManualWorkerSelection() {
            const selectedRadio = document.querySelector('input[name="selectedManualWorker"]:checked');
            const assignBtn = document.getElementById('assignSelectedWorkerBtn');
            
            if (selectedRadio && assignBtn) {
                assignBtn.disabled = false;
                assignBtn.style.opacity = '1';
            }
        }
        
        // 선택한 작업자 배정 (수동 배정 모달용)
        function assignSelectedWorker() {
            const selectedRadio = document.querySelector('input[name="selectedManualWorker"]:checked');
            
            if (!selectedRadio) {
                alert('배정할 작업자를 선택해주세요.');
                return;
            }
            
            // 선택된 작업자 정보 찾기
            const workerId = selectedRadio.value;
            const workerItem = selectedRadio.closest('.worker-result-item');
            const workerName = workerItem.querySelector('div[style*="font-weight: 600"]').textContent;
            
            // 현재 선택된 파일 정보 가져오기
            const selectedFile = window.selectedFileInfo;
            
            if (selectedFile) {
                // 작업관리에서 개별 배정
                const targetFileName = selectedFile.fileName;
                const confirmMessage = `"${workerName}" 작업자를 "${targetFileName}" 파일에 배정하시겠습니까?`;
                
                if (confirm(confirmMessage)) {
                    updateWorkerInManagementTable(workerName);
                    
                    // 모달들 닫기
                    closeManualWorkerAssignmentModal();
                    
                    alert(`"${workerName}" 작업자가 "${targetFileName}" 파일에 배정되었습니다.`);
                }
            } else {
                alert('배정할 파일 정보를 찾을 수 없습니다.');
                return;
            }
        }

        // 수동 배정된 작업자 목록 UI 업데이트
        function updateManuallyAssignedWorkersDisplay() {
            const count = manuallyAssignedWorkers.length;
            
            // 웍스파이용
            const section1 = document.getElementById('manuallyAssignedWorkersSection');
            const list1 = document.getElementById('manuallyAssignedWorkersList');
            const counter1 = document.getElementById('manualAssignedCount');
            
            // 일반용
            const section2 = document.getElementById('manuallyAssignedWorkersSection2');
            const list2 = document.getElementById('manuallyAssignedWorkersList2');
            const counter2 = document.getElementById('manualAssignedCount2');
            
            if (count > 0) {
                // 섹션 표시
                if (section1) section1.style.display = 'block';
                if (section2) section2.style.display = 'block';
                
                // 카운터 업데이트
                if (counter1) counter1.textContent = count;
                if (counter2) counter2.textContent = count;
                
                // 작업자 목록 생성
                let html = '';
                manuallyAssignedWorkers.forEach((worker, index) => {
                    html += `
                        <div onclick="openManualAssignedWorkerDetail('${worker.id}')" style="display: flex; align-items: center; justify-content: space-between; padding: 12px; background: white; border-radius: 6px; margin-bottom: 8px; border: 1px solid #e2e8f0; cursor: pointer; transition: all 0.2s ease;" onmouseover="this.style.backgroundColor='#f8fafc'; this.style.borderColor='#4f46e5';" onmouseout="this.style.backgroundColor='white'; this.style.borderColor='#e2e8f0';">
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <div style="display: flex; align-items: center; justify-content: center; width: 32px; height: 32px; background: #4f46e5; color: white; border-radius: 50%; font-size: 12px; font-weight: 600;">
                                    ${index + 1}
                                </div>
                                <div>
                                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 2px;">
                                        <span style="font-weight: 600; color: #1f2937;">${worker.name}</span>
                                        <span style="font-size: 11px; color: #4f46e5;">${worker.email}</span>
                                    </div>
                                    <div style="font-size: 12px; color: #6b7280;">${worker.phone} | ${worker.address}</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span style="background: #ddd6fe; color: #7c3aed; padding: 4px 8px; border-radius: 12px; font-size: 11px; font-weight: 500;">
                                    ${worker.certificate}
                                </span>
                                <button onclick="event.stopPropagation(); removeManuallyAssignedWorker('${worker.id}')" style="color: #ef4444; border: none; background: none; cursor: pointer; padding: 4px; border-radius: 4px;" title="제거">
                                    ✕
                                </button>
                            </div>
                        </div>
                    `;
                });
                
                // 목록 업데이트
                if (list1) list1.innerHTML = html;
                if (list2) list2.innerHTML = html;
            } else {
                // 섹션 숨기기
                if (section1) section1.style.display = 'none';
                if (section2) section2.style.display = 'none';
            }
        }

        // 수동 배정된 작업자 제거
        function removeManuallyAssignedWorker(workerId) {
            const workerIndex = manuallyAssignedWorkers.findIndex(worker => worker.id === workerId);
            if (workerIndex > -1) {
                const worker = manuallyAssignedWorkers[workerIndex];
                if (confirm(`${worker.name} 작업자 배정을 취소하시겠습니까?`)) {
                    manuallyAssignedWorkers.splice(workerIndex, 1);
                    updateManuallyAssignedWorkersDisplay();
                }
            }
        }

        // 수동 배정된 작업자 상세정보 표시
        function openManualAssignedWorkerDetail(workerId) {
            const worker = manuallyAssignedWorkers.find(w => w.id === workerId);
            if (!worker) return;

            // 작업자 상세정보 모달에 데이터 설정
            document.getElementById('detail-name').textContent = worker.name || '김작업';
            document.getElementById('detail-phone').textContent = worker.phone || '010-1234-5678';
            document.getElementById('detail-address').textContent = worker.address || '서울특별시 강남구';
            document.getElementById('detail-device').textContent = '소리자바';
            document.getElementById('detail-association').textContent = '정회원';
            document.getElementById('detail-coupon').textContent = '2H30-5H4A-6E7F';
            
            // 기본정보
            const genders = ['남성', '여성'];
            const randomGender = genders[Math.floor(Math.random() * genders.length)];
            document.getElementById('detail-gender').textContent = randomGender;
            
            const birthYear = 1980 + Math.floor(Math.random() * 20); // 1980-1999
            const birthMonth = String(Math.floor(Math.random() * 12) + 1).padStart(2, '0');
            const birthDay = String(Math.floor(Math.random() * 28) + 1).padStart(2, '0');
            document.getElementById('detail-birth').textContent = `${birthYear}.${birthMonth}.${birthDay}`;
            
            document.getElementById('detail-email').textContent = worker.email || 'worker@email.com';
            document.getElementById('detail-education').textContent = '대학 4년 졸업';
            document.getElementById('detail-school').textContent = '한국대학교';
            document.getElementById('detail-major').textContent = '컴퓨터공학과';
            document.getElementById('detail-korean-stenography').textContent = worker.certificate || '2급';
            
            const years = ['2018년', '2019년', '2020년', '2021년', '2022년'];
            const randomYear = years[Math.floor(Math.random() * years.length)];
            document.getElementById('detail-acquisition-year').textContent = randomYear;
            
            const rounds = ['1회', '2회', '3회', '4회'];
            const randomRound = rounds[Math.floor(Math.random() * rounds.length)];
            document.getElementById('detail-exam-round').textContent = randomRound;
            
            document.getElementById('detail-marketing').textContent = 'Y';
            
            // 작업자 상세정보 모달 표시
            document.getElementById('workerDetailModal').style.display = 'block';
        }

        // Enter 키로 검색
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('searchKeyword');
            if (searchInput) {
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        searchWorkers();
                    }
                });
            }
        });
    </script>

    <!-- 웍스파이 프로젝트 등록 팝업 - 교체 중 -->
    <div id="worksbyProjectModal" class="modal-overlay" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <h2>웍스파이 프로젝트 등록</h2>
                <button class="modal-close" onclick="closeWorksbyProjectModal()">&times;</button>
            </div>
            
            <form class="modal-form" id="worksbyProjectForm">
                <div class="form-row" style="display: flex; align-items: flex-end; gap: 20px;">
                    <div class="form-group required" style="flex: 1;">
                        <label>서비스 <span class="required-mark">*</span></label>
                        <input type="text" id="worksbyServiceSelect" value="소리바로" readonly style="background-color: #f9fafb; color: #6b7280; cursor: not-allowed;">
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 30px; margin-bottom: 8px;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <label style="margin: 0; font-size: 14px; font-weight: 500; color: #374151;">신청버튼</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="worksbyActiveToggle" class="toggle-input" checked>
                                <label for="worksbyActiveToggle" class="toggle-label"></label>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="worksbyImportantProject">
                            <label for="worksbyImportantProject" style="margin: 0; font-size: 14px; font-weight: 500; color: #374151;">중요</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group required full-width">
                        <label>프로젝트명 <span class="required-mark">*</span></label>
                        <input type="text" id="worksbyProjectTitle" required placeholder="프로젝트명을 입력하세요">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group required">
                        <label>모집기간 <span class="required-mark">*</span></label>
                        <div class="date-range">
                            <input type="datetime-local" id="worksbyProjectStartDate" required>
                            <span>~</span>
                            <input type="datetime-local" id="worksbyProjectEndDate" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>작업자 수</label>
                        <input type="number" id="worksbyWorkerCount" placeholder="0" style="width: 80px;">
                    </div>
                    
                    <div class="form-group">
                        <label>금액</label>
                        <input type="text" id="worksbyBudgetAmount" placeholder="금액을 입력하세요" style="width: 120px;">
                    </div>

                </div>

                <!-- 작업기간 / 지원자격 -->
                <div class="form-row">
                    <div class="form-group required">
                        <label>작업기간</label>
                        <div class="date-range">
                            <input type="date" id="worksbyWorkStartDate" style="width: 217px; flex: none;">
                            <span>~</span>
                            <input type="date" id="worksbyWorkEndDate" style="width: 217px; flex: none;">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>지원자격</label>
                        <select id="worksbyQualification" style="min-width: 140px; height: 36px; border: 1px solid #d1d5db; border-radius: 6px; padding: 0 10px; font-size: 14px;">
                            <option value="anyone">누구나</option>
                            <option value="stenographer">속기사</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group full-width">
                        <label>프로젝트 설명</label>
                        <div class="simple-editor-toolbar">
                            <button type="button" class="simple-editor-btn" onclick="formatText('bold')" title="굵게"><strong>B</strong></button>
                            <button type="button" class="simple-editor-btn" onclick="formatText('underline')" title="밑줄"><u>U</u></button>
                            <button type="button" class="simple-editor-btn" onclick="formatText('insertUnorderedList')" title="목록">•</button>
                            <button type="button" class="simple-editor-btn" onclick="formatText('createLink')" title="링크">🔗</button>
                        </div>
                        <div id="worksbyContentEditor" contenteditable="true" class="simple-content-editor" 
                             placeholder="프로젝트 상세설명을 입력하세요..."></div>
                    </div>
                </div>
                
                <!-- 파일 업로드 섹션 -->
                <div class="form-row">
                    <div class="form-group">
                        <label>썸네일</label>
                        <div class="file-upload-area" id="worksbyThumbnailUpload">
                            <div class="file-upload-content">
                                <div class="file-upload-icon">🖼️</div>
                                <div class="file-upload-text">
                                    <p>썸네일 이미지를 업로드하세요</p>
                                    <p class="file-upload-subtext">JPG, PNG, GIF (최대 5MB)</p>
                                </div>
                                <button type="button" class="file-upload-btn" onclick="document.getElementById('worksbyThumbnailInput').click()">파일 선택</button>
                                <input type="file" id="worksbyThumbnailInput" accept="image/*" style="display: none;" onchange="handleWorksbyThumbnailUpload(this)">
                            </div>
                            <div class="file-preview" id="worksbyThumbnailPreview" style="display: none;">
                                <img id="worksbyThumbnailImage" src="" alt="썸네일 미리보기">
                                <button type="button" class="file-remove-btn" onclick="removeWorksbyThumbnail()">✕</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>첨부파일</label>
                        <div class="file-upload-area" id="worksbyAttachmentUpload">
                            <div class="file-upload-content">
                                <div class="file-upload-icon">📎</div>
                                <div class="file-upload-text">
                                    <p>첨부파일을 업로드하세요</p>
                                    <p class="file-upload-subtext">모든 파일 형식 (최대 10MB)</p>
                                </div>
                                <button type="button" class="file-upload-btn" onclick="document.getElementById('worksbyAttachmentInput').click()">파일 선택</button>
                                <input type="file" id="worksbyAttachmentInput" multiple style="display: none;" onchange="handleWorksbyAttachmentUpload(this)">
                            </div>
                            <div class="file-list" id="worksbyAttachmentList"></div>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn-save" onclick="handleWorksbyProjectSubmit()">저장</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 웍스파이 프로젝트 상세보기 팝업 -->
    <div id="worksbyDetailModal" class="modal-overlay" style="display: none;">
        <div class="modal-container detail-modal">
            <div class="modal-header">
                <h2>📋 웍스파이 프로젝트 상세정보</h2>
                <button class="modal-close" onclick="closeWorksbyDetailModal()">&times;</button>
            </div>
            
            <div class="detail-content">
                <!-- 탭 네비게이션 -->
                <div class="tab-navigation">
                    <button class="tab-btn active" onclick="showWorksbyTab('info', this)" style="background: white; color: #3b82f6; border-bottom: 3px solid #3b82f6;">📄 프로젝트 정보</button>
                    <button class="tab-btn" onclick="showWorksbyTab('workers', this)" style="background: #f8fafc; color: #6b7280;">👥 작업자 관리</button>
                </div>
                
                <!-- 탭 콘텐츠 -->
                <div class="tab-content">
                    <!-- 프로젝트 정보 탭 -->
                    <div id="worksby-tab-info" class="tab-panel active">
                        <div class="detail-section">
                            <div class="info-grid">
                                <div class="info-item">
                                    <label>프로젝트번호</label>
                                    <span id="worksbyDetailNo"></span>
                                </div>
                                <div class="info-item">
                                    <label>서비스</label>
                                    <span id="worksbyDetailService"></span>
                                </div>
                                <div class="info-item">
                                    <label>프로젝트 상태</label>
                                    <span id="worksbyDetailStatus"></span>
                                </div>
                                <div class="info-item">
                                    <label>등록일</label>
                                    <span id="worksbyDetailRegDate"></span>
                                </div>
                            </div>
                            
                            <div class="info-item full-width" style="margin-bottom: 25px;">
                                <label>프로젝트명</label>
                                <h3 id="worksbyDetailTitle"></h3>
                            </div>
                            
                            <div class="info-grid">
                                <div class="info-item">
                                    <label>진행기간</label>
                                    <span id="worksbyDetailProjectPeriod"></span>
                                </div>
                                <div class="info-item">
                                    <label>작업자 수</label>
                                    <span id="worksbyDetailWorkerCount"></span>
                                </div>
                                <div class="info-item">
                                    <label>금액</label>
                                    <span id="worksbyDetailBudget"></span>
                                </div>
                            </div>

                            <div class="info-item full-width" style="margin-bottom: 25px;">
                                <label>프로젝트 설명</label>
                                <div id="worksbyDetailContent" class="content-box"></div>
                            </div>
                            
                            <div class="info-grid">
                                <div class="info-item">
                                    <label>썸네일</label>
                                    <div id="worksbyDetailThumbnail" class="thumbnail-preview">이미지 없음</div>
                                </div>
                                <div class="info-item">
                                    <label>첨부파일</label>
                                    <div id="worksbyDetailAttachments" class="attachments-list">파일 없음</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 작업자 관리 탭 -->
                    <div id="worksby-tab-workers" class="tab-panel">
                        <div class="detail-section">
                            <div class="section-header">
                                <h3 class="section-title">👥 작업자 관리</h3>
                                <div class="applicant-stats">
                                    <span class="stat-item">총 <strong id="worksbyTotalWorkers">0</strong>명</span>
                                    <span class="stat-item">배정 <strong id="worksbyAssignedCount">0</strong>명</span>
                                    <span class="stat-item">미배정 <strong id="worksbyExcludedCount">0</strong>명</span>
                                </div>
                            </div>
                            
                            <div class="applicants-table-wrapper">
                                <table class="applicants-table">
                                    <thead>
                                        <tr>
                                            <th><input type="checkbox" id="worksbySelectAllWorkers" onchange="toggleAllWorksbyWorkers(this)"></th>
                                            <th>이름</th>
                                            <th>성별</th>
                                            <th>연락처</th>
                                            <th>생년월일</th>
                                            <th>주소</th>
                                            <th>한글속기자격증</th>
                                            <th>배정일</th>
                                            <th>상태</th>
                                        </tr>
                                    </thead>
                                    <tbody id="worksbyWorkersList">
                                        <!-- 샘플 작업자 데이터 -->
                                        <tr>
                                            <td style="text-align: center;"><input type="checkbox" name="worksbyWorkerSelect" value="1"></td>
                                            <td style="text-align: center;">김민영</td>
                                            <td style="text-align: center;">여성</td>
                                            <td style="text-align: center;">010-1**2-3456</td>
                                            <td style="text-align: center;">1990.**.**</td>
                                            <td style="text-align: center;">경기도 안양시</td>
                                            <td style="text-align: center;">1급</td>
                                            <td style="text-align: center;">-</td>
                                            <td style="text-align: center;"><span class="applicant-status status-cancelled">미배정</span></td>
                                        </tr>
                                        <tr>
                                            <td style="text-align: center;"><input type="checkbox" name="worksbyWorkerSelect" value="2"></td>
                                            <td style="text-align: center;">박준호</td>
                                            <td style="text-align: center;">남성</td>
                                            <td style="text-align: center;">010-2**3-4567</td>
                                            <td style="text-align: center;">1988.**.**</td>
                                            <td style="text-align: center;">서울특별시 용산구</td>
                                            <td style="text-align: center;">2급</td>
                                            <td style="text-align: center;">-</td>
                                            <td style="text-align: center;"><span class="applicant-status status-cancelled">미배정</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- 배정/미배정 버튼 -->
                            <div class="batch-actions" style="display: flex; gap: 10px; align-items: center; margin-top: 15px; padding: 15px; background: white; border-radius: 8px; border: 1px solid #e5e7eb;">
                                <div style="display: flex; align-items: center; gap: 8px; color: #6b7280; font-size: 14px;">
                                    <span>선택된 작업자:</span>
                                    <span id="worksbySelectedWorkerCount" style="font-weight: 600; color: #374151;">0명</span>
                                </div>
                                <div style="margin-left: auto; display: flex; gap: 8px;">
                                    <button class="batch-btn btn-approve" onclick="batchUpdateWorksbyWorkerStatus('assigned')" style="background: #10b981; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 13px; cursor: pointer; transition: background-color 0.2s;">
                                        ✓ 배정
                                    </button>
                                    <button class="batch-btn btn-reject" onclick="batchUpdateWorksbyWorkerStatus('unassigned')" style="background: #ef4444; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 13px; cursor: pointer; transition: background-color 0.2s;">
                                        ✗ 미배정
                                    </button>
                                    <button class="batch-btn btn-manual" onclick="openManualAssignModal()" style="background: #8b5cf6; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 13px; cursor: pointer; transition: background-color 0.2s;">
                                        👤 작업자 수동 배정
                                    </button>
                                </div>
                            </div>
                            
                            <!-- 수동 배정된 작업자 목록 -->
                            <div id="manuallyAssignedWorkersSection" style="display: none; margin-top: 20px; padding: 15px; background: #f8fafc; border-radius: 8px; border: 1px solid #e2e8f0;">
                                <h4 style="margin: 0 0 15px 0; color: #4f46e5; font-size: 14px; font-weight: 600;">
                                    🎯 수동 배정된 작업자 (<span id="manualAssignedCount">0</span>명)
                                </h4>
                                <div id="manuallyAssignedWorkersList"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeWorksbyDetailModal()">닫기</button>
                <button type="button" class="btn-edit" id="worksbyModalActionBtn" onclick="editWorksbyProject()">수정</button>
            </div>
        </div>
    </div>
    <!-- projects.html에서 가져온 프로젝트 등록 팝업 -->
    <div id="projectModal" class="modal-overlay" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <h2>프로젝트 등록</h2>
                <button class="modal-close" onclick="closeProjectModal()">&times;</button>
            </div>
            
            <form class="modal-form" id="projectForm">
                <div class="form-row" style="display: flex; align-items: flex-end; gap: 20px;">
                    <div class="form-group required" style="flex: 1;">
                        <label>서비스 <span class="required-mark">*</span></label>
                        <input type="text" id="serviceSelect" value="소리바로" readonly style="background-color: #f9fafb; color: #6b7280; cursor: not-allowed;">
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 30px; margin-bottom: 8px;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <label style="margin: 0; font-size: 14px; font-weight: 500; color: #374151;">신청버튼</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="activeToggle" class="toggle-input" checked>
                                <label for="activeToggle" class="toggle-label"></label>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="importantProject">
                            <label for="importantProject" style="margin: 0; font-size: 14px; font-weight: 500; color: #374151;">중요</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group required full-width">
                        <label>프로젝트명 <span class="required-mark">*</span></label>
                        <input type="text" id="projectTitle" required placeholder="프로젝트명을 입력하세요">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group required">
                        <label>모집기간 <span class="required-mark">*</span></label>
                        <div class="date-range">
                            <input type="datetime-local" id="projectStartDate" required>
                            <span>~</span>
                            <input type="datetime-local" id="projectEndDate" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>작업자 수</label>
                        <input type="number" id="workerCount" placeholder="0" style="width: 80px;">
                    </div>
                    
                    <div class="form-group">
                        <label>금액</label>
                        <input type="text" id="budgetAmount" placeholder="금액을 입력하세요" style="width: 120px;">
                    </div>

                </div>
                
                <!-- 작업기간 / 지원자격 -->
                <div class="form-row">
                    <div class="form-group">
                        <label>작업기간</label>
                        <div class="date-range">
                            <input type="date" id="projectWorkStartDate" style="width: 217px; flex: none;">
                            <span>~</span>
                            <input type="date" id="projectWorkEndDate" style="width: 217px; flex: none;">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>지원자격</label>
                        <select id="projectQualification" style="min-width: 140px; height: 36px; border: 1px solid #d1d5db; border-radius: 6px; padding: 0 10px; font-size: 14px;">
                            <option value="anyone">누구나</option>
                            <option value="stenographer">속기사</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group full-width">
                        <label>프로젝트 설명</label>
                        <div class="simple-editor-toolbar">
                            <button type="button" class="simple-editor-btn" onclick="formatText('bold')" title="굵게"><strong>B</strong></button>
                            <button type="button" class="simple-editor-btn" onclick="formatText('underline')" title="밑줄"><u>U</u></button>
                            <button type="button" class="simple-editor-btn" onclick="formatText('insertUnorderedList')" title="목록">•</button>
                            <button type="button" class="simple-editor-btn" onclick="formatText('createLink')" title="링크">🔗</button>
                        </div>
                        <div id="contentEditor" contenteditable="true" class="simple-content-editor" 
                             placeholder="프로젝트 상세설명을 입력하세요..."></div>
                    </div>
                </div>
                
                <!-- 파일 업로드 섹션 -->
                <div class="form-row">
                    <div class="form-group">
                        <label>썸네일</label>
                        <div class="file-upload-area" id="thumbnailUpload">
                            <div class="file-upload-content">
                                <div class="file-upload-icon">🖼️</div>
                                <div class="file-upload-text">
                                    <p>썸네일 이미지를 업로드하세요</p>
                                    <p class="file-upload-subtext">JPG, PNG, GIF (최대 5MB)</p>
                                </div>
                                <button type="button" class="file-upload-btn" onclick="document.getElementById('thumbnailInput').click()">파일 선택</button>
                                <input type="file" id="thumbnailInput" accept="image/*" style="display: none;" onchange="handleThumbnailUpload(this)">
                            </div>
                            <div class="file-preview" id="thumbnailPreview" style="display: none;">
                                <img id="thumbnailImage" src="" alt="썸네일 미리보기">
                                <button type="button" class="file-remove-btn" onclick="removeThumbnail()">✕</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>첨부파일</label>
                        <div class="file-upload-area" id="attachmentUpload">
                            <div class="file-upload-content">
                                <div class="file-upload-icon">📎</div>
                                <div class="file-upload-text">
                                    <p>첨부파일을 업로드하세요</p>
                                    <p class="file-upload-subtext">모든 파일 형식 (최대 10MB)</p>
                                </div>
                                <button type="button" class="file-upload-btn" onclick="document.getElementById('attachmentInput').click()">파일 선택</button>
                                <input type="file" id="attachmentInput" multiple style="display: none;" onchange="handleAttachmentUpload(this)">
                            </div>
                            <div class="file-list" id="attachmentList"></div>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="submit" class="btn-save">저장</button>
                </div>
            </form>
        </div>
    </div>

    <!-- projects.html에서 가져온 프로젝트 상세보기 팝업 -->
    <div id="detailModal" class="modal-overlay" style="display: none;">
        <div class="modal-container detail-modal">
            <div class="modal-header">
                <h2>📋 프로젝트 상세정보</h2>
                <button class="modal-close" onclick="closeDetailModal()">&times;</button>
            </div>
            
            <div class="detail-content">
                <!-- 탭 네비게이션 제거 - 프로젝트 정보만 표시 -->
                <div style="background: #f8fafc; padding: 15px 20px; border-bottom: 1px solid #e5e7eb;">
                    <h2 style="margin: 0; font-size: 18px; font-weight: 600; color: #3b82f6; display: flex; align-items: center; gap: 10px;">
                        📄 프로젝트 정보
                    </h2>
                </div>
                
                <!-- 탭 콘텐츠 -->
                <div class="tab-content">
                    <!-- 프로젝트 정보 탭 -->
                    <div id="tab-info" class="tab-panel active">
                        <div class="detail-section">
                            <div class="info-grid" style="grid-template-columns: repeat(3, 1fr); align-items: end;">
                                <div class="info-item">
                                    <label>프로젝트번호</label>
                                    <span id="detailNo">PJ202507160057</span>
                                </div>
                                <div class="info-item">
                                    <label>서비스</label>
                                    <span id="detailService">웍스파이</span>
                                </div>
                                <div class="info-item">
                                    <label>등록일</label>
                                    <span id="detailRegDate">2025.07.16 09:00</span>
                                </div>
                            </div>
                            
                            <div class="info-item full-width" style="margin-bottom: 25px;">
                                <label>프로젝트명</label>
                                <h3 id="detailTitle">팀벨 글로벌 속기 시스템 구축 프로젝트</h3>
                            </div>
                            
                            
                            
                            <div class="project-summary-row" style="display: grid; grid-template-columns: 2fr 1fr 2fr 1fr; gap: 16px; align-items: stretch; position: relative; z-index: 0; margin-bottom: 20px;">
                                <div class="summary-item" style="min-height: 92px; padding: 14px 16px; background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; box-shadow: 0 1px 2px rgba(0,0,0,0.03);">
                                    <label style="font-size: 12px; font-weight: 700; color: #6b7280; margin-bottom: 6px; display: block;">모집기간</label>
                                    <div id="detailProjectPeriod" style="font-size: 14px; font-weight: 600; color: #111827; white-space: nowrap;">2025.08.06 11:00 ~ 2025.08.20 11:00</div>
                                </div>
                                <div class="summary-item" style="min-height: 92px; padding: 14px 16px; background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; box-shadow: 0 1px 2px rgba(0,0,0,0.03); display: flex; flex-direction: column; justify-content: center;">
                                    <label style="font-size: 12px; font-weight: 700; color: #6b7280; margin-bottom: 8px;">모집상태</label>
                                    <div><span id="recruitStatusBadge" style="display:inline-block; background: #3b82f6; color: white; padding: 6px 12px; border-radius: 999px; font-size: 12px; font-weight: 800; min-width: 86px; text-align: center;">진행중</span></div>
                                </div>
                                <div class="summary-item" style="min-height: 92px; padding: 14px 16px; background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; box-shadow: 0 1px 2px rgba(0,0,0,0.03);">
                                    <label style="font-size: 12px; font-weight: 700; color: #6b7280; margin-bottom: 6px; display: block;">작업기간</label>
                                    <div id="detailWorkPeriod" style="font-size: 14px; font-weight: 600; color: #111827; white-space: nowrap;">2025.08.21 ~ 2025.09.02</div>
                                </div>
                                <div class="summary-item" style="min-height: 92px; padding: 14px 16px; background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; box-shadow: 0 1px 2px rgba(0,0,0,0.03); display: flex; flex-direction: column; justify-content: center;">
                                    <label style="font-size: 12px; font-weight: 700; color: #6b7280; margin-bottom: 8px;">작업상태</label>
                                    <div><span id="workStatusBadge" style="display:inline-block; background: #3b82f6; color: white; padding: 6px 12px; border-radius: 999px; font-size: 12px; font-weight: 800; min-width: 86px; text-align: center;">진행중</span></div>
                                </div>
                            </div>
                            <div class="project-summary-row" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; align-items: stretch;">
                                <div class="summary-item" style="min-height: 92px; padding: 14px 16px; background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; box-shadow: 0 1px 2px rgba(0,0,0,0.03);">
                                    <label style="font-size: 12px; font-weight: 700; color: #6b7280; margin-bottom: 6px; display: block;">작업자 수</label>
                                    <div id="detailWorkerCount" style="font-size: 14px; font-weight: 600; color: #111827;">0 / 5명</div>
                                </div>
                                <div class="summary-item" style="min-height: 92px; padding: 14px 16px; background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; box-shadow: 0 1px 2px rgba(0,0,0,0.03);">
                                    <label style="font-size: 12px; font-weight: 700; color: #6b7280; margin-bottom: 6px; display: block;">금액</label>
                                    <div id="detailBudget" style="font-size: 14px; font-weight: 600; color: #111827;">500,000원</div>
                                </div>
                                <div class="summary-item" style="min-height: 92px; padding: 14px 16px; background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; box-shadow: 0 1px 2px rgba(0,0,0,0.03);">
                                    <label style="font-size: 12px; font-weight: 700; color: #6b7280; margin-bottom: 6px; display: block;">지원자격</label>
                                    <div id="detailQualification" style="font-size: 14px; font-weight: 600; color: #111827;">누구나</div>
                                </div>
                            </div>

                            <div class="info-item full-width" style="margin-bottom: 25px;">
                                <label>프로젝트 설명</label>
                                <div id="detailContent" class="content-box">팀벨 글로벌 속기 시스템 구축을 위한 통합 프로젝트입니다.<br>최신 AI 기술을 활용한 실시간 속기 솔루션을 개발합니다.</div>
                            </div>
                            
                            <div class="info-grid">
                                <div class="info-item">
                                    <label>썸네일</label>
                                    <div id="detailThumbnail" class="thumbnail-preview">이미지 없음</div>
                                </div>
                                <div class="info-item">
                                    <label>첨부파일</label>
                                    <div id="detailAttachments" class="attachments-list">파일 없음</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
            
            <div class="modal-footer">
                <button type="button" class="btn-cancel" id="modalCloseProjectBtn" style="background: #ef4444; color: white; border: none; border-radius: 6px; padding: 10px 20px; font-size: 14px; cursor: pointer;" onclick="closeProjectPermanently()">프로젝트 마감</button>
                <div style="margin-left: auto; display: flex; gap: 10px;">
                    <button type="button" class="btn-secondary" onclick="closeDetailModal()">닫기</button>
                    <button type="button" class="btn-edit" id="modalActionBtn" onclick="editProject()">수정</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 작업자 상세정보 팝업 -->
    <div id="workerDetailModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: relative; width: 90%; max-width: 1000px; height: 85%; margin: 7.5% auto; background: white; border-radius: 12px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); overflow: hidden;">
            <!-- 팝업 헤더 -->
            <div style="background: #4f46e5; color: white; padding: 20px 30px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #e5e7eb;">
                <h2 style="margin: 0; font-size: 1.4rem; font-weight: 600;">작업자 상세정보</h2>
                <button onclick="closeWorkerDetail()" style="background: none; border: none; color: white; font-size: 28px; cursor: pointer; padding: 0; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">×</button>
            </div>

            <!-- 팝업 본문 -->
            <div style="height: calc(100% - 80px); overflow-y: auto; padding: 30px;">
                <!-- 첫 번째 행: 작업자상세 + 기본정보 -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; border-bottom: 1px solid #e5e7eb; padding-bottom: 30px;">
                    <div>
                        <h3 style="margin: 0 0 15px 0; color: #1f2937; font-size: 1.1rem; font-weight: 600; padding-bottom: 8px; border-bottom: 2px solid #4f46e5;">작업자상세</h3>
                        <div style="display: grid; grid-template-columns: 100px 1fr; gap: 12px; align-items: center;">
                            <span style="font-weight: 500; color: #6b7280;">이름</span>
                            <span id="detail-name" style="color: #374151;">김작업</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">휴대전화</span>
                            <span id="detail-phone" style="color: #374151;">010-1234-5678</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">주소</span>
                            <span id="detail-address" style="color: #374151;">서울특별시 강남구</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">사용기종</span>
                            <span id="detail-device" style="color: #374151;">소리자바</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">협회</span>
                            <span id="detail-association" style="color: #374151;">정회원</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">쿠폰정보</span>
                            <span id="detail-coupon" style="color: #374151;">2H30-5H4A-6E7F</span>
                        </div>
                    </div>
                    <div>
                        <h3 style="margin: 0 0 15px 0; color: #1f2937; font-size: 1.1rem; font-weight: 600; padding-bottom: 8px; border-bottom: 2px solid #4f46e5;">기본정보</h3>
                        <div style="display: grid; grid-template-columns: 100px 1fr; gap: 12px; align-items: center;">
                            <span style="font-weight: 500; color: #6b7280;">성별</span>
                            <span id="detail-gender" style="color: #374151;">남성</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">생년월일</span>
                            <span id="detail-birth" style="color: #374151;">1985.03.12</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">이메일</span>
                            <span id="detail-email" style="color: #374151;">kimwork@email.com</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">최종학력</span>
                            <span id="detail-education" style="color: #374151;">대학 4년 졸업</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">학교명</span>
                            <span id="detail-school" style="color: #374151;">한국대학교</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">전공명</span>
                            <span id="detail-major" style="color: #374151;">컴퓨터공학과</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">한글속기</span>
                            <span id="detail-korean-stenography" style="color: #374151;">2급</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">취득년도</span>
                            <span id="detail-acquisition-year" style="color: #374151;">2020년</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">시험회차</span>
                            <span id="detail-exam-round" style="color: #374151;">1회</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">마케팅동의</span>
                            <span id="detail-marketing" style="color: #374151;">Y</span>
                        </div>
                    </div>
                </div>

                <!-- 두 번째 행: 희망작업조건 + 교육/자격증 -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; border-bottom: 1px solid #e5e7eb; padding-bottom: 30px;">
                    <div>
                        <h3 style="margin: 0 0 15px 0; color: #1f2937; font-size: 1.1rem; font-weight: 600; padding-bottom: 8px; border-bottom: 2px solid #4f46e5;">희망작업조건</h3>
                        <div style="display: grid; grid-template-columns: 100px 1fr; gap: 12px; align-items: center;">
                            <span style="font-weight: 500; color: #6b7280;">근무방법</span>
                            <span id="detail-work-method" style="color: #374151;">재택, 출퇴근, 출장가능</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">작업장소</span>
                            <span id="detail-work-location" style="color: #374151;">전국</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">작업기간</span>
                            <span id="detail-work-period" style="color: #374151;">기간무관</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">작업요일</span>
                            <span id="detail-work-days" style="color: #374151;">요일무관</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">작업시간</span>
                            <span id="detail-work-time" style="color: #374151;">시간무관</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">희망직무</span>
                            <span id="detail-job" style="color: #374151;">속기사, 프리랜서 속기사</span>
                        </div>
                    </div>
                    <div>
                        <h3 style="margin: 0 0 15px 0; color: #1f2937; font-size: 1.1rem; font-weight: 600; padding-bottom: 8px; border-bottom: 2px solid #4f46e5;">교육/자격증</h3>
                        <div style="display: grid; grid-template-columns: 100px 1fr; gap: 12px; align-items: center;">
                            <span style="font-weight: 500; color: #6b7280;">교육명</span>
                            <span id="detail-education-name" style="color: #374151;">기초 교육</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">협회자격증</span>
                            <span id="detail-association-cert" style="color: #374151;">이수완료</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">급수</span>
                            <span id="detail-grade" style="color: #374151;">2급</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">일반자격증</span>
                            <span id="detail-general-cert" style="color: #374151;">컴활 2급</span>
                        </div>
                    </div>
                </div>

                <!-- 세 번째 행: 프로젝트 + 어학능력 -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; border-bottom: 1px solid #e5e7eb; padding-bottom: 30px;">
                    <div>
                        <h3 style="margin: 0 0 15px 0; color: #1f2937; font-size: 1.1rem; font-weight: 600; padding-bottom: 8px; border-bottom: 2px solid #4f46e5;">프로젝트</h3>
                        <div style="display: grid; grid-template-columns: 100px 1fr; gap: 12px; align-items: center;">
                            <span style="font-weight: 500; color: #6b7280;">프로젝트명</span>
                            <span id="detail-project-name" style="color: #374151;">-</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">종류</span>
                            <span id="detail-project-type" style="color: #374151;">녹취 프로젝트</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">건수</span>
                            <span id="detail-project-count" style="color: #374151;">4-10개</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">총 시간</span>
                            <span id="detail-project-hours" style="color: #374151;">50-100시간</span>
                        </div>
                    </div>
                    <div>
                        <h3 style="margin: 0 0 15px 0; color: #1f2937; font-size: 1.1rem; font-weight: 600; padding-bottom: 8px; border-bottom: 2px solid #4f46e5;">어학능력</h3>
                        <div style="display: grid; grid-template-columns: 100px 1fr; gap: 12px; align-items: center;">
                            <span style="font-weight: 500; color: #6b7280;">어학능력</span>
                            <span id="detail-language" style="color: #374151;">영어</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">단계</span>
                            <span id="detail-language-level" style="color: #374151;">중</span>
                        </div>
                    </div>
                </div>

                <!-- 네 번째 행: 경력사항 + 기타조건 -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px; border-bottom: 1px solid #e5e7eb; padding-bottom: 30px;">
                    <div>
                        <h3 style="margin: 0 0 15px 0; color: #1f2937; font-size: 1.1rem; font-weight: 600; padding-bottom: 8px; border-bottom: 2px solid #4f46e5;">경력사항</h3>
                        <div style="display: grid; grid-template-columns: 100px 1fr; gap: 12px; align-items: center;">
                            <span style="font-weight: 500; color: #6b7280;">속기근무서</span>
                            <span id="detail-stenography-workplace" style="color: #374151;">서울지방법원</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">속기고용형태</span>
                            <span id="detail-stenography-employment" style="color: #374151;">정규직</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">속기근무기간</span>
                            <span id="detail-stenography-period" style="color: #374151;">3-5년</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">일반근무서</span>
                            <span id="detail-general-workplace" style="color: #374151;">-</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">일반직급</span>
                            <span id="detail-general-position" style="color: #374151;">-</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">일반직책</span>
                            <span id="detail-general-role" style="color: #374151;">-</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">봉사활동</span>
                            <span id="detail-volunteer" style="color: #374151;">있음</span>
                        </div>
                    </div>
                    <div>
                        <h3 style="margin: 0 0 15px 0; color: #1f2937; font-size: 1.1rem; font-weight: 600; padding-bottom: 8px; border-bottom: 2px solid #4f46e5;">기타조건</h3>
                        <div style="display: grid; grid-template-columns: 100px 1fr; gap: 12px; align-items: center;">
                            <span style="font-weight: 500; color: #6b7280;">우대조건</span>
                            <span id="detail-employment-preference" style="color: #374151;">-</span>
                            
                            <span style="font-weight: 500; color: #6b7280;">병역</span>
                            <span id="detail-military" style="color: #374151;">해당없음</span>
                        </div>
                    </div>
                </div>

                <!-- 다섯 번째 행: 기타사항 + 관리자메모 -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
                    <div>
                        <h3 style="margin: 0 0 15px 0; color: #1f2937; font-size: 1.1rem; font-weight: 600; padding-bottom: 8px; border-bottom: 2px solid #4f46e5;">기타사항</h3>
                        <div id="detail-other-info" style="background: #f3f4f6; border: 1px solid #d1d5db; border-radius: 6px; height: 200px; padding: 15px; color: #374151; font-size: 14px; line-height: 1.5;">
                            작업자의 기타 특이사항이나 추가 정보가 표시됩니다.
                        </div>
                    </div>
                    <div>
                        <h3 style="margin: 0 0 15px 0; color: #1f2937; font-size: 1.1rem; font-weight: 600; padding-bottom: 8px; border-bottom: 2px solid #4f46e5;">관리자메모</h3>
                        <div style="position: relative;">
                            <textarea id="admin-memo" placeholder="관리자 메모를 입력하세요..." style="width: 100%; height: 200px; padding: 15px; border: 1px solid #d1d5db; border-radius: 6px; resize: vertical; font-family: inherit; font-size: 14px; line-height: 1.5; box-sizing: border-box;"></textarea>
                            <button onclick="saveAdminMemo()" style="position: absolute; bottom: 10px; right: 10px; background: #3b82f6; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                관리자메모 저장
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 작업자 수동 배정 검색 팝업 -->
    <div id="manualAssignModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: relative; width: 90%; max-width: 800px; margin: 5% auto; background: white; border-radius: 12px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); overflow: hidden;">
            <!-- 팝업 헤더 -->
            <div style="background: #4f46e5; color: white; padding: 20px 30px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #e5e7eb;">
                <h2 style="margin: 0; font-size: 1.4rem; font-weight: 600;">작업자 수동 배정</h2>
                <button onclick="closeManualAssignModal()" style="background: none; border: none; color: white; font-size: 28px; cursor: pointer; padding: 0; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">×</button>
            </div>

            <!-- 검색 조건 -->
            <div style="padding: 20px 30px; border-bottom: 1px solid #e5e7eb;">
                <div style="display: flex; gap: 15px; align-items: center;">
                    <select id="searchType" style="padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px;">
                        <option value="name">이름</option>
                        <option value="email">이메일</option>
                        <option value="phone">연락처</option>
                    </select>
                    <input type="text" id="searchKeyword" placeholder="검색어를 입력하세요" style="flex: 1; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px;">
                    <button onclick="searchWorkers()" style="background: #3b82f6; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500;">
                        검색
                    </button>
                </div>
            </div>

            <!-- 검색 결과 -->
            <div style="max-height: 400px; overflow-y: auto; padding: 20px 30px;">
                <div id="searchResults">
                    <div style="text-align: center; color: #6b7280; padding: 40px;">
                        검색어를 입력하고 검색 버튼을 눌러주세요.
                    </div>
                </div>
            </div>

            <!-- 배정 버튼 -->
            <div style="padding: 20px 30px; border-top: 1px solid #e5e7eb; text-align: right;">
                <button onclick="closeManualAssignModal()" style="background: #6b7280; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; margin-right: 10px;">
                    취소
                </button>
                <button onclick="assignSelectedWorker()" style="background: #10b981; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500;">
                    선택한 작업자 배정
                </button>
            </div>
        </div>
    </div>

    <!-- 작업자 관리 모달 (vod-detail.html과 동일) -->
    <div id="workerManagementModal" class="modal-overlay" style="display: none;">
        <div class="modal-container" style="max-width: 1000px; width: 95%; max-height: 95vh;">
            <div class="modal-header">
                <h2>👥 작업자 관리</h2>
                <button class="modal-close" onclick="closeWorkerManagementModal()">&times;</button>
            </div>
            
            <div class="modal-content" style="padding: 24px; min-height: 400px;">
                <div class="detail-section" style="margin-bottom: 30px;">
                    <div class="section-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3 class="section-title" style="margin: 0; font-size: 16px; font-weight: 600; color: #374151;">👥 작업자 관리</h3>
                        <div class="applicant-stats" style="display: flex; gap: 20px;">
                            <span class="stat-item" style="font-size: 14px; color: #6b7280;">총 <strong id="totalWorkersModal" style="color: #3b82f6;">5</strong>명</span>
                            <span class="stat-item" style="font-size: 14px; color: #6b7280;">배정 <strong id="assignedCountModal" style="color: #3b82f6;">1</strong>명</span>
                            <span class="stat-item" style="font-size: 14px; color: #6b7280;">미배정 <strong id="excludedCountModal" style="color: #3b82f6;">4</strong>명</span>
                        </div>
                    </div>
                    
                    <div class="applicants-table-wrapper" style="overflow-x: auto; border: 1px solid #e5e7eb; border-radius: 8px;">
                        <table class="applicants-table" style="width: 100%; border-collapse: collapse; background: white;">
                            <thead>
                                <tr>
                                    <th style="background: #f8f9fa; padding: 12px; text-align: center; font-size: 12px; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb; white-space: nowrap;"><input type="checkbox" id="selectAllWorkersModal" onchange="toggleAllWorkers(this)"></th>
                                    <th style="background: #f8f9fa; padding: 12px; text-align: center; font-size: 12px; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb; white-space: nowrap;">이름</th>
                                    <th style="background: #f8f9fa; padding: 12px; text-align: center; font-size: 12px; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb; white-space: nowrap;">성별</th>
                                    <th style="background: #f8f9fa; padding: 12px; text-align: center; font-size: 12px; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb; white-space: nowrap;">연락처</th>
                                    <th style="background: #f8f9fa; padding: 12px; text-align: center; font-size: 12px; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb; white-space: nowrap;">생년월일</th>
                                    <th style="background: #f8f9fa; padding: 12px; text-align: center; font-size: 12px; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb; white-space: nowrap;">주소</th>
                                    <th style="background: #f8f9fa; padding: 12px; text-align: center; font-size: 12px; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb; white-space: nowrap;">한글속기자격증</th>
                                    <th style="background: #f8f9fa; padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151; white-space: nowrap;">배정일</th>
                                    <th style="background: #f8f9fa; padding: 12px; text-align: center; border: 1px solid #e5e7eb; font-size: 12px; font-weight: 600; color: #374151; white-space: nowrap;">상태</th>
                                </tr>
                            </thead>
                            <tbody id="workersListModal">
                                <tr style="border-bottom: 1px solid #f3f4f6;">
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;"><input type="checkbox" name="workerSelectModal" value="1"></td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">차정훈</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">남성</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">010-1**2-3456</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">1990.**.**</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">서울특별시 강남구</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">1급</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">2025.08.06</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;"><span class="applicant-status status-approved" style="padding: 3px 8px; border-radius: 12px; font-size: 10px; font-weight: 600; white-space: nowrap; background: #dcfce7; color: #166534;">배정</span></td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f3f4f6;">
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;"><input type="checkbox" name="workerSelectModal" value="2"></td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">김민영</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">여성</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">010-2**3-4567</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">1988.**.**</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">경기도 안양시</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">2급</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">-</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;"><span class="applicant-status status-cancelled" style="padding: 3px 8px; border-radius: 12px; font-size: 10px; font-weight: 600; white-space: nowrap; background: #fef2f2; color: #991b1b;">미배정</span></td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f3f4f6;">
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;"><input type="checkbox" name="workerSelectModal" value="3"></td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">박준호</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">남성</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">010-3**4-5678</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">1985.**.**</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">부산광역시 해운대구</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">1급</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">-</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;"><span class="applicant-status status-cancelled" style="padding: 3px 8px; border-radius: 12px; font-size: 10px; font-weight: 600; white-space: nowrap; background: #fef2f2; color: #991b1b;">미배정</span></td>
                                </tr>
                                <tr style="border-bottom: 1px solid #f3f4f6;">
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;"><input type="checkbox" name="workerSelectModal" value="4"></td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">이수진</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">여성</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">010-4**5-6789</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">1992.**.**</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">경상남도 창원시</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">-</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">-</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;"><span class="applicant-status status-cancelled" style="padding: 3px 8px; border-radius: 12px; font-size: 10px; font-weight: 600; white-space: nowrap; background: #fef2f2; color: #991b1b;">미배정</span></td>
                                </tr>
                                <tr>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;"><input type="checkbox" name="workerSelectModal" value="5"></td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">최영수</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">남성</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">010-5**6-7890</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">1987.**.**</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">인천광역시 연수구</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">1급</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;">-</td>
                                    <td style="padding: 12px; font-size: 12px; color: #6b7280; text-align: center;"><span class="applicant-status status-cancelled" style="padding: 3px 8px; border-radius: 12px; font-size: 10px; font-weight: 600; white-space: nowrap; background: #fef2f2; color: #991b1b;">미배정</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- 배정/미배정 버튼 -->
                    <div class="batch-actions" style="display: flex; gap: 10px; align-items: center; margin-top: 15px; padding: 15px; background: white; border-radius: 8px; border: 1px solid #e5e7eb;">
                        <div style="display: flex; align-items: center; gap: 8px; color: #6b7280; font-size: 14px;">
                            <span>선택된 작업자:</span>
                            <span id="selectedWorkerCountModal" style="font-weight: 600; color: #374151;">0명</span>
                        </div>
                        <div style="margin-left: auto; display: flex; gap: 8px;">
                            <button class="batch-btn btn-approve" onclick="batchUpdateWorkerStatusModal('assigned')" style="background: #10b981; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 13px; cursor: pointer; transition: background-color 0.2s;">
                                ✓ 배정
                            </button>
                            <button class="batch-btn btn-reject" onclick="batchUpdateWorkerStatusModal('unassigned')" style="background: #ef4444; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 13px; cursor: pointer; transition: background-color 0.2s;">
                                ✗ 미배정
                            </button>
                            <button class="batch-btn btn-manual" onclick="openManualWorkerAssignmentModal()" style="background: #8b5cf6; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 13px; cursor: pointer; transition: background-color 0.2s;">
                                👤 작업자 수동 배정
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 모달 하단 버튼 -->
            <div class="modal-footer" style="display: flex; justify-content: flex-end; padding: 15px 25px; border-top: 1px solid #e2e8f0; background: white; flex-shrink: 0; gap: 10px;">
                <button type="button" class="btn-secondary" onclick="closeWorkerManagementModal()" style="background: #6b7280; color: white; border: none; border-radius: 6px; padding: 10px 20px; font-size: 14px; cursor: pointer; transition: background-color 0.2s;">닫기</button>
                <button type="button" class="btn-confirm" onclick="confirmWorkersModal()" style="background: #f59e0b; color: white; border: none; border-radius: 6px; padding: 10px 20px; font-size: 14px; cursor: pointer; transition: background-color 0.2s;">확정</button>
            </div>
        </div>
    </div>

    <!-- 작업자 수동 배정 모달 (vod-detail.html과 동일) -->
    <div id="manualWorkerAssignmentModal" class="modal-overlay" style="display: none; z-index: 1300;">
        <div class="modal-container" style="max-width: 600px; width: 90%; max-height: 90vh;">
            <div class="modal-header" style="background: #5b6bc0; color: white; padding: 20px 24px; border-bottom: none;">
                <h2 style="margin: 0; font-size: 18px; font-weight: 600; color: white;">작업자 수동 배정</h2>
                <button class="modal-close" onclick="closeManualWorkerAssignmentModal()" style="color: white; background: none; border: none; font-size: 24px; cursor: pointer; padding: 0; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: all 0.2s;">&times;</button>
            </div>
            
            <div class="modal-content" style="padding: 24px; min-height: 400px;">
                <!-- 검색 영역 -->
                <div style="margin-bottom: 20px;">
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <select id="manualSearchOption" style="padding: 10px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px; min-width: 120px; background: white;">
                            <option value="name">이름</option>
                            <option value="email">이메일</option>
                            <option value="phone">전화번호</option>
                        </select>
                        <input type="text" id="manualSearchInput" placeholder="검색어를 입력하세요" 
                               style="flex: 1; padding: 10px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px;"
                               onkeypress="handleManualSearchKeypress(event)">
                        <button onclick="searchManualWorkers()" style="background: #3b82f6; color: white; border: none; border-radius: 6px; padding: 10px 20px; font-size: 14px; cursor: pointer; font-weight: 500;">
                            검색
                        </button>
                    </div>
                </div>
                
                <!-- 검색 결과 영역 -->
                <div style="margin-bottom: 20px;">
                    <div style="margin-bottom: 10px; font-weight: 600; color: #374151; font-size: 14px;">
                        검색 결과 <span id="manualSearchResultCount" style="color: #3b82f6;">0</span>명
                    </div>
                    
                    <div id="manualSearchResults" style="border: 1px solid #e5e7eb; border-radius: 8px; background: white; min-height: 300px; max-height: 400px; overflow-y: auto;">
                        <!-- 초기 상태 메시지 -->
                        <div style="padding: 60px 20px; text-align: center; color: #9ca3af; font-size: 14px;">
                            검색어를 입력하고 검색 버튼을 눌러주세요
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 모달 하단 버튼 -->
            <div class="modal-footer" style="display: flex; justify-content: flex-end; padding: 15px 25px; border-top: 1px solid #e2e8f0; background: white; flex-shrink: 0; gap: 10px;">
                <button type="button" onclick="closeManualWorkerAssignmentModal()" style="background: #6b7280; color: white; border: none; border-radius: 6px; padding: 10px 20px; font-size: 14px; cursor: pointer; transition: background-color 0.2s;">취소</button>
                <button type="button" id="assignSelectedWorkerBtn" onclick="assignSelectedWorker()" style="background: #10b981; color: white; border: none; border-radius: 6px; padding: 10px 20px; font-size: 14px; cursor: pointer; transition: background-color 0.2s;" disabled>
                    선택한 작업자 배정
                </button>
            </div>
        </div>
    </div>

</body>
</html>