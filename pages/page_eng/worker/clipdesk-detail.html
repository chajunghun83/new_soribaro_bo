<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í´ë¦½ë°ìŠ¤í¬ ì‘ì—… ìƒì„¸ - ì†Œë¦¬ë°”ë¡œ ì‘ì—…ì</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            color: #333;
            padding: 30px;
            min-height: 100vh;
        }
        
        .page-title {
            font-size: 28px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .back-button {
            background: #6b7280;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .back-button:hover {
            background: #4b5563;
        }
        
        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
        .detail-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        /* ì‘ì—…í˜„í™© ì„¹ì…˜ */
        .work-status-section {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border: 1px solid #e5e7eb;
            height: 650px;
            overflow-y: hidden;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #374151;
            padding: 20px 24px;
            border-bottom: 1px solid #e5e7eb;
            background: #f8f9fa;
            border-radius: 12px 12px 0 0;
        }
        
        .work-details {
            padding: 24px;
        }
        
        .detail-grid {
            display: grid;
            grid-template-columns: 120px 1fr 120px 1fr;
            gap: 16px 20px;
            margin-bottom: 24px;
        }
        
        .detail-label {
            font-weight: 500;
            color: #6b7280;
            font-size: 14px;
        }
        
        .detail-value {
            color: #374151;
            font-size: 14px;
            padding: 8px 12px;
            background: #f3f4f6;
            border-radius: 6px;
            border: 1px solid #e5e7eb;
        }
        
        .detail-description {
            grid-column: 1 / -1;
            margin-top: 10px;
        }
        
        .detail-description .detail-label {
            margin-bottom: 8px;
        }
        
        .description-content {
            background: #f3f4f6;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 16px;
            min-height: 120px;
            color: #374151;
            font-size: 14px;
            line-height: 1.6;
        }

        .reference-link-box {
            background: #f3f4f6;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 16px;
            min-height: 38px;
            color: #374151;
            font-size: 14px;
            line-height: 1.6;
            word-break: break-all;
            overflow-wrap: break-word;
        }
        
        /* ìƒë‹´ì ì‘ì„± ì •ë³´ ì„¹ì…˜ */
        .consultant-section {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border: 1px solid #e5e7eb;
            height: 650px;
            overflow-y: auto;
        }
        
        .consultant-form {
            padding: 24px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: 120px 1fr 120px 1fr;
            gap: 16px 20px;
            margin-bottom: 24px;
        }
        
        .form-group {
            display: contents;
        }
        
        .form-group.full-width {
            grid-column: 1 / -1;
            margin-top: 10px;
        }
        
        .form-label {
            font-weight: 500;
            color: #6b7280;
            font-size: 14px;
        }
        
        .form-input,
        .form-select {
            color: #374151;
            font-size: 14px;
            padding: 8px 12px;
            background: #f3f4f6;
            border-radius: 6px;
            border: 1px solid #e5e7eb;
        }
        
        .form-group.full-width .form-label {
            margin-bottom: 8px;
        }
        
        .form-textarea {
            background: #f3f4f6;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 16px;
            min-height: 120px;
            color: #374151;
            font-size: 14px;
            line-height: 1.6;
            resize: none;
        }
        
        /* íŒŒì¼ ë¦¬ìŠ¤íŠ¸ ì˜ì—­ */
        .file-list-section {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border: 1px solid #e5e7eb;
            padding: 20px;
            margin-bottom: 20px;
        }

        .file-list-container {
            margin-top: 15px;
        }

        .file-list-table {
            width: 100%;
            border-collapse: collapse;
        }

        .file-list-table th,
        .file-list-table td {
            padding: 6px 8px;
            text-align: center;
            border-bottom: 1px solid #e5e7eb;
        }

        .file-list-table th {
            background-color: #f9fafb;
            font-weight: 600;
            color: #374151;
        }

        .file-list-table td {
            text-align: center;
            font-size: 13px;
        }

        .file-list-actions {
            margin-top: 15px;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 15px;
        }

        .btn-download {
            background-color: #3b82f6;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            display: inline-flex;
            align-items: center;
            gap: 4px;
            transition: background-color 0.2s;
            white-space: nowrap;
        }

        .btn-download:hover {
            background-color: #2563eb;
        }

        .btn-download-all {
            background-color: #059669;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: background-color 0.2s;
        }

        .btn-download-all:hover {
            background-color: #047857;
        }

        .icon-download::before {
            content: "â¬‡ï¸";
        }
        
        /* URL ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .url-section {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border: 1px solid #e5e7eb;
            padding: 15px 20px;
            margin-bottom: 25px;
        }

        .url-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .url-input-group {
            display: flex;
            gap: 10px;
            align-items: center;
            flex: 1;
        }

        .url-input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            background: #f9fafb;
            color: #374151;
            transition: border-color 0.2s, box-shadow 0.2s;
            cursor: default;
        }

        .url-input[readonly] {
            background: #f9fafb;
            color: #374151;
            cursor: default;
        }

        .clipboard-btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            white-space: nowrap;
            transition: background-color 0.2s;
        }

        .clipboard-btn:hover {
            background: #2563eb;
        }
        
        /* í•˜ë‹¨ ë²„íŠ¼ ì˜ì—­ */
        .bottom-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 30px;
            padding: 20px 0;
        }

        .btn-cancel {
            background-color: #ef4444;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background-color 0.2s;
            margin-right: 10px;
        }

        .btn-cancel:hover {
            background-color: #dc2626;
        }

        .btn-list {
            background-color: #6b7280;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background-color 0.2s;
        }

        .btn-list:hover {
            background-color: #4b5563;
        }
    </style>
</head>
<body>
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
        <h1 class="page-title" style="margin-bottom: 0;">
            <span>ğŸ¬</span>
            í´ë¦½ë°ìŠ¤í¬ ì‘ì—… ìƒì„¸
        </h1>
        <button class="back-button" onclick="goBack()" style="margin-bottom: 0;">
            <span>â†</span>
            ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°
        </button>
    </div>
    
    <!-- ì˜ë¢°ì •ë³´ ì„¹ì…˜ -->
    <div class="work-status-section" style="grid-column: 1 / -1; height: auto; margin-bottom: 30px;">
        <div class="section-title">ì˜ë¢°ì •ë³´</div>
        <div class="work-details">
            <!-- ì²« ë²ˆì§¸ í–‰: ì˜ë¢°ëª…, ì„œë¸Œíƒ€ì´í‹€, í¸ì§‘ ë¶„ì•¼ -->
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                <div style="display: flex; flex-direction: column; gap: 6px;">
                    <div class="detail-label">ì˜ë¢°ëª…</div>
                    <div class="detail-value" id="requestTitle">ê¸°ì—… í™ë³´ì˜ìƒ ì œì‘</div>
                </div>
                <div style="display: flex; flex-direction: column; gap: 6px;">
                    <div class="detail-label">ì„œë¸Œíƒ€ì´í‹€</div>
                    <div class="detail-value" id="consultantSubTitle">2025ë…„ ì‹ ì œí’ˆ ëŸ°ì¹­ í™ë³´ì˜ìƒ</div>
                </div>
                <div style="display: flex; flex-direction: column; gap: 6px;">
                    <div class="detail-label">í¸ì§‘ ë¶„ì•¼</div>
                    <div class="detail-value" id="editField">ë¡±í¼</div>
                </div>
            </div>
            
            <!-- ë‘ ë²ˆì§¸ í–‰: ì œì‘ ì½˜í…ì¸ , ì›ë³¸ ëŸ¬ë‹ íƒ€ì„, ì¹´ë©”ë¼ ëŒ€ìˆ˜ -->
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                <div style="display: flex; flex-direction: column; gap: 6px;">
                    <div class="detail-label">ì œì‘ ì½˜í…ì¸ </div>
                    <div class="detail-value" id="contentType">êµìœ¡ ë° ì •ë³´</div>
                </div>
                <div style="display: flex; flex-direction: column; gap: 6px;">
                    <div class="detail-label">ì›ë³¸ ëŸ¬ë‹ íƒ€ì„</div>
                    <div class="detail-value" id="originalRuntime">60ë¶„</div>
                </div>
                <div style="display: flex; flex-direction: column; gap: 6px;">
                    <div class="detail-label">ì¹´ë©”ë¼ ëŒ€ìˆ˜</div>
                    <div class="detail-value" id="cameraCount">2ëŒ€</div>
                </div>
            </div>
            
            <!-- ì„¸ ë²ˆì§¸ í–‰: í¸ì§‘ ë“±ê¸‰, ì¸íŠ¸ë¡œ ìœ /ë¬´, ì•„ì›ƒíŠ¸ë¡œ ìœ /ë¬´ -->
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                <div style="display: flex; flex-direction: column; gap: 6px;">
                    <div class="detail-label">í¸ì§‘ ë“±ê¸‰</div>
                    <div class="detail-value" id="editGrade">ìŠ¤íƒ ë‹¤ë“œ í¸ì§‘</div>
                </div>
                <div style="display: flex; flex-direction: column; gap: 6px;">
                    <div class="detail-label">ì¸íŠ¸ë¡œ ìœ /ë¬´</div>
                    <div class="detail-value" id="introYn">ìœ </div>
                </div>
                <div style="display: flex; flex-direction: column; gap: 6px;">
                    <div class="detail-label">ì•„ì›ƒíŠ¸ë¡œ ìœ /ë¬´</div>
                    <div class="detail-value" id="outroYn">ìœ </div>
                </div>
            </div>
            
            <!-- ë„¤ ë²ˆì§¸ í–‰: ì±„ë„ ë¡œê³  ìœ /ë¬´, ì¸ë„¤ì¼ ì¢…ë¥˜, ìµœì¢…ë³¸ ì˜ˆìƒ ì‹œê°„ -->
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                <div style="display: flex; flex-direction: column; gap: 6px;">
                    <div class="detail-label">ì±„ë„ ë¡œê³  ìœ /ë¬´</div>
                    <div class="detail-value" id="channelLogoYn">ìœ </div>
                </div>
                <div style="display: flex; flex-direction: column; gap: 6px;">
                    <div class="detail-label">ì¸ë„¤ì¼ ì¢…ë¥˜</div>
                    <div class="detail-value" id="thumbnailType">ë””ìì¸ ì¸ë„¤ì¼</div>
                </div>
                <div style="display: flex; flex-direction: column; gap: 6px;">
                    <div class="detail-label">ìµœì¢…ë³¸ ì˜ˆìƒ ì‹œê°„</div>
                    <div class="detail-value" id="finalExpectedTime">45ë¶„</div>
                </div>
            </div>
            
            <!-- ì°¸ê³  ì˜ìƒ ë§í¬ -->
            <div class="detail-description">
                <div class="detail-label">ì°¸ê³  ì˜ìƒ ë§í¬</div>
                <div class="reference-link-box" id="referenceLink">-</div>
            </div>
            
            <!-- ê³ ê° ìš”ì²­ ì‚¬í•­ -->
            <div class="detail-description">
                <div class="detail-label">ê³ ê° ìš”ì²­ ì‚¬í•­</div>
                <div class="description-content" id="customerRequest">
                    ê¸°ì—… í™ë³´ìš©ìœ¼ë¡œ ì „ë¬¸ì ì´ê³  ê¹”ë”í•œ ëŠë‚Œìœ¼ë¡œ í¸ì§‘í•´ì£¼ì„¸ìš”. 
                    
ì£¼ìš” ìš”ì²­ì‚¬í•­:
- ë¸Œëœë“œ ì»¬ëŸ¬(íŒŒë€ìƒ‰ ê³„ì—´) í™œìš©
- ê¹”ë”í•˜ê³  ëª¨ë˜í•œ ëŠë‚Œì˜ í¸ì§‘
- í…ìŠ¤íŠ¸ ì• ë‹ˆë©”ì´ì…˜ í¬í•¨
- ë°°ê²½ìŒì•…ì€ ì°¨ë¶„í•˜ê³  ì „ë¬¸ì ì¸ ëŠë‚Œ
- ë¡œê³  ì• ë‹ˆë©”ì´ì…˜ ì¸íŠ¸ë¡œ/ì•„ì›ƒíŠ¸ë¡œ í•„ìˆ˜
- ì¸ë„¤ì¼ì€ ë©”ì¸ ì œí’ˆ ì´ë¯¸ì§€ í™œìš©

í¸ì§‘ ìŠ¤íƒ€ì¼:
- ì»· í¸ì§‘ ìœ„ì£¼ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ
- íŠ¸ëœì§€ì…˜ì€ ì‹¬í”Œí•˜ê²Œ
- ìë§‰ì€ ê¹”ë”í•œ í°íŠ¸ ì‚¬ìš©
                </div>
            </div>
        </div>
    </div>
    
    <!-- íŒŒì¼ ë¦¬ìŠ¤íŠ¸ -->
    <div class="file-list-section">
        <h3 class="section-title">íŒŒì¼ ë¦¬ìŠ¤íŠ¸</h3>
        <div class="file-list-container">
            <table class="file-list-table">
                <thead>
                    <tr>
                        <th width="80">No.</th>
                        <th>íŒŒì¼ëª…</th>
                        <th width="150">ë‹¤ìš´ë¡œë“œ</th>
                    </tr>
                </thead>
                <tbody id="fileListBody">
                    <tr>
                        <td>01</td>
                        <td>ì‘ì—…ì™„ë£Œ_ì˜ìƒ_ìµœì¢…ë³¸.mp4</td>
                        <td>
                            <button class="btn-download" onclick="downloadFile('ì‘ì—…ì™„ë£Œ_ì˜ìƒ_ìµœì¢…ë³¸.mp4')">
                                <i class="icon-download"></i> ë‹¤ìš´ë¡œë“œ
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td>02</td>
                        <td>í¸ì§‘_ì˜ìƒ_1ì°¨ë³¸.mp4</td>
                        <td>
                            <button class="btn-download" onclick="downloadFile('í¸ì§‘_ì˜ìƒ_1ì°¨ë³¸.mp4')">
                                <i class="icon-download"></i> ë‹¤ìš´ë¡œë“œ
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td>03</td>
                        <td>ì¸ë„¤ì¼_ì´ë¯¸ì§€.jpg</td>
                        <td>
                            <button class="btn-download" onclick="downloadFile('ì¸ë„¤ì¼_ì´ë¯¸ì§€.jpg')">
                                <i class="icon-download"></i> ë‹¤ìš´ë¡œë“œ
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td>04</td>
                        <td>ìë§‰_íŒŒì¼.srt</td>
                        <td>
                            <button class="btn-download" onclick="downloadFile('ìë§‰_íŒŒì¼.srt')">
                                <i class="icon-download"></i> ë‹¤ìš´ë¡œë“œ
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="file-list-actions">
                <button class="btn-download-all" onclick="downloadAllFiles()">
                    <i class="icon-download"></i> ëª¨ë‘ ë‹¤ìš´ë¡œë“œ
                </button>
            </div>
        </div>
    </div>

    <!-- URL ì„¹ì…˜ -->
    <div class="url-section">
        <div class="url-container">
            <span style="margin: 0; font-size: 16px; font-weight: 600; color: #374151;">URL</span>
            <div class="url-input-group">
                <input type="url" id="urlInput" value="https://clipdesk.soribaro.co.kr/project/CLP-2025-001/detail" readonly class="url-input">
                <button type="button" onclick="copyToClipboard()" class="clipboard-btn">
                    í´ë¦½ë³´ë“œì— ë³µì‚¬
                </button>
            </div>
        </div>
    </div>

    <!-- ì‘ì—…ê´€ë¦¬ ì„¹ì…˜ -->
    <div style="background: white; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); border: 1px solid #e5e7eb; padding: 25px; margin-bottom: 30px;">
        <h2 style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px; color: #1f2937; font-size: 18px; font-weight: 600;">
            <span>ğŸ”§</span>
            ì‘ì—…ê´€ë¦¬
        </h2>
        
            <!-- ê°€í¸ì§‘ ì‚°ì¶œë¬¼ -->
            <div style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 12px; margin-bottom: 12px; background: #f9fafb;">
                <label style="display: block; margin-bottom: 6px; font-weight: 500; color: #374151; font-size: 14px;">ê°€í¸ì§‘ ì‚°ì¶œë¬¼</label>
                <div style="display: flex; gap: 8px; align-items: center;">
                    <select id="rough-edit-0" style="flex: 1; max-width: 60%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px; font-weight: 500; background: white;" onchange="updateWorkStatus('ê°€í¸ì§‘', 'rough-edit-0')">
                        <option value="ì‘ì—…ëŒ€ê¸°">ì‘ì—…ëŒ€ê¸°</option>
                        <option value="ì‘ì—…ì‹œì‘">ì‘ì—…ì‹œì‘</option>
                        <option value="ì´ˆì•ˆì™„ë£Œ" selected>ì´ˆì•ˆì™„ë£Œ</option>
                        <option value="ìˆ˜ì •ì¤‘">ìˆ˜ì •ì¤‘</option>
                        <option value="ìˆ˜ì •ì™„ë£Œ">ìˆ˜ì •ì™„ë£Œ</option>
                        <option value="ìµœì¢…ì™„ë£Œ">ìµœì¢…ì™„ë£Œ</option>
                    </select>
                    <div id="rough-edit-buttons-0">
                        <button onclick="handleRoughEditAction('0', 'upload')" style="background: #10b981; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 12px; cursor: pointer; font-weight: 500; white-space: nowrap; margin-right: 4px;">ì—…ë¡œë“œ</button>
                        <button onclick="handleRoughEditAction('0', 'view')" style="background: #ef4444; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 12px; cursor: pointer; font-weight: 500; white-space: nowrap; margin-right: 4px;">ë·°ì–´</button>
                        <button onclick="handleRoughEditAction('0', 'delete')" style="background: #6b7280; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 12px; cursor: pointer; font-weight: 500; white-space: nowrap;">ì‚­ì œ</button>
                    </div>
                </div>
            </div>
            
            <!-- ë³¸í¸ì§‘ ì‚°ì¶œë¬¼ -->
            <div style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 12px; margin-bottom: 12px; background: #f9fafb;">
                <label style="display: block; margin-bottom: 6px; font-weight: 500; color: #374151; font-size: 14px;">ë³¸í¸ì§‘ ì‚°ì¶œë¬¼</label>
                <div style="display: flex; gap: 8px; align-items: center;">
                    <select id="final-edit-0" style="flex: 1; max-width: 60%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px; font-weight: 500; background: white;" onchange="updateWorkStatus('ë³¸í¸ì§‘', 'final-edit-0')">
                        <option value="ì‘ì—…ëŒ€ê¸°" selected>ì‘ì—…ëŒ€ê¸°</option>
                        <option value="ì‘ì—…ì‹œì‘">ì‘ì—…ì‹œì‘</option>
                        <option value="ì´ˆì•ˆì™„ë£Œ">ì´ˆì•ˆì™„ë£Œ</option>
                        <option value="ìˆ˜ì •ì¤‘">ìˆ˜ì •ì¤‘</option>
                        <option value="ìˆ˜ì •ì™„ë£Œ">ìˆ˜ì •ì™„ë£Œ</option>
                        <option value="ìµœì¢…ì™„ë£Œ">ìµœì¢…ì™„ë£Œ</option>
                    </select>
                    <div id="final-edit-buttons-0">
                        <button onclick="handleFinalEditAction('0', 'confirm')" style="background: #3b82f6; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 12px; cursor: pointer; font-weight: 500; white-space: nowrap; margin-right: 4px;">í™•ì¸</button>
                        <button onclick="handleFinalEditAction('0', 'revert')" style="background: #ef4444; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 12px; cursor: pointer; font-weight: 500; white-space: nowrap;">ë˜ëŒë¦¬ê¸°</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- í•˜ë‹¨ ë²„íŠ¼ ì˜ì—­ -->
    <div class="bottom-actions">
        <button class="btn-cancel" onclick="cancelWork()">ì‘ì—…ì·¨ì†Œ</button>
        <button class="btn-list" onclick="goToList()">ëª©ë¡</button>
    </div>

    <script>
        // URL íŒŒë¼ë¯¸í„°ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        const urlParams = new URLSearchParams(window.location.search);
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ íŒŒë¼ë¯¸í„° ë°ì´í„°ë¡œ í¼ ì±„ìš°ê¸°
        document.addEventListener('DOMContentLoaded', function() {
            // URL íŒŒë¼ë¯¸í„°ì—ì„œ ë°ì´í„° ì¶”ì¶œ
            const orderNumber = urlParams.get('orderNumber');
            const requestTitle = urlParams.get('requestTitle');
            const subTitle = urlParams.get('subTitle');
            const totalAmount = urlParams.get('totalAmount');
            const partialAmount = urlParams.get('partialAmount');
            const editor = urlParams.get('editor');
            const status = urlParams.get('status');
            const clientName = urlParams.get('clientName');
            const email = urlParams.get('email');
            const contact = urlParams.get('contact');
            const requestDate = urlParams.get('requestDate');
            const completeDate = urlParams.get('completeDate');
            const workTime = urlParams.get('workTime');
            
            // ê³ ê°/ì˜ë¢°ì •ë³´ ë°ì´í„° ì„¤ì •
            if (orderNumber) document.getElementById('orderNumber').textContent = orderNumber;
            if (requestTitle) document.getElementById('requestTitle').textContent = requestTitle;
            if (clientName) document.getElementById('clientName').textContent = clientName;
            if (email) document.getElementById('email').textContent = email;
            if (contact) document.getElementById('contact').textContent = contact;
            if (requestDate) document.getElementById('requestDate').textContent = requestDate;
            if (status) document.getElementById('workStatus').textContent = status;
            
            // ì°¸ê³  ë§í¬ ì„¤ì •
            document.getElementById('referenceLink').textContent = 'https://www.youtube.com/watch?v=dQw4w9WgXcQ (ì°¸ê³ í•  í¸ì§‘ ìŠ¤íƒ€ì¼ ì˜ìƒ)';
            
            // ìµœì¢…ê²°ì œê¸ˆì•¡ ì„¤ì •
            if (totalAmount) {
                document.getElementById('finalPaymentAmount').textContent = totalAmount + 'ì›';
            } else {
                document.getElementById('finalPaymentAmount').textContent = '450,000ì›';
            }
            
            // URL íŒŒë¼ë¯¸í„°ì—ì„œ ë°›ì€ ë°ì´í„°ë¡œ ì—…ë°ì´íŠ¸
            if (requestTitle) document.getElementById('requestTitle').textContent = requestTitle;
            if (subTitle) document.getElementById('consultantSubTitle').textContent = subTitle;
            
            console.log('í´ë¦½ë°ìŠ¤í¬ ì‘ì—… ìƒì„¸ í˜ì´ì§€ íŒŒë¼ë¯¸í„°:', {
                orderNumber, requestTitle, subTitle, totalAmount, partialAmount, editor, status,
                clientName, email, contact, requestDate, completeDate, workTime
            });
        });
        

        // ê°œë³„ íŒŒì¼ ë‹¤ìš´ë¡œë“œ
        function downloadFile(filename) {
            console.log('ë‹¤ìš´ë¡œë“œ íŒŒì¼:', filename);
            alert(filename + ' íŒŒì¼ ë‹¤ìš´ë¡œë“œë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.');
        }

        // ëª¨ë“  íŒŒì¼ ë‹¤ìš´ë¡œë“œ
        function downloadAllFiles() {
            const fileList = [
                'ì‘ì—…ì™„ë£Œ_ì˜ìƒ_ìµœì¢…ë³¸.mp4',
                'í¸ì§‘_ì˜ìƒ_1ì°¨ë³¸.mp4',
                'ì¸ë„¤ì¼_ì´ë¯¸ì§€.jpg',
                'ìë§‰_íŒŒì¼.srt'
            ];
            
            console.log('ì „ì²´ íŒŒì¼ ë‹¤ìš´ë¡œë“œ:', fileList);
            alert('ì „ì²´ íŒŒì¼ (' + fileList.length + 'ê°œ) ë‹¤ìš´ë¡œë“œë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.');
        }

        // ì‘ì—…ì·¨ì†Œ í•¨ìˆ˜
        function cancelWork() {
            if (confirm('ì‘ì—…ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì·¨ì†Œëœ ì‘ì—…ì€ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                alert('ì‘ì—…ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.');
                goBack();
            }
        }

        // í´ë¦½ë³´ë“œì— URL ë³µì‚¬ í•¨ìˆ˜
        function copyToClipboard() {
            const urlInput = document.getElementById('urlInput');
            const url = urlInput.value;
            
            // í´ë¦½ë³´ë“œì— ë³µì‚¬
            navigator.clipboard.writeText(url).then(() => {
                // ì„±ê³µ ì‹œ ë²„íŠ¼ í…ìŠ¤íŠ¸ ì„ì‹œ ë³€ê²½
                const button = document.querySelector('.clipboard-btn');
                const originalText = button.textContent;
                button.textContent = 'ë³µì‚¬ì™„ë£Œ!';
                button.style.background = '#10b981';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '#3b82f6';
                }, 2000);
                
            }).catch(err => {
                // í´ë¦½ë³´ë“œ APIê°€ ì§€ì›ë˜ì§€ ì•ŠëŠ” ê²½ìš° fallback
                try {
                    urlInput.select();
                    urlInput.setSelectionRange(0, 99999); // ëª¨ë°”ì¼ ì§€ì›
                    document.execCommand('copy');
                    alert('URLì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
                } catch (fallbackErr) {
                    alert('í´ë¦½ë³´ë“œ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\nURLì„ ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ì£¼ì„¸ìš”.');
                }
            });
        }

        // ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸° í•¨ìˆ˜
        function goToList() {
            try {
                if (window.parent && window.parent !== window && typeof window.parent.loadPage === 'function') {
                    window.parent.loadPage('pages/worker/clipdesk.html');
                    return;
                }
            } catch (e) {
                console.log('parent.loadPage ì‹¤íŒ¨:', e);
            }
            
            try {
                if (window.history.length > 1) {
                    window.history.back();
                    return;
                }
            } catch (e) {
                console.log('history.back() ì‹¤íŒ¨:', e);
            }
            
            try {
                window.location.href = 'clipdesk.html';
            } catch (e) {
                console.log('ì§ì ‘ í˜ì´ì§€ ì´ë™ ì‹¤íŒ¨:', e);
                alert('ì´ì „ í˜ì´ì§€ë¡œ ëŒì•„ê°ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }
        }
        
        // ë’¤ë¡œ ê°€ê¸°
        function goBack() {
            goToList();
        }



        // ì‘ì—… ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateWorkStatus(workerName, dropdownId) {
            const dropdown = document.getElementById(dropdownId);
            if (dropdown) {
                const newStatus = dropdown.value;
                console.log(`${workerName}ì˜ ${dropdownId} ìƒíƒœê°€ ${newStatus}ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                
                // ì›Œì»¤ ì¸ë±ìŠ¤ ì¶”ì¶œ
                const workerIndex = dropdownId.split('-').pop();
                
                // ê°€í¸ì§‘ ë˜ëŠ” ë³¸í¸ì§‘ êµ¬ë¶„
                if (dropdownId.includes('rough-edit')) {
                    updateRoughEditButtons(workerIndex, newStatus);
                } else if (dropdownId.includes('final-edit')) {
                    updateFinalEditButtons(workerIndex, newStatus);
                }
            }
        }

        // ê°€í¸ì§‘ ë²„íŠ¼ ì—…ë°ì´íŠ¸
        function updateRoughEditButtons(workerIndex, status) {
            const buttonsContainer = document.getElementById(`rough-edit-buttons-${workerIndex}`);
            if (!buttonsContainer) return;

            let buttonsHTML = '';
            switch(status) {
                case 'ì‘ì—…ëŒ€ê¸°':
                case 'ì‘ì—…ì‹œì‘':
                case 'ìˆ˜ì •ì¤‘':
                case 'ìµœì¢…ì™„ë£Œ':
                    buttonsHTML = '<button onclick="handleRoughEditAction(\'' + workerIndex + '\', \'confirm\')" style="background: #3b82f6; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 12px; cursor: pointer; font-weight: 500; white-space: nowrap;">í™•ì¸</button>';
                    break;
                case 'ì´ˆì•ˆì™„ë£Œ':
                case 'ìˆ˜ì •ì™„ë£Œ':
                    buttonsHTML = '<button onclick="handleRoughEditAction(\'' + workerIndex + '\', \'upload\')" style="background: #10b981; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 12px; cursor: pointer; font-weight: 500; white-space: nowrap; margin-right: 4px;">ì—…ë¡œë“œ</button>' +
                                 '<button onclick="handleRoughEditAction(\'' + workerIndex + '\', \'view\')" style="background: #ef4444; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 12px; cursor: pointer; font-weight: 500; white-space: nowrap; margin-right: 4px;">ë·°ì–´</button>' +
                                 '<button onclick="handleRoughEditAction(\'' + workerIndex + '\', \'delete\')" style="background: #6b7280; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 12px; cursor: pointer; font-weight: 500; white-space: nowrap;">ì‚­ì œ</button>';
                    break;
            }
            buttonsContainer.innerHTML = buttonsHTML;
        }

        // ë³¸í¸ì§‘ ë²„íŠ¼ ì—…ë°ì´íŠ¸
        function updateFinalEditButtons(workerIndex, status) {
            const buttonsContainer = document.getElementById(`final-edit-buttons-${workerIndex}`);
            if (!buttonsContainer) return;

            let buttonsHTML = '';
            switch(status) {
                case 'ì‘ì—…ëŒ€ê¸°':
                    buttonsHTML = `
                        <button onclick="handleFinalEditAction('${workerIndex}', 'confirm')" style="background: #3b82f6; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 12px; cursor: pointer; font-weight: 500; white-space: nowrap; margin-right: 4px;">í™•ì¸</button>
                        <button onclick="handleFinalEditAction('${workerIndex}', 'revert')" style="background: #ef4444; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 12px; cursor: pointer; font-weight: 500; white-space: nowrap;">ë˜ëŒë¦¬ê¸°</button>
                    `;
                    break;
                case 'ì‘ì—…ì‹œì‘':
                case 'ìˆ˜ì •ì¤‘':
                case 'ìµœì¢…ì™„ë£Œ':
                    buttonsHTML = '<button onclick="handleFinalEditAction(\'' + workerIndex + '\', \'confirm\')" style="background: #3b82f6; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 12px; cursor: pointer; font-weight: 500; white-space: nowrap;">í™•ì¸</button>';
                    break;
                case 'ì´ˆì•ˆì™„ë£Œ':
                case 'ìˆ˜ì •ì™„ë£Œ':
                    buttonsHTML = '<button onclick="handleFinalEditAction(\'' + workerIndex + '\', \'upload\')" style="background: #10b981; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 12px; cursor: pointer; font-weight: 500; white-space: nowrap; margin-right: 4px;">ì—…ë¡œë“œ</button>' +
                                 '<button onclick="handleFinalEditAction(\'' + workerIndex + '\', \'view\')" style="background: #ef4444; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 12px; cursor: pointer; font-weight: 500; white-space: nowrap; margin-right: 4px;">ë·°ì–´</button>' +
                                 '<button onclick="handleFinalEditAction(\'' + workerIndex + '\', \'delete\')" style="background: #6b7280; color: white; border: none; border-radius: 6px; padding: 8px 16px; font-size: 12px; cursor: pointer; font-weight: 500; white-space: nowrap;">ì‚­ì œ</button>';
                    break;
            }
            buttonsContainer.innerHTML = buttonsHTML;
        }

        // ê°€í¸ì§‘ ì‚°ì¶œë¬¼ ì•¡ì…˜ ì²˜ë¦¬
        function handleRoughEditAction(workerIndex, actionType) {
            switch(actionType) {
                case 'confirm':
                    const roughStatus = document.getElementById(`rough-edit-${workerIndex}`).value;
                    alert(`ê°€í¸ì§‘ ${roughStatus} ìƒíƒœë¥¼ í™•ì¸í–ˆìŠµë‹ˆë‹¤.`);
                    break;
                case 'upload':
                    if (confirm('ê°€í¸ì§‘ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        alert('ê°€í¸ì§‘ íŒŒì¼ì´ ì„±ê³µì ìœ¼ë¡œ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    }
                    break;
                case 'view':
                    alert('ê°€í¸ì§‘ íŒŒì¼ ë·°ì–´ë¥¼ ì—½ë‹ˆë‹¤.\n\nì‹¤ì œ í™˜ê²½ì—ì„œëŠ” íŒŒì¼ ë·°ì–´ê°€ ìƒˆ ì°½ì—ì„œ ì—´ë¦½ë‹ˆë‹¤.');
                    break;
                case 'delete':
                    if (confirm('ê°€í¸ì§‘ íŒŒì¼ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        alert('ê°€í¸ì§‘ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                        // ì‚­ì œ í›„ ì—…ë¡œë“œ ë²„íŠ¼ë§Œ ë‚¨ê¸°ê¸°
                        updateRoughEditButtons(workerIndex, 'ì´ˆì•ˆì™„ë£Œ');
                    }
                    break;
            }
        }

        // ë³¸í¸ì§‘ ì‚°ì¶œë¬¼ ì•¡ì…˜ ì²˜ë¦¬
        function handleFinalEditAction(workerIndex, actionType) {
            switch(actionType) {
                case 'confirm':
                    const finalStatus = document.getElementById(`final-edit-${workerIndex}`).value;
                    alert(`ë³¸í¸ì§‘ ${finalStatus} ìƒíƒœë¥¼ í™•ì¸í–ˆìŠµë‹ˆë‹¤.`);
                    break;
                case 'revert':
                    if (confirm('ê°€í¸ì§‘ ì™„ë£Œ ìƒíƒœë¡œ ë˜ëŒë¦¬ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        alert('ê°€í¸ì§‘ ì™„ë£Œ ìƒíƒœë¡œ ë˜ëŒë ¸ìŠµë‹ˆë‹¤.');
                        // ê°€í¸ì§‘ ìƒíƒœë¡œ ë˜ëŒë¦¬ê¸°
                        document.getElementById(`rough-edit-${workerIndex}`).value = 'ì´ˆì•ˆì™„ë£Œ';
                        updateRoughEditButtons(workerIndex, 'ì´ˆì•ˆì™„ë£Œ');
                        document.getElementById(`final-edit-${workerIndex}`).value = 'ì‘ì—…ëŒ€ê¸°';
                        updateFinalEditButtons(workerIndex, 'ì‘ì—…ëŒ€ê¸°');
                    }
                    break;
                case 'upload':
                    if (confirm('ë³¸í¸ì§‘ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        alert('ë³¸í¸ì§‘ íŒŒì¼ì´ ì„±ê³µì ìœ¼ë¡œ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    }
                    break;
                case 'view':
                    alert('ë³¸í¸ì§‘ íŒŒì¼ ë·°ì–´ë¥¼ ì—½ë‹ˆë‹¤.\n\nì‹¤ì œ í™˜ê²½ì—ì„œëŠ” íŒŒì¼ ë·°ì–´ê°€ ìƒˆ ì°½ì—ì„œ ì—´ë¦½ë‹ˆë‹¤.');
                    break;
                case 'delete':
                    if (confirm('ë³¸í¸ì§‘ íŒŒì¼ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        alert('ë³¸í¸ì§‘ íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                        // ì‚­ì œ í›„ ì—…ë¡œë“œ ë²„íŠ¼ë§Œ ë‚¨ê¸°ê¸°
                        updateFinalEditButtons(workerIndex, 'ì´ˆì•ˆì™„ë£Œ');
                    }
                    break;
            }
        }
    </script>
</body>
</html>
