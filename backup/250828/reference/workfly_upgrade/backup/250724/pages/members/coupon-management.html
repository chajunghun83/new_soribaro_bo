<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¿ í°ë²ˆí˜¸ ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬</title>
    <link rel="stylesheet" href="../../styles/common.css">
    <style>
        /* í…Œì´ë¸” í—¤ë” ì¤‘ì•™ì •ë ¬ */
        table th {
            text-align: center;
        }
        
        /* í…Œì´ë¸” ë°ì´í„° ì¤‘ì•™ì •ë ¬ */
        table td {
            text-align: center;
        }
    </style>
</head>
<body style="background: #f5f6fa; padding: 30px;">
    <h1 class="page-title">ğŸ« ì¿ í°ë²ˆí˜¸ ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬</h1>
    
    <!-- ê²€ìƒ‰ í¼ -->
    <div class="search-section">
        <div style="margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
            <!-- ìƒíƒœ ë¼ë””ì˜¤ ë²„íŠ¼ (ì™¼ìª½) -->
            <div style="display: flex; align-items: center; gap: 25px;">
                <span style="font-weight: 500; color: #374151; font-size: 14px;">ìƒíƒœ</span>
                <div style="display: flex; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 4px; gap: 2px;">
                    <label class="status-btn active" data-value="all" style="padding: 10px 24px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.2s; background: #3b82f6; color: white; border: 1px solid #3b82f6;">
                        <input type="radio" name="status" value="all" checked style="display: none;">
                        ì „ì²´
                    </label>
                    <label class="status-btn" data-value="registered" style="padding: 10px 24px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.2s; background: transparent; color: #64748b; border: 1px solid transparent;">
                        <input type="radio" name="status" value="registered" style="display: none;">
                        ë“±ë¡
                    </label>
                    <label class="status-btn" data-value="unregistered" style="padding: 10px 24px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.2s; background: transparent; color: #64748b; border: 1px solid transparent;">
                        <input type="radio" name="status" value="unregistered" style="display: none;">
                        ë¯¸ë“±ë¡
                    </label>
                </div>
            </div>
            
            <!-- ê²€ìƒ‰ ì¡°ê±´ (ì˜¤ë¥¸ìª½) -->
            <div style="display: flex; align-items: center; gap: 12px;">
                <select id="searchCategory" style="padding: 10px 14px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 14px; min-width: 120px; background: white; color: #374151; outline: none; transition: border-color 0.2s;">
                    <option value="all">ì „ì²´</option>
                    <option value="name">ì´ë¦„</option>
                    <option value="coupon">ì¿ í°ë²ˆí˜¸</option>
                    <option value="email">ì´ë©”ì¼</option>
                </select>
                <div style="position: relative;">
                    <input type="text" id="searchInput" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”" style="width: 280px; padding: 10px 14px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 14px; background: white; color: #374151; outline: none; transition: border-color 0.2s;">
                </div>
                <button id="searchBtn" style="padding: 10px 20px; background: #3b82f6; color: white; border: none; border-radius: 6px; font-size: 14px; font-weight: 500; cursor: pointer; transition: background-color 0.2s; display: flex; align-items: center; gap: 6px;">
                    ğŸ” ê²€ìƒ‰
                </button>
            </div>
        </div>
    </div>

    <!-- ì¿ í° ê´€ë¦¬ ë²„íŠ¼ë“¤ -->
    <div style="margin-bottom: 20px; display: flex; justify-content: flex-end; gap: 10px;">
        <button class="btn btn-outline btn-sm" onclick="downloadSample()">ì¼ê´„ ë“±ë¡ ìƒ˜í”Œ ë‹¤ìš´ë¡œë“œ</button>
        <button class="btn btn-outline btn-sm" onclick="bulkUpload()">ì¿ í°ë²ˆí˜¸ ì¼ê´„ ë“±ë¡</button>
        <button class="btn btn-outline btn-sm">ğŸ“Š ì—‘ì…€ ë‹¤ìš´ë¡œë“œ</button>
        <button class="btn btn-primary btn-sm" onclick="showAddCouponModal()">â• ì‹ ê·œ ë“±ë¡</button>
    </div>

    <!-- ì¿ í° ëª©ë¡ í…Œì´ë¸” -->
    <div class="table-section">
        <div class="table-header">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span>ğŸ« ì´ 10,070ê±´</span>
                </div>
            </div>
        </div>
        <table>
            <thead>
                <tr>
                    <th>NO</th>
                    <th>ì¿ í°ë²ˆí˜¸</th>
                    <th>ì´ë©”ì¼</th>
                    <th>ì´ë¦„</th>
                    <th>ë“±ë¡ì¼ì‹œ</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>10070</td>
                    <td>TEMP-0123-4567-IJKL</td>
                    <td>user10@example.com</td>
                    <td>í•œì˜ˆìŠ¬</td>
                    <td>2025.07.22 14:50</td>
                </tr>
                <tr>
                    <td>10069</td>
                    <td>TEMP-9012-3456-HIJK</td>
                    <td>user9@example.com</td>
                    <td>ì†¡ì§€í›ˆ</td>
                    <td>2025.07.22 13:20</td>
                </tr>
                <tr>
                    <td>10068</td>
                    <td>TEMP-8901-2345-GHIJ</td>
                    <td>user8@example.com</td>
                    <td>ìœ¤ì„œì—°</td>
                    <td>2025.07.22 11:45</td>
                </tr>
                <tr>
                    <td>10067</td>
                    <td>TEMP-7890-1234-FGHI</td>
                    <td>user7@example.com</td>
                    <td>ì„ë™í˜„</td>
                    <td>2025.07.22 10:30</td>
                </tr>
                <tr>
                    <td>10066</td>
                    <td>TEMP-6789-0123-EFGH</td>
                    <td>user6@example.com</td>
                    <td>ê°•ë¯¸ë‚˜</td>
                    <td>2025.07.22 09:15</td>
                </tr>
                <tr>
                    <td>10065</td>
                    <td>TEMP-5678-9012-DEFG</td>
                    <td>user5@example.com</td>
                    <td>ì •ìš°ì„±</td>
                    <td>2025.07.23 18:05</td>
                </tr>
                <tr>
                    <td>10064</td>
                    <td>TEMP-4567-8901-CDEF</td>
                    <td>user4@example.com</td>
                    <td>ìµœìˆ˜ì§„</td>
                    <td>2025.07.23 17:10</td>
                </tr>
                <tr>
                    <td>10063</td>
                    <td>TEMP-3456-7890-BCDE</td>
                    <td>user3@example.com</td>
                    <td>ë°•ì² ìˆ˜</td>
                    <td>2025.07.23 16:20</td>
                </tr>
                <tr>
                    <td>10062</td>
                    <td>TEMP-2345-6789-ABCD</td>
                    <td>user2@example.com</td>
                    <td>ì´ì˜í¬</td>
                    <td>2025.07.23 15:45</td>
                </tr>
                <tr>
                    <td>10061</td>
                    <td>TEMP-1234-5678-9ABC</td>
                    <td>user1@example.com</td>
                    <td>ê¹€ë¯¼ìˆ˜</td>
                    <td>2025.07.23 14:30</td>
                </tr>
            </tbody>
        </table>
        
        <!-- í˜ì´ì§• -->
        <div class="pagination-container" style="display: flex; justify-content: center; align-items: center; padding: 20px; gap: 10px;">
            <button class="btn btn-outline btn-sm" style="padding: 5px 10px;">ì²« í˜ì´ì§€</button>
            <button class="btn btn-outline btn-sm" style="padding: 5px 10px;">ì´ì „</button>
            <div style="display: flex; gap: 5px;">
                <button class="btn btn-primary btn-sm" style="padding: 5px 10px; background-color: #3b82f6; color: white;">1</button>
                <button class="btn btn-outline btn-sm" style="padding: 5px 10px;">2</button>
                <button class="btn btn-outline btn-sm" style="padding: 5px 10px;">3</button>
                <button class="btn btn-outline btn-sm" style="padding: 5px 10px;">4</button>
                <button class="btn btn-outline btn-sm" style="padding: 5px 10px;">5</button>
                <span style="padding: 5px;">...</span>
                <button class="btn btn-outline btn-sm" style="padding: 5px 10px;">671</button>
            </div>
            <button class="btn btn-outline btn-sm" style="padding: 5px 10px;">ë‹¤ìŒ</button>
            <button class="btn btn-outline btn-sm" style="padding: 5px 10px;">ë§ˆì§€ë§‰</button>
            <div style="margin-left: 20px; display: flex; align-items: center; gap: 5px;">
                <span style="font-size: 13px;">í˜ì´ì§€ë‹¹</span>
                <select style="padding: 3px; border: 1px solid #d1d5db; border-radius: 4px; font-size: 12px;">
                    <option>15</option>
                    <option>30</option>
                    <option>50</option>
                    <option>100</option>
                </select>
                <span style="font-size: 13px;">ê°œì”© ë³´ê¸°</span>
            </div>
        </div>
    </div>

    <!-- íŒŒì¼ ì—…ë¡œë“œë¥¼ ìœ„í•œ ìˆ¨ê²¨ì§„ input -->
    <input type="file" id="bulkUploadInput" accept=".xlsx,.xls,.csv" style="display: none;">

    <!-- ì¿ í° ì‹ ê·œ ë“±ë¡ íŒì—… -->
    <div id="couponAddModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: relative; width: 90%; max-width: 500px; margin: 10% auto; background: white; border-radius: 12px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); overflow: hidden;">
            <!-- íŒì—… í—¤ë” -->
            <div style="background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; padding: 20px 25px; display: flex; justify-content: space-between; align-items: center;">
                <h2 style="margin: 0; font-size: 1.3rem; font-weight: 600; display: flex; align-items: center; gap: 10px;">
                    ğŸ« ì¿ í° ì‹ ê·œ ë“±ë¡
                </h2>
                <button onclick="closeAddCouponModal()" style="background: none; border: none; color: white; font-size: 24px; cursor: pointer; padding: 0; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: background-color 0.2s;">Ã—</button>
            </div>

            <!-- íŒì—… ë³¸ë¬¸ -->
            <div style="padding: 30px 25px;">
                <div style="margin-bottom: 25px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #374151; font-size: 14px;">
                        ì¿ í°ì½”ë“œ <span style="color: #ef4444;">*</span>
                    </label>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <input type="text" id="coupon-part-1" maxlength="4" placeholder="****" style="width: 80px; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 16px; text-align: center; font-weight: 600; outline: none; transition: border-color 0.2s;">
                        <span style="color: #9ca3af; font-size: 18px; font-weight: bold;">-</span>
                        <input type="text" id="coupon-part-2" maxlength="4" placeholder="****" style="width: 80px; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 16px; text-align: center; font-weight: 600; outline: none; transition: border-color 0.2s;">
                        <span style="color: #9ca3af; font-size: 18px; font-weight: bold;">-</span>
                        <input type="text" id="coupon-part-3" maxlength="4" placeholder="****" style="width: 80px; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 16px; text-align: center; font-weight: 600; outline: none; transition: border-color 0.2s;">
                        <span style="color: #9ca3af; font-size: 18px; font-weight: bold;">-</span>
                        <input type="text" id="coupon-part-4" maxlength="4" placeholder="****" style="width: 80px; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 16px; text-align: center; font-weight: 600; outline: none; transition: border-color 0.2s;">
                    </div>
                </div>

                <!-- ë²„íŠ¼ ì˜ì—­ -->
                <div style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 30px;">
                    <button onclick="closeAddCouponModal()" style="padding: 12px 24px; background: #f3f4f6; color: #374151; border: none; border-radius: 8px; font-size: 14px; font-weight: 500; cursor: pointer; transition: all 0.2s;">
                        ì·¨ì†Œ
                    </button>
                    <button onclick="saveCoupon()" style="padding: 12px 24px; background: #3b82f6; color: white; border: none; border-radius: 8px; font-size: 14px; font-weight: 500; cursor: pointer; transition: all 0.2s; box-shadow: 0 2px 4px rgba(59, 130, 246, 0.2);">
                        ì €ì¥
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="../../scripts/common.js"></script>
    <script>
        // ìƒíƒœ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        document.querySelectorAll('.status-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                // ëª¨ë“  ë²„íŠ¼ì—ì„œ active í´ë˜ìŠ¤ ì œê±°
                document.querySelectorAll('.status-btn').forEach(b => b.classList.remove('active'));
                // í´ë¦­ëœ ë²„íŠ¼ì— active í´ë˜ìŠ¤ ì¶”ê°€
                this.classList.add('active');
            });
        });

        // ê²€ìƒ‰ ê¸°ëŠ¥
        document.getElementById('searchBtn').addEventListener('click', function() {
            const category = document.getElementById('searchCategory').value;
            const searchText = document.getElementById('searchInput').value.trim();
            
            if (searchText === '') {
                alert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ì‹¤ì œ ê²€ìƒ‰ ë¡œì§ êµ¬í˜„
            console.log('ê²€ìƒ‰ ì¹´í…Œê³ ë¦¬:', category);
            console.log('ê²€ìƒ‰ì–´:', searchText);
            alert(`${category}ì—ì„œ "${searchText}" ê²€ìƒ‰ ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.`);
        });

        // ì—”í„°í‚¤ë¡œ ê²€ìƒ‰
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('searchBtn').click();
            }
        });

        // ë²„íŠ¼ ê¸°ëŠ¥ë“¤
        function downloadSample() {
            alert('ì¼ê´„ ë“±ë¡ ìƒ˜í”Œ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤.');
        }

        function bulkUpload() {
            alert('ì¿ í°ë²ˆí˜¸ ì¼ê´„ ë“±ë¡ ê¸°ëŠ¥ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.');
        }

        function downloadExcel() {
            alert('ì—‘ì…€ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤.');
        }

        // ì‹ ê·œ ë“±ë¡ ê¸°ëŠ¥
        function showAddCouponModal() {
            document.getElementById('couponAddModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
            // ì²« ë²ˆì§¸ ì…ë ¥ í•„ë“œë¡œ í¬ì»¤ìŠ¤ ì´ë™
            document.getElementById('coupon-part-1').focus();
        }

        function closeAddCouponModal() {
            document.getElementById('couponAddModal').style.display = 'none';
            document.body.style.overflow = 'auto';
            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            document.querySelectorAll('.coupon-input').forEach(input => {
                input.value = '';
            });
        }

        // ì¿ í° ì…ë ¥ í•„ë“œ ê´€ë¦¬
        document.querySelectorAll('.coupon-input').forEach((input, index) => {
            // ì…ë ¥ ì‹œ ìë™ìœ¼ë¡œ ë‹¤ìŒ í•„ë“œë¡œ ì´ë™
            input.addEventListener('input', function() {
                // ëŒ€ë¬¸ìë¡œ ë³€í™˜
                this.value = this.value.toUpperCase();
                
                // ìˆ«ìì™€ ì˜ë¬¸ìë§Œ í—ˆìš©
                this.value = this.value.replace(/[^A-Z0-9]/g, '');
                
                // 4ìë¦¬ ì œí•œ
                if (this.value.length > 4) {
                    this.value = this.value.substring(0, 4);
                }
                
                // 4ìë¦¬ê°€ ë˜ë©´ ë‹¤ìŒ í•„ë“œë¡œ í¬ì»¤ìŠ¤ ì´ë™
                if (this.value.length === 4 && index < 3) {
                    document.getElementById(`coupon-part-${index + 2}`).focus();
                }
            });
            
            // ë°±ìŠ¤í˜ì´ìŠ¤ ì‹œ ì´ì „ í•„ë“œë¡œ ì´ë™
            input.addEventListener('keydown', function(e) {
                if (e.key === 'Backspace' && this.value.length === 0 && index > 0) {
                    document.getElementById(`coupon-part-${index}`).focus();
                }
            });
        });

        // ì¿ í° ì €ì¥
        function saveCoupon() {
            const parts = [];
            for (let i = 1; i <= 4; i++) {
                const value = document.getElementById(`coupon-part-${i}`).value.trim();
                if (value.length !== 4) {
                    alert('ëª¨ë“  ì¿ í° ì½”ë“œ í•„ë“œë¥¼ 4ìë¦¬ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    document.getElementById(`coupon-part-${i}`).focus();
                    return;
                }
                parts.push(value);
            }
            
            const couponCode = parts.join('-');
            
            // ê°„ë‹¨í•œ ì¤‘ë³µ ì²´í¬ (ì‹¤ì œë¡œëŠ” ì„œë²„ì—ì„œ í™•ì¸)
            const existingCoupons = Array.from(document.querySelectorAll('tbody tr')).map(row => row.cells[1].textContent);
            if (existingCoupons.includes(couponCode)) {
                alert('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì¿ í° ì½”ë“œì…ë‹ˆë‹¤.');
                return;
            }
            
            // ì‹¤ì œë¡œëŠ” ì„œë²„ë¡œ ë°ì´í„° ì „ì†¡
            console.log('ìƒˆ ì¿ í° ì½”ë“œ:', couponCode);
            alert('ì¿ í°ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
            closeAddCouponModal();
        }

        // ESC í‚¤ë¡œ íŒì—… ë‹«ê¸°
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeAddCouponModal();
            }
        });

        // íŒì—… ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸°
        document.getElementById('couponAddModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeAddCouponModal();
            }
        });

        // í…Œì´ë¸” í–‰ hover íš¨ê³¼
        document.addEventListener('DOMContentLoaded', function() {
            const tableRows = document.querySelectorAll('tbody tr');
            tableRows.forEach(row => {
                row.addEventListener('mouseenter', function() {
                    this.style.backgroundColor = '#f9fafb';
                });
                row.addEventListener('mouseleave', function() {
                    this.style.backgroundColor = '';
                });
            });
        });
    </script>
</body>
</html> 