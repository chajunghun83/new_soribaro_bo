<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë²ˆì—­ ì‘ì—…ë¬¼ ë¹„êµ - ì†Œë¦¬ë°”ë¡œ BO</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            color: #333;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            margin: 0;
            padding: 0;
        }
        
        .header {
            background: white;
            border-bottom: 2px solid #e5e7eb;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            z-index: 100;
            position: relative;
        }
        
        .header-title {
            font-size: 18px;
            font-weight: 600;
            color: #374151;
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
            min-width: 0;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .header-buttons {
            display: flex;
            gap: 10px;
        }
        
        .download-btn {
            background: #10b981;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .download-btn:hover {
            background: #059669;
        }
        
        .close-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .close-btn:hover {
            background: #dc2626;
        }
        
        .comparison-container {
            display: flex;
            height: calc(100vh - 70px);
            position: relative;
        }
        
        .comparison-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: white;
            border-right: 2px solid #e5e7eb;
        }
        
        .comparison-panel:last-child {
            border-right: none;
        }
        
        .panel-header {
            background: #f8f9fa;
            padding: 15px 20px;
            border-bottom: 1px solid #e5e7eb;
            font-size: 16px;
            font-weight: 600;
            color: #374151;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .panel-content {
            flex: 1;
            overflow-y: auto;
            padding: 0;
            position: relative;
        }
        
        .text-item {
            border-bottom: 1px solid #f3f4f6;
            padding: 20px;
            transition: background-color 0.2s;
        }
        
        .text-item:hover {
            background: #f9fafb;
        }
        
        .text-item.changed {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
        }
        
        .item-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 12px;
        }
        
        .line-no {
            background: #3b82f6;
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            min-width: 50px;
            text-align: center;
        }
        
        .timecode {
            background: #e0e7ff;
            color: #3730a3;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            font-family: 'Courier New', monospace;
        }
        
        .text-content {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 15px;
            font-size: 14px;
            line-height: 1.6;
            min-height: 60px;
        }
        
        .text-content.changed {
            background: #fff7ed;
            border-color: #f59e0b;
        }
        
        .diff-highlight {
            background: #fde047;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: 600;
        }
        
        .comment-section {
            margin-top: 12px;
            padding: 12px;
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 6px;
            font-size: 13px;
            color: #92400e;
        }
        
        .comment-label {
            font-weight: 600;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
            flex-wrap: wrap;
        }
        
        /* ì½”ë©˜íŠ¸ ì¹´í…Œê³ ë¦¬ íƒœê·¸ */
        .comment-category-tag {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            color: white;
            display: inline-block;
        }
        
        .comment-category-tag.translation {
            background: #3b82f6;
        }
        
        .comment-category-tag.guideline {
            background: #f59e0b;
        }
        
        .comment-category-tag.sync {
            background: #8b5cf6;
        }
        
        .comment-category-tag.other {
            background: #6b7280;
        }
        
        /* ì½”ë©˜íŠ¸ ì„œë¸Œì¹´í…Œê³ ë¦¬ íƒœê·¸ */
        .comment-subcategory-tag {
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 10px;
            font-weight: 500;
            background: #e5e7eb;
            color: #374151;
            display: inline-block;
        }
        
        /* ë‹µê¸€ ìŠ¤íƒ€ì¼ */
        .comment-reply {
            margin-top: 12px;
            padding: 10px;
            background: #f8f9fa;
            border-left: 3px solid #3b82f6;
            border-radius: 6px;
        }
        
        .reply-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 6px;
            font-size: 12px;
        }
        
        .reply-author {
            font-weight: 600;
            color: #3b82f6;
        }
        
        .reply-time {
            color: #6b7280;
            font-size: 11px;
        }
        
        .reply-content {
            font-size: 13px;
            color: #374151;
            line-height: 1.4;
        }
        
        /* Overview Ruler */
        .overview-ruler {
            position: absolute;
            right: 0;
            top: 0;
            width: 12px;
            height: 100%;
            background: #f3f4f6;
            border-left: 1px solid #e5e7eb;
        }
        
        .ruler-marker {
            position: absolute;
            width: 100%;
            height: 3px;
            background: #f59e0b;
            cursor: pointer;
        }
        
        .ruler-marker:hover {
            background: #d97706;
        }
        
        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ë§ */
        .panel-content::-webkit-scrollbar {
            width: 8px;
        }
        
        .panel-content::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        
        .panel-content::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        
        .panel-content::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1 class="header-title">
            <span>ğŸŒ</span>
            ë²ˆì—­ ì‘ì—…ë¬¼ ë¹„êµ - ì£¼ë¬¸ë²ˆí˜¸: 20250123098765 | íŒŒì¼: ì˜í•™ê³¼_ì„ìƒì‹¤ìŠµ_êµìœ¡ì˜ìƒ.mp4
        </h1>
        <div class="header-buttons">
            <button class="download-btn" onclick="downloadComparison()">
                <span>ğŸ“</span>
                íŒŒì¼ ë‹¤ìš´ë¡œë“œ
            </button>
            <button class="close-btn" onclick="window.close()">ì°½ ë‹«ê¸°</button>
        </div>
    </div>
    
    <div class="comparison-container">
        <!-- ì¶œë°œì–´ ì˜ì—­ -->
        <div class="comparison-panel">
            <div class="panel-header">
                <span>ğŸ“–</span>
                ì¶œë°œì–´
            </div>
            <div class="panel-content" id="source-panel">
                <!-- 30ê°œ ì¶œë°œì–´ ë°ì´í„°ê°€ JavaScriptë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
        </div>
        
        <!-- ì‘ì—…ë³¸ ì˜ì—­ -->
        <div class="comparison-panel">
            <div class="panel-header">
                <span>ğŸ“</span>
                ì‘ì—…ë³¸
            </div>
            <div class="panel-content" id="original-panel">
                <!-- 30ê°œ ì‘ì—…ë³¸ ë°ì´í„°ê°€ JavaScriptë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
        </div>
        
        <!-- ê²€ìˆ˜ë³¸ ì˜ì—­ -->
        <div class="comparison-panel">
            <div class="panel-header">
                <span>âœ…</span>
                ê²€ìˆ˜ë³¸
            </div>
            <div class="panel-content" id="reviewed-panel">
                <!-- 30ê°œ ê²€ìˆ˜ë³¸ ë°ì´í„°ê°€ JavaScriptë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
            
            <!-- Overview Ruler -->
            <div class="overview-ruler" id="overview-ruler">
                <!-- ë§ˆì»¤ë“¤ì´ JavaScriptë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>
    
    <script>
        // 30ê°œ ë²ˆì—­ ë°ì´í„° ìƒì„±
        const sourceData = [
            { lineNo: 1, timecode: "00:00:10 - 00:00:15", text: "ì•ˆë…•í•˜ì„¸ìš”. ì˜¤ëŠ˜ì€ ì˜í•™ê³¼ ì„ìƒì‹¤ìŠµì— ëŒ€í•´ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤." },
            { lineNo: 2, timecode: "00:00:16 - 00:00:25", text: "ì„ìƒì‹¤ìŠµì€ ì˜í•™ êµìœ¡ì˜ í•µì‹¬ ê³¼ì •ì…ë‹ˆë‹¤." },
            { lineNo: 3, timecode: "00:00:26 - 00:00:35", text: "í•™ìƒë“¤ì€ ì‹¤ì œ í™˜ìë¥¼ ëŒ€ìƒìœ¼ë¡œ ì§„ë£Œ ê²½í—˜ì„ ìŒ“ê²Œ ë©ë‹ˆë‹¤." },
            { lineNo: 4, timecode: "00:00:36 - 00:00:45", text: "ì´ë¡  ì§€ì‹ì„ ì‹¤ì œ ì„ìƒ ìƒí™©ì— ì ìš©í•˜ëŠ” ëŠ¥ë ¥ì„ ê¸°ë¦…ë‹ˆë‹¤." },
            { lineNo: 5, timecode: "00:00:46 - 00:00:55", text: "ì˜ë£Œì§„ê³¼ì˜ í˜‘ë ¥ì„ í†µí•´ íŒ€ì›Œí¬ë¥¼ ë°°ìš°ê²Œ ë©ë‹ˆë‹¤." },
            { lineNo: 6, timecode: "00:00:56 - 00:01:05", text: "í™˜ì ì•ˆì „ê³¼ ì˜ë£Œ ìœ¤ë¦¬ì— ëŒ€í•œ ì´í•´ë„ ì¤‘ìš”í•©ë‹ˆë‹¤." },
            { lineNo: 7, timecode: "00:01:06 - 00:01:15", text: "ë‚´ê³¼, ì™¸ê³¼, ì†Œì•„ê³¼ ë“± ë‹¤ì–‘í•œ ê³¼ì—ì„œ ì‹¤ìŠµì„ ì§„í–‰í•©ë‹ˆë‹¤." },
            { lineNo: 8, timecode: "00:01:16 - 00:01:25", text: "ê° ê³¼ë§ˆë‹¤ íŠ¹ì„±ì— ë§ëŠ” ì‹¤ìŠµ ë‚´ìš©ì´ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤." },
            { lineNo: 9, timecode: "00:01:26 - 00:01:35", text: "ë³‘ë ¥ ì²­ì·¨ì™€ ì‹ ì²´ ê²€ì§„ ê¸°ë²•ì„ ìµíˆê²Œ ë©ë‹ˆë‹¤." },
            { lineNo: 10, timecode: "00:01:36 - 00:01:45", text: "ì§„ë‹¨ ê³¼ì •ì—ì„œ í•„ìš”í•œ ê²€ì‚¬ë“¤ì„ ì´í•´í•˜ê³  í•´ì„í•©ë‹ˆë‹¤." },
            { lineNo: 11, timecode: "00:01:46 - 00:01:55", text: "ì¹˜ë£Œ ê³„íš ìˆ˜ë¦½ì— ì°¸ì—¬í•˜ì—¬ ì„ìƒì  ì‚¬ê³ ë¥¼ ê¸°ë¦…ë‹ˆë‹¤." },
            { lineNo: 12, timecode: "00:01:56 - 00:02:05", text: "ìˆ˜ìˆ ì‹¤ì—ì„œëŠ” ë¬´ê· ìˆ ê³¼ ê¸°ë³¸ì ì¸ ìˆ˜ìˆ  ê¸°ë²•ì„ í•™ìŠµí•©ë‹ˆë‹¤." },
            { lineNo: 13, timecode: "00:02:06 - 00:02:15", text: "ì‘ê¸‰ì‹¤ ì‹¤ìŠµì„ í†µí•´ ì‘ê¸‰ ìƒí™© ëŒ€ì²˜ ëŠ¥ë ¥ì„ ê¸°ë¦…ë‹ˆë‹¤." },
            { lineNo: 14, timecode: "00:02:16 - 00:02:25", text: "ì¤‘í™˜ìì‹¤ì—ì„œëŠ” ì¤‘ì¦ í™˜ì ê´€ë¦¬ë¥¼ ê²½í—˜í•©ë‹ˆë‹¤." },
            { lineNo: 15, timecode: "00:02:26 - 00:02:35", text: "ì™¸ë˜ ì§„ë£Œì—ì„œëŠ” í™˜ìì™€ì˜ ì†Œí†µ ê¸°ë²•ì„ ìµí™ë‹ˆë‹¤." },
            { lineNo: 16, timecode: "00:02:36 - 00:02:45", text: "ì˜ë£Œ ê¸°ë¡ ì‘ì„±ë²•ê³¼ ì°¨íŠ¸ ê´€ë¦¬ ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤." },
            { lineNo: 17, timecode: "00:02:46 - 00:02:55", text: "ê°ì—¼ ê´€ë¦¬ì™€ ì˜ˆë°© ì¡°ì¹˜ì˜ ì¤‘ìš”ì„±ì„ ì´í•´í•©ë‹ˆë‹¤." },
            { lineNo: 18, timecode: "00:02:56 - 00:03:05", text: "ì˜ë£Œì§„ ê°„ì˜ íš¨ê³¼ì ì¸ ì˜ì‚¬ì†Œí†µ ë°©ë²•ì„ í•™ìŠµí•©ë‹ˆë‹¤." },
            { lineNo: 19, timecode: "00:03:06 - 00:03:15", text: "í™˜ìì˜ ê¶Œë¦¬ì™€ í”„ë¼ì´ë²„ì‹œ ë³´í˜¸ì— ëŒ€í•´ ë°°ì›ë‹ˆë‹¤." },
            { lineNo: 20, timecode: "00:03:16 - 00:03:25", text: "ì˜ë£Œ ì‚¬ê³  ì˜ˆë°©ê³¼ ì•ˆì „ ê´€ë¦¬ ì²´ê³„ë¥¼ ì´í•´í•©ë‹ˆë‹¤." },
            { lineNo: 21, timecode: "00:03:26 - 00:03:35", text: "ì„ìƒ ì—°êµ¬ì˜ ê¸°ë³¸ ì›ì¹™ê³¼ ìœ¤ë¦¬ ì§€ì¹¨ì„ í•™ìŠµí•©ë‹ˆë‹¤." },
            { lineNo: 22, timecode: "00:03:36 - 00:03:45", text: "ë‹¤í•™ì œ íŒ€ ì§„ë£Œì˜ ì¤‘ìš”ì„±ê³¼ ì—­í• ì„ ì´í•´í•©ë‹ˆë‹¤." },
            { lineNo: 23, timecode: "00:03:46 - 00:03:55", text: "ì˜ë£Œ ê¸°ìˆ ì˜ ë°œì „ê³¼ ë””ì§€í„¸ í—¬ìŠ¤ì¼€ì–´ë¥¼ ê²½í—˜í•©ë‹ˆë‹¤." },
            { lineNo: 24, timecode: "00:03:56 - 00:04:05", text: "í™˜ì êµìœ¡ê³¼ ìƒë‹´ ê¸°ë²•ì„ ì‹¤ìŠµí•©ë‹ˆë‹¤." },
            { lineNo: 25, timecode: "00:04:06 - 00:04:15", text: "ì˜ë£Œ ì§ˆ í–¥ìƒê³¼ í™˜ì ë§Œì¡±ë„ ê°œì„  ë°©ì•ˆì„ í•™ìŠµí•©ë‹ˆë‹¤." },
            { lineNo: 26, timecode: "00:04:16 - 00:04:25", text: "êµ­ì œ ì˜ë£Œ í‘œì¤€ê³¼ ê°€ì´ë“œë¼ì¸ì„ ì´í•´í•©ë‹ˆë‹¤." },
            { lineNo: 27, timecode: "00:04:26 - 00:04:35", text: "ì›ê²© ì§„ë£Œì™€ í…”ë ˆë©”ë””ì‹ ì˜ í™œìš©ë²•ì„ ë°°ì›ë‹ˆë‹¤." },
            { lineNo: 28, timecode: "00:04:36 - 00:04:45", text: "ì˜ë£Œ ë°ì´í„° ë¶„ì„ê³¼ ì¸ê³µì§€ëŠ¥ í™œìš© ì‚¬ë¡€ë¥¼ í•™ìŠµí•©ë‹ˆë‹¤." },
            { lineNo: 29, timecode: "00:04:46 - 00:04:55", text: "ì§€ì†ì ì¸ ì „ë¬¸ì„± ê°œë°œì˜ ì¤‘ìš”ì„±ì„ ì¸ì‹í•©ë‹ˆë‹¤." },
            { lineNo: 30, timecode: "00:04:56 - 00:05:05", text: "ë¯¸ë˜ ì˜ë£Œì§„ìœ¼ë¡œì„œì˜ ì±…ì„ê°ê³¼ ì‚¬ëª…ê°ì„ ê¸°ë¦…ë‹ˆë‹¤." }
        ];

        const originalData = [
            { lineNo: 1, timecode: "00:00:10 - 00:00:15", text: "Hello. Today, I will explain about clinical practice in the Department of Medicine." },
            { lineNo: 2, timecode: "00:00:16 - 00:00:25", text: "Clinical practice is a core process of medical education." },
            { lineNo: 3, timecode: "00:00:26 - 00:00:35", text: "Students will gain clinical experience with real patients." },
            { lineNo: 4, timecode: "00:00:36 - 00:00:45", text: "They develop the ability to apply theoretical knowledge to actual clinical situations." },
            { lineNo: 5, timecode: "00:00:46 - 00:00:55", text: "They learn teamwork through cooperation with medical staff." },
            { lineNo: 6, timecode: "00:00:56 - 00:01:05", text: "Understanding patient safety and medical ethics is also important." },
            { lineNo: 7, timecode: "00:01:06 - 00:01:15", text: "Practice is conducted in various departments such as internal medicine, surgery, and pediatrics." },
            { lineNo: 8, timecode: "00:01:16 - 00:01:25", text: "Each department has practice content tailored to its characteristics." },
            { lineNo: 9, timecode: "00:01:26 - 00:01:35", text: "Students learn history taking and physical examination techniques." },
            { lineNo: 10, timecode: "00:01:36 - 00:01:45", text: "They understand and interpret the tests needed in the diagnostic process." },
            { lineNo: 11, timecode: "00:01:46 - 00:01:55", text: "They participate in treatment planning to develop clinical thinking." },
            { lineNo: 12, timecode: "00:01:56 - 00:02:05", text: "In the operating room, they learn aseptic technique and basic surgical techniques." },
            { lineNo: 13, timecode: "00:02:06 - 00:02:15", text: "Emergency room practice develops emergency response capabilities." },
            { lineNo: 14, timecode: "00:02:16 - 00:02:25", text: "In the intensive care unit, they experience critical patient management." },
            { lineNo: 15, timecode: "00:02:26 - 00:02:35", text: "In outpatient care, they learn communication techniques with patients." },
            { lineNo: 16, timecode: "00:02:36 - 00:02:45", text: "They learn medical record writing and chart management methods." },
            { lineNo: 17, timecode: "00:02:46 - 00:02:55", text: "They understand the importance of infection control and preventive measures." },
            { lineNo: 18, timecode: "00:02:56 - 00:03:05", text: "They learn effective communication methods between medical staff." },
            { lineNo: 19, timecode: "00:03:06 - 00:03:15", text: "They learn about patient rights and privacy protection." },
            { lineNo: 20, timecode: "00:03:16 - 00:03:25", text: "They understand medical accident prevention and safety management systems." },
            { lineNo: 21, timecode: "00:03:26 - 00:03:35", text: "They learn the basic principles and ethical guidelines of clinical research." },
            { lineNo: 22, timecode: "00:03:36 - 00:03:45", text: "They understand the importance and role of multidisciplinary team care." },
            { lineNo: 23, timecode: "00:03:46 - 00:03:55", text: "They experience the development of medical technology and digital healthcare." },
            { lineNo: 24, timecode: "00:03:56 - 00:04:05", text: "They practice patient education and counseling techniques." },
            { lineNo: 25, timecode: "00:04:06 - 00:04:15", text: "They learn about medical quality improvement and patient satisfaction improvement plans." },
            { lineNo: 26, timecode: "00:04:16 - 00:04:25", text: "They understand international medical standards and guidelines." },
            { lineNo: 27, timecode: "00:04:26 - 00:04:35", text: "They learn how to use telemedicine and telemedicine." },
            { lineNo: 28, timecode: "00:04:36 - 00:04:45", text: "They learn medical data analysis and artificial intelligence use cases." },
            { lineNo: 29, timecode: "00:04:46 - 00:04:55", text: "They recognize the importance of continuous professional development." },
            { lineNo: 30, timecode: "00:04:56 - 00:05:05", text: "They develop a sense of responsibility and mission as future medical professionals." }
        ];

        const reviewedData = [
            { lineNo: 1, changed: false, text: "Hello. Today, I will explain about clinical practice in the Department of Medicine.", comment: null },
            { 
                lineNo: 2, 
                changed: true, 
                text: "Clinical practice is a <span class='diff-highlight'>core component</span> of medical education.", 
                comment: {
                    category: "translation",
                    subcategory: "ì§ì—­",
                    content: '"core process" â†’ "core component" (ë” ìì—°ìŠ¤ëŸ¬ìš´ í‘œí˜„)',
                    reply: null
                }
            },
            { lineNo: 3, changed: false, text: "Students will gain clinical experience with real patients.", comment: null },
            { 
                lineNo: 4, 
                changed: true, 
                text: "They develop the ability to apply theoretical knowledge to <span class='diff-highlight'>real</span> clinical situations.", 
                comment: {
                    category: "translation",
                    subcategory: "ìš©ì–´ í†µì¼ì„± ë¶€ì¡±",
                    content: '"actual" â†’ "real" (ìš©ì–´ í†µì¼)',
                    reply: null
                }
            },
            { 
                lineNo: 5, 
                changed: true, 
                text: "They learn teamwork through <span class='diff-highlight'>collaboration</span> with medical staff.", 
                comment: {
                    category: "translation",
                    subcategory: "ì§ì—­",
                    content: '"cooperation" â†’ "collaboration" (ë” ì ì ˆí•œ í‘œí˜„)',
                    reply: {
                        author: "ì‘ì—…ì",
                        time: "2025-01-28 09:30",
                        content: "collaborationì´ ë” ì •í™•í•œ í‘œí˜„ì´ë„¤ìš”. ìˆ˜ì •í•˜ê² ìŠµë‹ˆë‹¤."
                    }
                }
            },
            { lineNo: 6, changed: false, text: "Understanding patient safety and medical ethics is also important.", comment: null },
            { 
                lineNo: 7, 
                changed: true, 
                text: "Practice is conducted in various departments such as internal medicine, surgery, <span class='diff-highlight'>and</span> pediatrics.", 
                comment: {
                    category: "translation",
                    subcategory: "ì–´ìƒ‰í•œ ë¬¸ì¥ êµ¬ì„±",
                    content: '"and" ì¶”ê°€ë¡œ ìì—°ìŠ¤ëŸ¬ìš´ ë‚˜ì—´ êµ¬ì¡° ì™„ì„±',
                    reply: null
                }
            },
            { lineNo: 8, changed: false, text: "Each department has practice content tailored to its characteristics.", comment: null },
            { 
                lineNo: 9, 
                changed: true, 
                text: "Students learn <span class='diff-highlight'>medical history taking</span> and physical examination techniques.", 
                comment: {
                    category: "translation",
                    subcategory: "ë²ˆì—­ ëˆ„ë½",
                    content: '"history taking" â†’ "medical history taking" (ì˜ë£Œ ì „ë¬¸ìš©ì–´ ëª…í™•í™”)',
                    reply: null
                }
            },
            { lineNo: 10, changed: false, text: "They understand and interpret the tests needed in the diagnostic process.", comment: null },
            { 
                lineNo: 11, 
                changed: true, 
                text: "They participate in treatment planning to develop <span class='diff-highlight'>clinical reasoning</span>.", 
                comment: {
                    category: "translation",
                    subcategory: "ì§ì—­",
                    content: '"clinical thinking" â†’ "clinical reasoning" (ì˜í•™ ì „ë¬¸ìš©ì–´)',
                    reply: null
                }
            },
            { 
                lineNo: 12, 
                changed: true, 
                text: "In the operating room, they learn <span class='diff-highlight'>sterile technique</span> and basic surgical techniques.", 
                comment: {
                    category: "translation",
                    subcategory: "ìš©ì–´ì§‘ ë¯¸ë°˜ì˜",
                    content: '"aseptic technique" â†’ "sterile technique" (ìš©ì–´ì§‘ ë°˜ì˜)',
                    reply: null
                }
            },
            { 
                lineNo: 13, 
                changed: true, 
                text: "Emergency <span class='diff-highlight'>department</span> practice develops emergency response capabilities.", 
                comment: {
                    category: "translation",
                    subcategory: "ìš©ì–´ í†µì¼ì„± ë¶€ì¡±",
                    content: '"emergency room" â†’ "emergency department" (ì˜ë£Œ í‘œì¤€ ìš©ì–´)',
                    reply: null
                }
            },
            { lineNo: 14, changed: false, text: "In the intensive care unit, they experience critical patient management.", comment: null },
            { 
                lineNo: 15, 
                changed: true, 
                text: "In <span class='diff-highlight'>ambulatory</span> care, they learn communication techniques with patients.", 
                comment: {
                    category: "translation",
                    subcategory: "ìš©ì–´ì§‘ ë¯¸ë°˜ì˜",
                    content: '"outpatient" â†’ "ambulatory" (ìš©ì–´ì§‘ ë°˜ì˜)',
                    reply: null
                }
            },
            { lineNo: 16, changed: false, text: "They learn medical record writing and chart management methods.", comment: null },
            { 
                lineNo: 17, 
                changed: true, 
                text: "They understand the importance of <span class='diff-highlight'>infection prevention</span> and preventive measures.", 
                comment: {
                    category: "translation",
                    subcategory: "ì–´ìƒ‰í•œ ë¬¸ì¥ êµ¬ì„±",
                    content: '"infection control" â†’ "infection prevention" (ì¤‘ë³µ í‘œí˜„ ê°œì„ )',
                    reply: null
                }
            },
            { lineNo: 18, changed: false, text: "They learn effective communication methods between medical staff.", comment: null },
            { 
                lineNo: 19, 
                changed: true, 
                text: "They learn about <span class='diff-highlight'>patient rights and confidentiality</span>.", 
                comment: {
                    category: "translation",
                    subcategory: "ìš©ì–´ì§‘ ë¯¸ë°˜ì˜",
                    content: '"privacy protection" â†’ "confidentiality" (ì˜ë£Œ ì „ë¬¸ìš©ì–´)',
                    reply: {
                        author: "ê²€ìˆ˜ì",
                        time: "2025-01-28 11:45",
                        content: "ì˜ë£Œ ë¶„ì•¼ì—ì„œëŠ” confidentialityê°€ ë” ì •í™•í•œ í‘œí˜„ì…ë‹ˆë‹¤."
                    }
                }
            },
            { lineNo: 20, changed: false, text: "They understand medical accident prevention and safety management systems.", comment: null },
            { 
                lineNo: 21, 
                changed: true, 
                text: "They learn the basic principles and <span class='diff-highlight'>ethical guidelines</span> of clinical research.", 
                comment: {
                    category: "translation",
                    subcategory: "ìš©ì–´ í†µì¼ì„± ë¶€ì¡±",
                    content: '"ethics guidelines" â†’ "ethical guidelines" (í˜•ìš©ì‚¬ í˜•íƒœë¡œ í†µì¼)',
                    reply: null
                }
            },
            { lineNo: 22, changed: false, text: "They understand the importance and role of multidisciplinary team care.", comment: null },
            { 
                lineNo: 23, 
                changed: true, 
                text: "They experience <span class='diff-highlight'>advances in</span> medical technology and digital healthcare.", 
                comment: {
                    category: "translation",
                    subcategory: "ì–´ìƒ‰í•œ ë¬¸ì¥ êµ¬ì„±",
                    content: '"the development of" â†’ "advances in" (ë” ìì—°ìŠ¤ëŸ¬ìš´ í‘œí˜„)',
                    reply: null
                }
            },
            { lineNo: 24, changed: false, text: "They practice patient education and counseling techniques.", comment: null },
            { 
                lineNo: 25, 
                changed: true, 
                text: "They learn about <span class='diff-highlight'>healthcare quality improvement</span> and patient satisfaction improvement plans.", 
                comment: {
                    category: "translation",
                    subcategory: "ìš©ì–´ì§‘ ë¯¸ë°˜ì˜",
                    content: '"medical quality" â†’ "healthcare quality" (ìš©ì–´ì§‘ ë°˜ì˜)',
                    reply: null
                }
            },
            { lineNo: 26, changed: false, text: "They understand international medical standards and guidelines.", comment: null },
            { 
                lineNo: 27, 
                changed: true, 
                text: "They learn how to use <span class='diff-highlight'>telemedicine and telehealth</span>.", 
                comment: {
                    category: "translation",
                    subcategory: "ë²ˆì—­ ì¤‘ë³µ",
                    content: 'ì¤‘ë³µ í‘œí˜„ ìˆ˜ì •: "telemedicine and telemedicine" â†’ "telemedicine and telehealth"',
                    reply: {
                        author: "ê²€ìˆ˜ì",
                        time: "2025-01-28 13:20",
                        content: "ì¤‘ë³µ í‘œí˜„ì´ ìˆ˜ì •ë˜ì–´ ë” ì •í™•í•´ì¡ŒìŠµë‹ˆë‹¤."
                    }
                }
            },
            { 
                lineNo: 28, 
                changed: true, 
                text: "They learn medical data analysis and <span class='diff-highlight'>AI</span> use cases.", 
                comment: {
                    category: "translation",
                    subcategory: "ìš©ì–´ì§‘ ë¯¸ë°˜ì˜",
                    content: '"artificial intelligence" â†’ "AI" (ìš©ì–´ì§‘ ë°˜ì˜)',
                    reply: null
                }
            },
            { lineNo: 29, changed: false, text: "They recognize the importance of continuous professional development.", comment: null },
            { 
                lineNo: 30, 
                changed: true, 
                text: "They develop a sense of responsibility and mission <span class='diff-highlight'>as future healthcare professionals</span>.", 
                comment: {
                    category: "translation",
                    subcategory: "ì–´ìƒ‰í•œ ë¬¸ì¥ êµ¬ì„±",
                    content: '"as future medical professionals" â†’ "as future healthcare professionals" (í¬ê´„ì  í‘œí˜„)',
                    reply: {
                        author: "ì‘ì—…ì",
                        time: "2025-01-28 15:10",
                        content: "healthcare professionalsê°€ ë” í¬ê´„ì ì´ê³  ì ì ˆí•œ í‘œí˜„ì´ë„¤ìš”."
                    }
                }
            }
        ];

        // ë°ì´í„° ë Œë”ë§ í•¨ìˆ˜
        function renderData() {
            const sourcePanel = document.getElementById('source-panel');
            const originalPanel = document.getElementById('original-panel');
            const reviewedPanel = document.getElementById('reviewed-panel');
            const overviewRuler = document.getElementById('overview-ruler');

            // ì¶œë°œì–´ ë°ì´í„° ë Œë”ë§
            sourcePanel.innerHTML = sourceData.map(item => `
                <div class="text-item">
                    <div class="item-header">
                        <span class="line-no">${item.lineNo}</span>
                        <span class="timecode">${item.timecode}</span>
                    </div>
                    <div class="text-content">
                        ${item.text}
                    </div>
                </div>
            `).join('');

            // ì‘ì—…ë³¸ ë°ì´í„° ë Œë”ë§
            originalPanel.innerHTML = originalData.map(item => `
                <div class="text-item">
                    <div class="item-header">
                        <span class="line-no">${item.lineNo}</span>
                        <span class="timecode">${item.timecode}</span>
                    </div>
                    <div class="text-content">
                        ${item.text}
                    </div>
                </div>
            `).join('');

            // ê²€ìˆ˜ë³¸ ë°ì´í„° ë Œë”ë§
            reviewedPanel.innerHTML = reviewedData.map(item => `
                <div class="text-item${item.changed ? ' changed' : ''}">
                    <div class="item-header">
                        <span class="line-no">${item.lineNo}</span>
                        <span class="timecode">${originalData[item.lineNo - 1].timecode}</span>
                    </div>
                    <div class="text-content${item.changed ? ' changed' : ''}">
                        ${item.text}
                    </div>
                    ${item.comment ? `
                        <div class="comment-section">
                            <div class="comment-label">
                                <span>ğŸ’¬</span>
                                ì½”ë©˜íŠ¸
                                <span class="comment-category-tag ${item.comment.category}">${getCategoryName(item.comment.category)}</span>
                                <span class="comment-subcategory-tag">${item.comment.subcategory}</span>
                            </div>
                            ${item.comment.content}
                            ${item.comment.reply ? `
                                <div class="comment-reply">
                                    <div class="reply-header">
                                        <span>â†³</span>
                                        <span class="reply-author">${item.comment.reply.author}</span>
                                        <span class="reply-time">${item.comment.reply.time}</span>
                                    </div>
                                    <div class="reply-content">
                                        ${item.comment.reply.content}
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    ` : ''}
                </div>
            `).join('');

            // Overview Ruler ë§ˆì»¤ ìƒì„±
            const changedItems = reviewedData.filter(item => item.changed);
            overviewRuler.innerHTML = changedItems.map((item, index) => {
                const position = (item.lineNo / 30) * 100;
                return `<div class="ruler-marker" style="top: ${position}%;" title="ë¼ì¸ ${item.lineNo}: ${getCategoryName(item.comment.category)} > ${item.comment.subcategory}" onclick="scrollToLine(${item.lineNo})"></div>`;
            }).join('');
        }

        // ì¹´í…Œê³ ë¦¬ ì´ë¦„ ë³€í™˜
        function getCategoryName(category) {
            const names = {
                'translation': 'ë²ˆì—­',
                'guideline': 'ê°€ì´ë“œë¼ì¸',
                'sync': 'ì‹±í¬',
                'other': 'ê¸°íƒ€'
            };
            return names[category] || category;
        }

        // íŒŒì¼ ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜
        function downloadComparison() {
            alert('ì¶œë°œì–´, ì‘ì—…ë³¸, ê²€ìˆ˜ë³¸ì„ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤.');
        }

        // Overview Ruler í´ë¦­ ì‹œ í•´ë‹¹ ë¼ì¸ìœ¼ë¡œ ìŠ¤í¬ë¡¤
        function scrollToLine(lineNo) {
            const reviewedPanel = document.getElementById('reviewed-panel');
            const targetItem = reviewedPanel.querySelector(`.text-item:nth-child(${lineNo})`);
            
            if (targetItem) {
                targetItem.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'center' 
                });
                
                // ì„ì‹œ í•˜ì´ë¼ì´íŠ¸ íš¨ê³¼
                targetItem.style.backgroundColor = '#fbbf24';
                setTimeout(() => {
                    targetItem.style.backgroundColor = '';
                }, 1000);
            }
        }

        // 3ê°œ íŒ¨ë„ ë™ê¸°í™” ìŠ¤í¬ë¡¤
        let isScrolling = false;
        
        function syncScroll(sourceElement, targetElements) {
            sourceElement.addEventListener('scroll', function() {
                if (!isScrolling) {
                    isScrolling = true;
                    const scrollPercent = this.scrollTop / (this.scrollHeight - this.clientHeight);
                    
                    targetElements.forEach(target => {
                        target.scrollTop = scrollPercent * (target.scrollHeight - target.clientHeight);
                    });
                    
                    setTimeout(() => isScrolling = false, 100);
                }
            });
        }

        // URL íŒŒë¼ë¯¸í„°ì—ì„œ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const orderNumber = urlParams.get('orderNumber');
            const fileName = urlParams.get('fileName');
            
            if (orderNumber || fileName) {
                let titleText = 'ë²ˆì—­ ì‘ì—…ë¬¼ ë¹„êµ';
                
                if (orderNumber) {
                    titleText += ` - ì£¼ë¬¸ë²ˆí˜¸: ${decodeURIComponent(orderNumber)}`;
                }
                
                if (fileName) {
                    titleText += ` | íŒŒì¼: ${decodeURIComponent(fileName)}`;
                }
                
                document.querySelector('.header-title').innerHTML = `
                    <span>ğŸŒ</span>
                    ${titleText}
                `;
            }
            
            // ì°½ ìµœëŒ€í™” ì‹œë„
            try {
                if (window.outerHeight < screen.availHeight || window.outerWidth < screen.availWidth) {
                    window.moveTo(0, 0);
                    window.resizeTo(screen.availWidth, screen.availHeight);
                }
            } catch (e) {
                console.log('ì°½ í¬ê¸° ì¡°ì • ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤:', e);
            }

            // ë°ì´í„° ë Œë”ë§
            renderData();

            // 3ê°œ íŒ¨ë„ ìŠ¤í¬ë¡¤ ë™ê¸°í™” ì„¤ì •
            const sourcePanel = document.getElementById('source-panel');
            const originalPanel = document.getElementById('original-panel');
            const reviewedPanel = document.getElementById('reviewed-panel');
            
            syncScroll(sourcePanel, [originalPanel, reviewedPanel]);
            syncScroll(originalPanel, [sourcePanel, reviewedPanel]);
            syncScroll(reviewedPanel, [sourcePanel, originalPanel]);
        });
    </script>
</body>
</html>
